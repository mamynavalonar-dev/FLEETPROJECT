fleetproject/
â”œâ”€ database/
â”‚  â”œâ”€ seed.sql
â”‚  â”œâ”€ shema.sql
â”‚  â”œâ”€ triggers.sql
â”‚  â””â”€ views.sql
â”œâ”€ fleet-management-backend/
â”‚  â”œâ”€ src/
â”‚  â”‚  â”œâ”€ config/
â”‚  â”‚  â”‚  â””â”€ database.js
â”‚  â”‚  â”œâ”€ middleware/
â”‚  â”‚  â”‚  â””â”€ auth.js
â”‚  â”‚  â”œâ”€ routes/
â”‚  â”‚  â”‚  â”œâ”€ chauffeurs.js
â”‚  â”‚  â”‚  â”œâ”€ demandes.js
â”‚  â”‚  â”‚  â”œâ”€ import.js
â”‚  â”‚  â”‚  â”œâ”€ pdf.js
â”‚  â”‚  â”‚  â””â”€ vehicules.js
â”‚  â”‚  â””â”€ server.js
â”‚  â”œâ”€ package-lock.json
â”‚  â””â”€ package.json
â””â”€ fleet-management-frontend/
   â”œâ”€ public/
   â”‚  â””â”€ vite.svg
   â”œâ”€ src/
   â”‚  â”œâ”€ assets/
   â”‚  â”‚  â””â”€ react.svg
   â”‚  â”œâ”€ components/
   â”‚  â”‚  â”œâ”€ Chauffeurs.jsx
   â”‚  â”‚  â”œâ”€ Dashboard.jsx
   â”‚  â”‚  â”œâ”€ DemandesCarburant.jsx
   â”‚  â”‚  â”œâ”€ DemandesVoiture.jsx
   â”‚  â”‚  â”œâ”€ SuiviCarburant.jsx
   â”‚  â”‚  â””â”€ Vehicules.jsx
   â”‚  â”œâ”€ services/
   â”‚  â”‚  â””â”€ api.js
   â”‚  â”œâ”€ App.css
   â”‚  â”œâ”€ App.jsx
   â”‚  â”œâ”€ index.css
   â”‚  â””â”€ main.jsx
   â”œâ”€ README.md
   â”œâ”€ eslint.config.js
   â”œâ”€ index.html
   â”œâ”€ package-lock.json
   â”œâ”€ package.json
   â””â”€ vite.config.js


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/vite.config.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/vite.config.js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true,
      }
    }
  }
})

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/services/api.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/services/api.js
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api';

const mockToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6ImFkbWluIiwiZW1haWwiOiJhZG1pbkBwcmlydGVtLm1nIiwiaWF0IjoxNzMzNTY4MDAwfQ.mock';
localStorage.setItem('token', mockToken);

const api = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
  timeout: 30000,
  // ðŸ”´ AJOUTE Ã‡A
  validateStatus: function (status) {
    return status < 500; // Accepte les 401, 403, etc. sans retry
  }
});

// Intercepteur pour ajouter le token JWT
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// Intercepteur pour gÃ©rer les erreurs
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // Token expirÃ© ou invalide
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

// ============================================
// AUTHENTIFICATION
// ============================================

export const authAPI = {
  login: (credentials) => api.post('/auth/login', credentials),
  register: (userData) => api.post('/auth/register', userData),
  logout: () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
  },
  getCurrentUser: () => {
    const user = localStorage.getItem('user');
    return user ? JSON.parse(user) : null;
  },
  setCurrentUser: (user, token) => {
    localStorage.setItem('user', JSON.stringify(user));
    localStorage.setItem('token', token);
  }
};

// ============================================
// DEMANDES CARBURANT
// ============================================

export const demandesCarburantAPI = {
  getAll: (params = {}) => api.get('/demandes-carburant', { params }),
  getById: (id) => api.get(`/demandes-carburant/${id}`),
  create: (data) => api.post('/demandes-carburant', data),
  verifier: (id, data) => api.put(`/demandes-carburant/${id}/verifier`, data),
  viser: (id, data) => api.put(`/demandes-carburant/${id}/viser`, data),
  downloadPDF: (id) => {
    window.open(`${API_BASE_URL}/demandes-carburant/${id}/pdf`, '_blank');
  }
};

// ============================================
// DEMANDES VOITURE
// ============================================

export const demandesVoitureAPI = {
  getAll: (params = {}) => api.get('/demandes-voiture', { params }),
  getById: (id) => api.get(`/demandes-voiture/${id}`),
  create: (data) => api.post('/demandes-voiture', data),
  affecter: (id, data) => api.put(`/demandes-voiture/${id}/affecter`, data),
  approuver: (id, data) => api.put(`/demandes-voiture/${id}/approuver`, data),
  downloadPDF: (id) => {
    window.open(`${API_BASE_URL}/demandes-voiture/${id}/pdf`, '_blank');
  }
};

// ============================================
// VÃ‰HICULES
// ============================================

export const vehiculesAPI = {
  getAll: (params = {}) => api.get('/vehicules', { params }),
  getById: (id) => api.get(`/vehicules/${id}`),
  create: (data) => api.post('/vehicules', data),
  update: (id, data) => api.put(`/vehicules/${id}`, data),
  delete: (id) => api.delete(`/vehicules/${id}`),
  getMaintenances: (id) => api.get(`/vehicules/${id}/maintenances`),
  addMaintenance: (id, data) => api.post(`/vehicules/${id}/maintenances`, data),
  getDocuments: (id) => api.get(`/vehicules/${id}/documents`),
  addDocument: (id, data) => api.post(`/vehicules/${id}/documents`, data),
};

// ============================================
// CHAUFFEURS
// ============================================

export const chauffeursAPI = {
  getAll: (params = {}) => api.get('/chauffeurs', { params }),
  getById: (id) => api.get(`/chauffeurs/${id}`),
  create: (data) => api.post('/chauffeurs', data),
  update: (id, data) => api.put(`/chauffeurs/${id}`, data),
  desactiver: (id) => api.put(`/chauffeurs/${id}/desactiver`),
  getMissions: (id, params = {}) => api.get(`/chauffeurs/${id}/missions`, { params }),
  getDisponibles: (date) => api.get(`/chauffeurs/disponibles/${date}`),
};

// ============================================
// SUIVI CARBURANT
// ============================================

export const suiviCarburantAPI = {
  getAll: (params = {}) => api.get('/suivis', { params }),
  getById: (id) => api.get(`/suivis/${id}`),
  create: (data) => api.post('/suivis', data),
  update: (id, data) => api.put(`/suivis/${id}`, data),
  delete: (id) => api.delete(`/suivis/${id}`),
};

// ============================================
// IMPORT EXCEL
// ============================================

export const importAPI = {
  excel: (file, onUploadProgress) => {
    const formData = new FormData();
    formData.append('fichier', file);
    
    return api.post('/import-excel', formData, {
      headers: { 'Content-Type': 'multipart/form-data' },
      onUploadProgress,
      timeout: 120000, // 2 minutes pour les gros fichiers
    });
  },
  getHistory: () => api.get('/imports'),
  getDetails: (batchId) => api.get(`/imports/${batchId}`),
};

// ============================================
// DASHBOARDS
// ============================================

export const dashboardAPI = {
  vehicules: () => api.get('/dashboard/vehicules'),
  chauffeurs: () => api.get('/dashboard/chauffeurs'),
  alertesDocuments: () => api.get('/dashboard/alertes-documents'),
  stats: () => api.get('/dashboard/stats'),
  alertes: () => api.get('/alertes'),
};

// ============================================
// STATISTIQUES
// ============================================

export const statsAPI = {
  getGlobal: () => api.get('/stats'),
  getParVehicule: (vehiculeId) => api.get(`/stats/vehicule/${vehiculeId}`),
  getParChauffeur: (chauffeurId) => api.get(`/stats/chauffeur/${chauffeurId}`),
};

// ============================================
// UTILS
// ============================================

export const handleAPIError = (error) => {
  if (error.response) {
    // Le serveur a rÃ©pondu avec un code d'erreur
    const message = error.response.data?.error || error.response.data?.message || 'Une erreur est survenue';
    return {
      message,
      status: error.response.status,
      data: error.response.data
    };
  } else if (error.request) {
    // La requÃªte a Ã©tÃ© envoyÃ©e mais pas de rÃ©ponse
    return {
      message: 'Impossible de contacter le serveur. VÃ©rifiez votre connexion.',
      status: 0
    };
  } else {
    // Erreur lors de la configuration de la requÃªte
    return {
      message: error.message || 'Une erreur inattendue est survenue',
      status: -1
    };
  }
};

export default api;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/main.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/main.jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  // ðŸ”´ DÃ‰SACTIVER StrictMode temporairement pour debug
  <App />
)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/index.css â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
/* fleet-management-frontend/src/index.css */
:root {
  --primary: #2563eb;
  --primary-dark: #1d4ed8;
  --secondary: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
  --success: #22c55e;
  --bg-gray: #f9fafb;
  --border: #e5e7eb;
  --text-primary: #111827;
  --text-secondary: #6b7280;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--bg-gray);
  color: var(--text-primary);
}

#root {
  min-height: 100vh;
}

button {
  cursor: pointer;
  border: none;
  background: none;
  font-family: inherit;
}

input, select, textarea {
  font-family: inherit;
  font-size: inherit;
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/assets/react.svg â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/App.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/App.jsx
import React, { useState, useEffect } from 'react';
import { Car, Fuel, FileText, Users, BarChart3, DollarSign } from 'lucide-react';
import Dashboard from './components/Dashboard';
import DemandesCarburant from './components/DemandesCarburant';
import DemandesVoiture from './components/DemandesVoiture';
import SuiviCarburant from './components/SuiviCarburant';
import Vehicules from './components/Vehicules';
import Chauffeurs from './components/Chauffeurs';
import { authAPI } from './services/api';
import './App.css';

function App() {
  const [ongletActif, setOngletActif] = useState('dashboard');
  const [user, setUser] = useState(null);

  useEffect(() => {
    // CORRECTION: Utiliser un useEffect qui ne s'exÃ©cute qu'une fois
    const mockUser = {
      id: 1,
      nom: 'Admin',
      prenom: 'SystÃ¨me',
      email: 'admin@prirtem.mg',
      role: 'admin'
    };
    setUser(mockUser);
  }, []); // ðŸ”´ IMPORTANT: Tableau vide pour une seule exÃ©cution

  const handleRoleChange = (newRole) => {
    setUser(prev => ({ ...prev, role: newRole })); // ðŸ”´ CORRECTION: Utiliser la forme fonctionnelle
  };

  // ðŸ”´ CORRECTION: MÃ©moriser la fonction pour Ã©viter les re-renders
  const renderContent = React.useMemo(() => {
    switch (ongletActif) {
      case 'dashboard':
        return <Dashboard userRole={user?.role} />;
      case 'demandes_carburant':
        return <DemandesCarburant userRole={user?.role} userId={user?.id} />;
      case 'demandes_voiture':
        return <DemandesVoiture userRole={user?.role} userId={user?.id} />;
      case 'suivi_carburant':
        return <SuiviCarburant userRole={user?.role} />;
      case 'vehicules':
        return <Vehicules userRole={user?.role} />;
      case 'chauffeurs':
        return <Chauffeurs userRole={user?.role} />;
      default:
        return <Dashboard userRole={user?.role} />;
    }
  }, [ongletActif, user?.role, user?.id]); // ðŸ”´ DÃ©pendances minimales

  const menuItems = [
    { id: 'dashboard', label: 'Dashboard', icon: BarChart3, roles: ['demandeur', 'logistique', 'raf', 'admin'] },
    { id: 'demandes_carburant', label: 'Demandes Carburant', icon: Fuel, roles: ['demandeur', 'logistique', 'raf', 'admin'] },
    { id: 'demandes_voiture', label: 'Demandes Voiture', icon: FileText, roles: ['demandeur', 'logistique', 'raf', 'admin'] },
    { id: 'suivi_carburant', label: 'Suivi Carburant', icon: DollarSign, roles: ['logistique', 'admin'] },
    { id: 'vehicules', label: 'VÃ©hicules', icon: Car, roles: ['logistique', 'admin'] },
    { id: 'chauffeurs', label: 'Chauffeurs', icon: Users, roles: ['logistique', 'admin'] }
  ];

  const visibleMenuItems = React.useMemo(() => 
    menuItems.filter(item => item.roles.includes(user?.role)),
    [user?.role]
  );

  if (!user) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Chargement...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="app">
      <nav className="navbar">
        <div className="navbar-content">
          <div className="navbar-brand">
            <div className="logo">
              <Car size={32} />
            </div>
            <div className="brand-text">
              <h1>PRIRTEM Fleet</h1>
              <p>SystÃ¨me de Gestion IntÃ©grÃ©</p>
            </div>
          </div>
          
          <div className="navbar-actions">
            <select
              value={user.role}
              onChange={(e) => handleRoleChange(e.target.value)}
              className="role-selector"
            >
              <option value="demandeur">Demandeur</option>
              <option value="logistique">Logistique</option>
              <option value="raf">RAF</option>
              <option value="admin">Admin</option>
            </select>
            
            <div className="user-info">
              <span>{user.nom} {user.prenom}</span>
              <span className="user-role">{user.role}</span>
            </div>
          </div>
        </div>
      </nav>

      <div className="nav-menu">
        <div className="nav-menu-content">
          {visibleMenuItems.map(item => {
            const Icon = item.icon;
            return (
              <button
                key={item.id}
                onClick={() => setOngletActif(item.id)}
                className={`nav-item ${ongletActif === item.id ? 'active' : ''}`}
              >
                <Icon size={18} />
                <span>{item.label}</span>
              </button>
            );
          })}
        </div>
      </div>

      <main className="main-content">
        <div className="content-wrapper">
          {renderContent}
        </div>
      </main>
    </div>
  );
}

export default App;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/App.css â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
/* fleet-management-frontend/src/App.css */
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Navbar */
.navbar {
  background: white;
  border-bottom: 1px solid var(--border);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

.navbar-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 1rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.navbar-brand {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.logo {
  background: var(--primary);
  padding: 0.5rem;
  border-radius: 0.5rem;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
}

.brand-text h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
}

.brand-text p {
  font-size: 0.875rem;
  color: var(--text-secondary);
}

.navbar-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.role-selector {
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  border-radius: 0.5rem;
  background: white;
  font-size: 0.875rem;
}

.user-info {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.user-info span:first-child {
  font-weight: 600;
  font-size: 0.875rem;
}

.user-role {
  font-size: 0.75rem;
  color: var(--text-secondary);
  text-transform: uppercase;
}

/* Menu Navigation */
.nav-menu {
  background: white;
  border-bottom: 1px solid var(--border);
}

.nav-menu-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 1.5rem;
  display: flex;
  gap: 0.25rem;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  color: var(--text-secondary);
  font-weight: 500;
  font-size: 0.875rem;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}

.nav-item:hover {
  color: var(--text-primary);
  background: var(--bg-gray);
}

.nav-item.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
}

/* Main Content */
.main-content {
  flex: 1;
  background: var(--bg-gray);
}

.content-wrapper {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

/* Cards */
.card {
  background: white;
  border-radius: 0.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  padding: 1.5rem;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 700;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  border-radius: 0.5rem;
  font-weight: 500;
  font-size: 0.875rem;
  transition: all 0.2s;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-dark);
}

.btn-success {
  background: var(--success);
  color: white;
}

.btn-success:hover {
  background: #16a34a;
}

.btn-secondary {
  background: white;
  color: var(--text-primary);
  border: 1px solid var(--border);
}

.btn-secondary:hover {
  background: var(--bg-gray);
}

/* Table */
.table-container {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
}

thead {
  background: var(--bg-gray);
}

th {
  padding: 0.75rem 1rem;
  text-align: left;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-secondary);
}

td {
  padding: 1rem;
  border-top: 1px solid var(--border);
}

tr:hover {
  background: var(--bg-gray);
}

/* Badge */
.badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
}

.badge-success {
  background: #d1fae5;
  color: #065f46;
}

.badge-warning {
  background: #fef3c7;
  color: #92400e;
}

.badge-error {
  background: #fee2e2;
  color: #991b1b;
}

.badge-info {
  background: #dbeafe;
  color: #1e40af;
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
  padding: 1rem;
}

.modal-content {
  background: white;
  border-radius: 0.5rem;
  max-width: 600px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  padding: 2rem;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 700;
}

/* Form */
.form-group {
  margin-bottom: 1rem;
}

.form-label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  font-size: 0.875rem;
  color: var(--text-primary);
}

.form-input, .form-select, .form-textarea {
  width: 100%;
  padding: 0.625rem 0.875rem;
  border: 1px solid var(--border);
  border-radius: 0.375rem;
  font-size: 0.875rem;
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.form-textarea {
  resize: vertical;
  min-height: 80px;
}

/* Grid */
.grid {
  display: grid;
  gap: 1.5rem;
}

.grid-cols-2 {
  grid-template-columns: repeat(2, 1fr);
}

.grid-cols-3 {
  grid-template-columns: repeat(3, 1fr);
}

.grid-cols-4 {
  grid-template-columns: repeat(4, 1fr);
}

/* Loading */
.loading {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 300px;
  font-size: 1.125rem;
  color: var(--text-secondary);
}

/* Responsive */
@media (max-width: 768px) {
  .navbar-content {
    flex-direction: column;
    gap: 1rem;
  }
  
  .nav-menu-content {
    flex-wrap: wrap;
  }
  
  .grid-cols-2, .grid-cols-3, .grid-cols-4 {
    grid-template-columns: 1fr;
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/README.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/components/Vehicules.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/components/Vehicules.jsx
import React, { useState, useEffect } from 'react';
import { Plus, Edit, Eye, Trash2, Wrench, FileText, Car, AlertCircle, XCircle } from 'lucide-react';
import { vehiculesAPI, handleAPIError } from '../services/api';

const Vehicules = ({ userRole }) => {
  const [vehicules, setVehicules] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showModal, setShowModal] = useState(false);
  const [showDetailModal, setShowDetailModal] = useState(false);
  const [selectedVehicule, setSelectedVehicule] = useState(null);
  const [mode, setMode] = useState('create'); // create ou edit

  const [formData, setFormData] = useState({
    immatriculation: '',
    marque: '',
    modele: '',
    annee: new Date().getFullYear(),
    type_vehicule: 'voiture',
    type_carburant: 'essence',
    capacite_reservoir: '',
    couleur: '',
    numero_chassis: ''
  });

  useEffect(() => {
    chargerVehicules();
  }, []);

  const chargerVehicules = async () => {
    setLoading(true);
    try {
      const response = await vehiculesAPI.getAll();
      if (response.data.success) {
        setVehicules(response.data.data);
      }
    } catch (error) {
      console.error('Erreur:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async () => {
    if (!formData.immatriculation || !formData.marque || !formData.modele) {
      alert('Veuillez remplir tous les champs obligatoires');
      return;
    }

    try {
      const response = mode === 'create' 
        ? await vehiculesAPI.create(formData)
        : await vehiculesAPI.update(selectedVehicule.id, formData);

      if (response.data.success) {
        alert(response.data.message);
        setShowModal(false);
        resetForm();
        chargerVehicules();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  const handleEdit = (vehicule) => {
    setSelectedVehicule(vehicule);
    setFormData({
      immatriculation: vehicule.immatriculation,
      marque: vehicule.marque,
      modele: vehicule.modele,
      annee: vehicule.annee,
      type_vehicule: vehicule.type_vehicule,
      type_carburant: vehicule.type_carburant,
      capacite_reservoir: vehicule.capacite_reservoir,
      couleur: vehicule.couleur,
      numero_chassis: vehicule.numero_chassis
    });
    setMode('edit');
    setShowModal(true);
  };

  const handleDelete = async (id) => {
    if (!confirm('ÃŠtes-vous sÃ»r de vouloir supprimer ce vÃ©hicule ?')) return;

    try {
      const response = await vehiculesAPI.delete(id);
      if (response.data.success) {
        alert('VÃ©hicule supprimÃ© avec succÃ¨s');
        chargerVehicules();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  const resetForm = () => {
    setFormData({
      immatriculation: '',
      marque: '',
      modele: '',
      annee: new Date().getFullYear(),
      type_vehicule: 'voiture',
      type_carburant: 'essence',
      capacite_reservoir: '',
      couleur: '',
      numero_chassis: ''
    });
    setMode('create');
    setSelectedVehicule(null);
  };

  const getStatutBadge = (statut) => {
    const styles = {
      'disponible': 'badge-success',
      'en_mission': 'badge-info',
      'maintenance': 'badge-warning',
      'hors_service': 'badge-error'
    };

    const labels = {
      'disponible': 'Disponible',
      'en_mission': 'En Mission',
      'maintenance': 'Maintenance',
      'hors_service': 'Hors Service'
    };

    return (
      <span className={`badge ${styles[statut] || 'badge-info'}`}>
        {labels[statut] || statut}
      </span>
    );
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-3xl font-bold">Gestion des VÃ©hicules</h1>
          <p className="text-gray-600 mt-1">Flotte de {vehicules.length} vÃ©hicule(s)</p>
        </div>

        {(userRole === 'logistique' || userRole === 'admin') && (
          <button
            onClick={() => {
              resetForm();
              setShowModal(true);
            }}
            className="btn btn-primary"
          >
            <Plus size={18} />
            Ajouter VÃ©hicule
          </button>
        )}
      </div>

      {/* Statistiques rapides */}
      <div className="grid grid-cols-4 gap-4">
        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-green-100 p-3 rounded-lg">
              <Car className="text-green-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">Disponibles</p>
              <p className="text-2xl font-bold text-green-600">
                {vehicules.filter(v => v.statut === 'disponible').length}
              </p>
            </div>
          </div>
        </div>

        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-blue-100 p-3 rounded-lg">
              <Car className="text-blue-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">En Mission</p>
              <p className="text-2xl font-bold text-blue-600">
                {vehicules.filter(v => v.statut === 'en_mission').length}
              </p>
            </div>
          </div>
        </div>

        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-orange-100 p-3 rounded-lg">
              <Wrench className="text-orange-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">Maintenance</p>
              <p className="text-2xl font-bold text-orange-600">
                {vehicules.filter(v => v.statut === 'maintenance').length}
              </p>
            </div>
          </div>
        </div>

        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-red-100 p-3 rounded-lg">
              <AlertCircle className="text-red-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">Hors Service</p>
              <p className="text-2xl font-bold text-red-600">
                {vehicules.filter(v => v.statut === 'hors_service').length}
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* Tableau */}
      <div className="card">
        {loading ? (
          <div className="text-center py-12">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
            <p className="text-gray-600 mt-4">Chargement...</p>
          </div>
        ) : (
          <div className="table-container">
            <table>
              <thead>
                <tr>
                  <th>Immatriculation</th>
                  <th>Marque / ModÃ¨le</th>
                  <th>Type</th>
                  <th>Carburant</th>
                  <th>AnnÃ©e</th>
                  <th className="text-right">KM Actuel</th>
                  <th>Statut</th>
                  <th className="text-center">Actions</th>
                </tr>
              </thead>
              <tbody>
                {vehicules.length === 0 ? (
                  <tr>
                    <td colSpan="8" className="text-center py-12 text-gray-500">
                      Aucun vÃ©hicule enregistrÃ©
                    </td>
                  </tr>
                ) : (
                  vehicules.map((vehicule) => (
                    <tr key={vehicule.id}>
                      <td className="font-bold text-blue-600">{vehicule.immatriculation}</td>
                      <td>
                        <div className="font-medium">{vehicule.marque}</div>
                        <div className="text-sm text-gray-600">{vehicule.modele}</div>
                      </td>
                      <td>
                        <span className="badge badge-info">{vehicule.type_vehicule}</span>
                      </td>
                      <td className="capitalize">{vehicule.type_carburant}</td>
                      <td>{vehicule.annee}</td>
                      <td className="text-right font-medium">
                        {vehicule.km_actuel ? vehicule.km_actuel.toLocaleString() : '-'}
                      </td>
                      <td>{getStatutBadge(vehicule.statut)}</td>
                      <td>
                        <div className="flex items-center justify-center gap-2">
                          <button
                            onClick={() => {
                              setSelectedVehicule(vehicule);
                              setShowDetailModal(true);
                            }}
                            className="text-blue-600 hover:text-blue-800"
                            title="Voir dÃ©tails"
                          >
                            <Eye size={18} />
                          </button>

                          {(userRole === 'logistique' || userRole === 'admin') && (
                            <>
                              <button
                                onClick={() => handleEdit(vehicule)}
                                className="text-orange-600 hover:text-orange-800"
                                title="Modifier"
                              >
                                <Edit size={18} />
                              </button>

                              {userRole === 'admin' && (
                                <button
                                  onClick={() => handleDelete(vehicule.id)}
                                  className="text-red-600 hover:text-red-800"
                                  title="Supprimer"
                                >
                                  <Trash2 size={18} />
                                </button>
                              )}
                            </>
                          )}
                        </div>
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        )}
      </div>

      {/* Modal Formulaire */}
      {showModal && (
        <div className="modal-overlay" onClick={() => setShowModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">
                {mode === 'create' ? 'Nouveau VÃ©hicule' : 'Modifier VÃ©hicule'}
              </h2>
              <button onClick={() => setShowModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-4">
              <div className="form-group">
                <label className="form-label">Immatriculation *</label>
                <input
                  type="text"
                  value={formData.immatriculation}
                  onChange={(e) => setFormData({...formData, immatriculation: e.target.value.toUpperCase()})}
                  className="form-input"
                  placeholder="Ex: 1234ABC"
                  required
                  disabled={mode === 'edit'}
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="form-group">
                  <label className="form-label">Marque *</label>
                  <input
                    type="text"
                    value={formData.marque}
                    onChange={(e) => setFormData({...formData, marque: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>

                <div className="form-group">
                  <label className="form-label">ModÃ¨le *</label>
                  <input
                    type="text"
                    value={formData.modele}
                    onChange={(e) => setFormData({...formData, modele: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div className="form-group">
                  <label className="form-label">Type</label>
                  <select
                    value={formData.type_vehicule}
                    onChange={(e) => setFormData({...formData, type_vehicule: e.target.value})}
                    className="form-select"
                  >
                    <option value="voiture">Voiture</option>
                    <option value="camion">Camion</option>
                    <option value="utilitaire">Utilitaire</option>
                    <option value="moto">Moto</option>
                  </select>
                </div>

                <div className="form-group">
                  <label className="form-label">Carburant</label>
                  <select
                    value={formData.type_carburant}
                    onChange={(e) => setFormData({...formData, type_carburant: e.target.value})}
                    className="form-select"
                  >
                    <option value="essence">Essence</option>
                    <option value="diesel">Diesel</option>
                    <option value="hybride">Hybride</option>
                    <option value="electrique">Ã‰lectrique</option>
                  </select>
                </div>

                <div className="form-group">
                  <label className="form-label">AnnÃ©e</label>
                  <input
                    type="number"
                    value={formData.annee}
                    onChange={(e) => setFormData({...formData, annee: parseInt(e.target.value)})}
                    className="form-input"
                    min="1900"
                    max={new Date().getFullYear() + 1}
                  />
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="form-group">
                  <label className="form-label">CapacitÃ© rÃ©servoir (L)</label>
                  <input
                    type="number"
                    value={formData.capacite_reservoir}
                    onChange={(e) => setFormData({...formData, capacite_reservoir: e.target.value})}
                    className="form-input"
                    step="0.1"
                  />
                </div>

                <div className="form-group">
                  <label className="form-label">Couleur</label>
                  <input
                    type="text"
                    value={formData.couleur}
                    onChange={(e) => setFormData({...formData, couleur: e.target.value})}
                    className="form-input"
                  />
                </div>
              </div>

              <div className="form-group">
                <label className="form-label">NumÃ©ro de Chassis</label>
                <input
                  type="text"
                  value={formData.numero_chassis}
                  onChange={(e) => setFormData({...formData, numero_chassis: e.target.value})}
                  className="form-input"
                />
              </div>

              <div className="flex gap-3 pt-4 border-t">
                <button onClick={handleSubmit} className="btn btn-primary flex-1">
                  {mode === 'create' ? 'CrÃ©er' : 'Modifier'}
                </button>
                <button onClick={() => setShowModal(false)} className="btn btn-secondary">
                  Annuler
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Modal DÃ©tails */}
      {showDetailModal && selectedVehicule && (
        <div className="modal-overlay" onClick={() => setShowDetailModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">DÃ©tails du VÃ©hicule</h2>
              <button onClick={() => setShowDetailModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-4">
              <div>
                <label className="text-sm font-medium text-gray-600">Immatriculation</label>
                <p className="text-2xl font-bold text-blue-600">{selectedVehicule.immatriculation}</p>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium text-gray-600">Marque</label>
                  <p className="font-medium">{selectedVehicule.marque}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">ModÃ¨le</label>
                  <p className="font-medium">{selectedVehicule.modele}</p>
                </div>
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div>
                  <label className="text-sm font-medium text-gray-600">Type</label>
                  <p className="capitalize">{selectedVehicule.type_vehicule}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">Carburant</label>
                  <p className="capitalize">{selectedVehicule.type_carburant}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">AnnÃ©e</label>
                  <p>{selectedVehicule.annee}</p>
                </div>
              </div>

              <div>
                <label className="text-sm font-medium text-gray-600">Statut</label>
                <div className="mt-1">{getStatutBadge(selectedVehicule.statut)}</div>
              </div>

              {selectedVehicule.km_actuel && (
                <div>
                  <label className="text-sm font-medium text-gray-600">KilomÃ©trage actuel</label>
                  <p className="text-xl font-bold">{selectedVehicule.km_actuel.toLocaleString()} km</p>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default Vehicules;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/components/SuiviCarburant.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/components/SuiviCarburant.jsx - AMÃ‰LIORÃ‰
import React, { useState, useEffect } from 'react';
import { Upload, Download, Filter, Search, AlertCircle, CheckCircle, XCircle, FileText } from 'lucide-react';
import { suiviCarburantAPI, importAPI, handleAPIError } from '../services/api';

const SuiviCarburant = ({ userRole }) => {
  const [suivis, setSuivis] = useState([]);
  const [loading, setLoading] = useState(true);
  const [uploading, setUploading] = useState(false);
  const [uploadProgress, setUploadProgress] = useState(0);
  const [uploadResult, setUploadResult] = useState(null);
  const [showResultModal, setShowResultModal] = useState(false);
  
  const [filtres, setFiltres] = useState({
    type_suivi: '',
    date_debut: '',
    date_fin: '',
    immatriculation: '',
    statut: ''
  });

  useEffect(() => {
    chargerSuivis();
  }, [filtres]);

  const chargerSuivis = async () => {
    setLoading(true);
    try {
      const response = await suiviCarburantAPI.getAll(filtres);
      if (response.data.success) {
        setSuivis(response.data.data);
      }
    } catch (error) {
      console.error('Erreur:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleImportExcel = async (event) => {
    const file = event.target.files[0];
    if (!file) return;

    setUploading(true);
    setUploadProgress(0);
    setUploadResult(null);

    try {
      const response = await importAPI.excel(file, (progressEvent) => {
        const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);
        setUploadProgress(progress);
      });

      if (response.data.success) {
        setUploadResult(response.data);
        setShowResultModal(true);
        chargerSuivis();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    } finally {
      setUploading(false);
      setUploadProgress(0);
      event.target.value = '';
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-3xl font-bold">Suivi Carburant</h1>
          <p className="text-gray-600 mt-1">Import et gestion des consommations</p>
        </div>

        <label className="btn btn-primary cursor-pointer">
          <input
            type="file"
            accept=".xlsx,.xls"
            onChange={handleImportExcel}
            className="hidden"
            disabled={uploading}
          />
          <Upload size={18} />
          {uploading ? `Import... ${uploadProgress}%` : 'Importer Excel'}
        </label>
      </div>

      {/* Barre de progression */}
      {uploading && (
        <div className="card">
          <div className="mb-2 flex justify-between text-sm">
            <span>Import en cours...</span>
            <span>{uploadProgress}%</span>
          </div>
          <div className="w-full bg-gray-200 rounded-full h-2">
            <div 
              className="bg-blue-600 h-2 rounded-full transition-all duration-300"
              style={{ width: `${uploadProgress}%` }}
            ></div>
          </div>
        </div>
      )}

      {/* Filtres */}
      <div className="card">
        <div className="flex items-center gap-2 mb-4">
          <Filter size={20} />
          <h3 className="font-semibold">Filtres</h3>
        </div>

        <div className="grid grid-cols-4 gap-4">
          <div className="form-group mb-0">
            <label className="form-label">Type</label>
            <select
              value={filtres.type_suivi}
              onChange={(e) => setFiltres({...filtres, type_suivi: e.target.value})}
              className="form-select"
            >
              <option value="">Tous</option>
              <option value="suivi_carburant">Suivi Carburant</option>
              <option value="groupe_electrogene">Groupe Ã‰lectrogÃ¨ne</option>
              <option value="autres_carburants">Autres Carburants</option>
            </select>
          </div>

          <div className="form-group mb-0">
            <label className="form-label">Immatriculation</label>
            <input
              type="text"
              value={filtres.immatriculation}
              onChange={(e) => setFiltres({...filtres, immatriculation: e.target.value})}
              className="form-input"
              placeholder="Rechercher..."
            />
          </div>

          <div className="form-group mb-0">
            <label className="form-label">Date dÃ©but</label>
            <input
              type="date"
              value={filtres.date_debut}
              onChange={(e) => setFiltres({...filtres, date_debut: e.target.value})}
              className="form-input"
            />
          </div>

          <div className="form-group mb-0">
            <label className="form-label">Date fin</label>
            <input
              type="date"
              value={filtres.date_fin}
              onChange={(e) => setFiltres({...filtres, date_fin: e.target.value})}
              className="form-input"
            />
          </div>
        </div>

        <div className="mt-3 text-sm text-gray-600">
          <strong>{suivis.length}</strong> entrÃ©e(s) trouvÃ©e(s)
        </div>
      </div>

      {/* Tableau */}
      <div className="card">
        {loading ? (
          <div className="text-center py-12">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
            <p className="text-gray-600 mt-4">Chargement...</p>
          </div>
        ) : (
          <div className="table-container">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Type</th>
                  <th>Immat/Ã‰quipement</th>
                  <th className="text-right">Montant</th>
                  <th className="text-right">Litres</th>
                  <th className="text-right">KM Jour.</th>
                  <th className="text-right">Conso.</th>
                  <th className="text-center">Replein</th>
                  <th>Anomalie</th>
                </tr>
              </thead>
              <tbody>
                {suivis.length === 0 ? (
                  <tr>
                    <td colSpan="9" className="text-center py-12 text-gray-500">
                      <div className="flex flex-col items-center gap-3">
                        <FileText size={48} className="text-gray-300" />
                        <p className="text-lg font-medium">Aucun suivi trouvÃ©</p>
                        <p className="text-sm">Importez un fichier Excel pour commencer</p>
                      </div>
                    </td>
                  </tr>
                ) : (
                  suivis.map((suivi) => (
                    <tr key={suivi.id}>
                      <td>{new Date(suivi.date_operation).toLocaleDateString('fr-FR')}</td>
                      <td>
                        <span className={`badge ${
                          suivi.type_suivi === 'suivi_carburant' ? 'badge-info' :
                          suivi.type_suivi === 'groupe_electrogene' ? 'badge-success' :
                          'badge-warning'
                        }`}>
                          {suivi.type_suivi}
                        </span>
                      </td>
                      <td className="font-medium">{suivi.immatriculation || suivi.numero_equipement || '-'}</td>
                      <td className="text-right">{suivi.montant?.toLocaleString('fr-FR')} Ar</td>
                      <td className="text-right">{suivi.quantite_litres?.toFixed(1)} L</td>
                      <td className="text-right">{suivi.km_journalier || '-'}</td>
                      <td className="text-right">
                        <span className={suivi.consommation_aux_100 < 15 || suivi.consommation_aux_100 >= 16 ? 'text-red-600 font-bold' : ''}>
                          {suivi.consommation_aux_100?.toFixed(2) || '-'}
                        </span>
                      </td>
                      <td className="text-center">
                        {suivi.est_replein ? 'âœ“' : '-'}
                      </td>
                      <td>
                        {suivi.anomalie ? (
                          <div className="flex items-center gap-1 text-red-600 text-sm">
                            <AlertCircle size={14} />
                            {suivi.anomalie}
                          </div>
                        ) : '-'}
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        )}
      </div>

      {/* Modal RÃ©sultat d'Import */}
      {showResultModal && uploadResult && (
        <div className="modal-overlay" onClick={() => setShowResultModal(false)}>
          <div className="modal-content max-w-3xl" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">RÃ©sultat de l'import</h2>
              <button onClick={() => setShowResultModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-6">
              {/* RÃ©sumÃ© global */}
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <h3 className="font-semibold text-blue-900 mb-2">
                  ðŸ“Š Fichier: {uploadResult.nomFichier}
                </h3>
                <div className="grid grid-cols-3 gap-4 mt-3">
                  <div className="text-center">
                    <div className="text-3xl font-bold text-green-600">{uploadResult.resultats.succes}</div>
                    <div className="text-sm text-gray-600">SuccÃ¨s</div>
                  </div>
                  <div className="text-center">
                    <div className="text-3xl font-bold text-orange-600">{uploadResult.resultats.avertissements}</div>
                    <div className="text-sm text-gray-600">Avertissements</div>
                  </div>
                  <div className="text-center">
                    <div className="text-3xl font-bold text-red-600">{uploadResult.resultats.erreurs}</div>
                    <div className="text-sm text-gray-600">Erreurs</div>
                  </div>
                </div>
              </div>

              {/* DÃ©tails par feuille */}
              <div>
                <h3 className="font-semibold mb-3">ðŸ“„ DÃ©tails par feuille ({uploadResult.nombreFeuilles} feuille(s))</h3>
                <div className="space-y-3">
                  {Object.entries(uploadResult.parFeuille).map(([nomFeuille, stats]) => (
                    <div key={nomFeuille} className="border rounded-lg p-4">
                      <div className="flex items-center justify-between mb-2">
                        <h4 className="font-medium">{nomFeuille}</h4>
                        <span className="badge badge-info">{stats.type}</span>
                      </div>
                      
                      <div className="grid grid-cols-4 gap-2 text-sm">
                        <div>
                          <span className="text-gray-600">Total:</span>
                          <span className="font-medium ml-2">{stats.lignes}</span>
                        </div>
                        <div className="flex items-center gap-1 text-green-600">
                          <CheckCircle size={14} />
                          <span className="font-medium">{stats.succes}</span>
                        </div>
                        <div className="flex items-center gap-1 text-orange-600">
                          <AlertCircle size={14} />
                          <span className="font-medium">{stats.avertissements}</span>
                        </div>
                        <div className="flex items-center gap-1 text-red-600">
                          <XCircle size={14} />
                          <span className="font-medium">{stats.erreurs}</span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              {/* DÃ©tails des erreurs */}
              {uploadResult.details && uploadResult.details.length > 0 && (
                <div>
                  <h3 className="font-semibold mb-3">âš ï¸ DÃ©tails des anomalies (premiÃ¨res 10)</h3>
                  <div className="space-y-2 max-h-60 overflow-y-auto">
                    {uploadResult.details.slice(0, 10).map((detail, index) => (
                      <div 
                        key={index} 
                        className={`text-sm p-2 rounded ${
                          detail.statut === 'error' ? 'bg-red-50 text-red-800' :
                          'bg-orange-50 text-orange-800'
                        }`}
                      >
                        <div className="font-medium">
                          Feuille "{detail.feuille}", Ligne {detail.ligne}
                        </div>
                        <div className="text-xs mt-1">
                          {detail.erreurs?.join(', ') || detail.message}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              <div className="flex justify-end gap-3 pt-4 border-t">
                <button 
                  onClick={() => setShowResultModal(false)} 
                  className="btn btn-primary"
                >
                  Fermer
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default SuiviCarburant;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/components/DemandesVoiture.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/components/DemandesVoiture.jsx
import React, { useState, useEffect } from 'react';
import { Plus, Eye, CheckCircle, XCircle, Download, Car, Users } from 'lucide-react';
import { demandesVoitureAPI, vehiculesAPI, chauffeursAPI, handleAPIError } from '../services/api';

const DemandesVoiture = ({ userRole, userId }) => {
  const [demandes, setDemandes] = useState([]);
  const [vehiculesDisponibles, setVehiculesDisponibles] = useState([]);
  const [chauffeursDisponibles, setChauffeursDisponibles] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showModal, setShowModal] = useState(false);
  const [showAffectationModal, setShowAffectationModal] = useState(false);
  const [selectedDemande, setSelectedDemande] = useState(null);
  
  const [formData, setFormData] = useState({
    date_proposee: '',
    objet: '',
    itineraire: '',
    personnes_transportees: '',
    heure_depart_souhaitee: '',
    heure_retour_probable: ''
  });

  const [affectationData, setAffectationData] = useState({
    vehicule_id: '',
    chauffeur_id: '',
    commentaire: ''
  });

  useEffect(() => {
    chargerDemandes();
  }, []);

  const chargerDemandes = async () => {
    setLoading(true);
    try {
      const response = await demandesVoitureAPI.getAll();
      if (response.data.success) {
        setDemandes(response.data.data);
      }
    } catch (error) {
      console.error('Erreur:', error);
    } finally {
      setLoading(false);
    }
  };

  const chargerRessourcesDisponibles = async (date) => {
    try {
      const [vehicules, chauffeurs] = await Promise.all([
        vehiculesAPI.getAll({ statut: 'disponible' }),
        chauffeursAPI.getDisponibles(date)
      ]);
      
      setVehiculesDisponibles(vehicules.data.data || []);
      setChauffeursDisponibles(chauffeurs.data.data || []);
    } catch (error) {
      console.error('Erreur chargement ressources:', error);
    }
  };

  const handleSubmit = async () => {
    try {
      const response = await demandesVoitureAPI.create(formData);
      if (response.data.success) {
        alert('Demande crÃ©Ã©e avec succÃ¨s !');
        setShowModal(false);
        setFormData({
          date_proposee: '',
          objet: '',
          itineraire: '',
          personnes_transportees: '',
          heure_depart_souhaitee: '',
          heure_retour_probable: ''
        });
        chargerDemandes();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  const handleAffecter = async (approuve) => {
    if (!affectationData.vehicule_id || !affectationData.chauffeur_id) {
      alert('Veuillez sÃ©lectionner un vÃ©hicule et un chauffeur');
      return;
    }

    try {
      const response = await demandesVoitureAPI.affecter(selectedDemande.id, {
        ...affectationData,
        approuve
      });
      
      if (response.data.success) {
        alert(response.data.message);
        setShowAffectationModal(false);
        chargerDemandes();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  const handleApprouver = async (id, approuve) => {
    const commentaire = prompt('Commentaire (optionnel):');
    
    try {
      const response = await demandesVoitureAPI.approuver(id, {
        approuve,
        commentaire
      });
      
      if (response.data.success) {
        alert(response.data.message);
        chargerDemandes();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-3xl font-bold">Demandes de Voiture</h1>
          <p className="text-gray-600 mt-1">Gestion des rÃ©servations de vÃ©hicules</p>
        </div>
        
        {userRole === 'demandeur' && (
          <button onClick={() => setShowModal(true)} className="btn btn-primary">
            <Plus size={18} />
            Nouvelle Demande
          </button>
        )}
      </div>

      <div className="card">
        <div className="table-container">
          <table>
            <thead>
              <tr>
                <th>NÂ° Demande</th>
                <th>Date ProposÃ©e</th>
                <th>Demandeur</th>
                <th>Objet</th>
                <th>VÃ©hicule</th>
                <th>Chauffeur</th>
                <th>Statut</th>
                <th className="text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              {loading ? (
                <tr>
                  <td colSpan="8" className="text-center py-12">Chargement...</td>
                </tr>
              ) : demandes.length === 0 ? (
                <tr>
                  <td colSpan="8" className="text-center py-12 text-gray-500">
                    Aucune demande trouvÃ©e
                  </td>
                </tr>
              ) : (
                demandes.map((demande) => (
                  <tr key={demande.id}>
                    <td className="font-medium">{demande.numero_demande}</td>
                    <td>{new Date(demande.date_proposee).toLocaleDateString('fr-FR')}</td>
                    <td>
                      <div className="font-medium">{demande.demandeur_nom} {demande.demandeur_prenom}</div>
                      <div className="text-xs text-gray-500">{demande.service}</div>
                    </td>
                    <td>{demande.objet}</td>
                    <td>{demande.immatriculation || '-'}</td>
                    <td>{demande.chauffeur_nom ? `${demande.chauffeur_nom} ${demande.chauffeur_prenom}` : '-'}</td>
                    <td>
                      <span className={`badge ${
                        demande.statut === 'valide' ? 'badge-success' :
                        demande.statut.includes('attente') ? 'badge-warning' :
                        demande.statut.includes('rejete') ? 'badge-error' :
                        'badge-info'
                      }`}>
                        {demande.statut}
                      </span>
                    </td>
                    <td>
                      <div className="flex items-center justify-center gap-2">
                        {(userRole === 'logistique' && demande.statut === 'en_attente_logistique') && (
                          <button
                            onClick={() => {
                              setSelectedDemande(demande);
                              chargerRessourcesDisponibles(demande.date_proposee);
                              setShowAffectationModal(true);
                            }}
                            className="btn btn-success btn-sm"
                          >
                            Affecter
                          </button>
                        )}
                        
                        {(userRole === 'raf' && demande.statut === 'en_attente_raf') && (
                          <>
                            <button
                              onClick={() => handleApprouver(demande.id, true)}
                              className="btn btn-success btn-sm"
                            >
                              <CheckCircle size={16} />
                            </button>
                            <button
                              onClick={() => handleApprouver(demande.id, false)}
                              className="btn btn-secondary btn-sm"
                            >
                              <XCircle size={16} />
                            </button>
                          </>
                        )}
                        
                        {demande.statut === 'valide' && (
                          <button
                            onClick={() => demandesVoitureAPI.downloadPDF(demande.id)}
                            className="text-green-600 hover:text-green-800"
                          >
                            <Download size={18} />
                          </button>
                        )}
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Modal Nouvelle Demande */}
      {showModal && (
        <div className="modal-overlay" onClick={() => setShowModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">Nouvelle Demande de Voiture</h2>
              <button onClick={() => setShowModal(false)}>
                <XCircle size={24} />
              </button>
            </div>

            <div className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div className="form-group">
                  <label className="form-label">Date proposÃ©e *</label>
                  <input
                    type="date"
                    value={formData.date_proposee}
                    onChange={(e) => setFormData({...formData, date_proposee: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>
                <div className="form-group">
                  <label className="form-label">Heure de dÃ©part</label>
                  <input
                    type="time"
                    value={formData.heure_depart_souhaitee}
                    onChange={(e) => setFormData({...formData, heure_depart_souhaitee: e.target.value})}
                    className="form-input"
                  />
                </div>
              </div>

              <div className="form-group">
                <label className="form-label">Objet *</label>
                <textarea
                  value={formData.objet}
                  onChange={(e) => setFormData({...formData, objet: e.target.value})}
                  className="form-textarea"
                  rows="2"
                  required
                />
              </div>

              <div className="form-group">
                <label className="form-label">ItinÃ©raire</label>
                <textarea
                  value={formData.itineraire}
                  onChange={(e) => setFormData({...formData, itineraire: e.target.value})}
                  className="form-textarea"
                  rows="2"
                  placeholder="Ex: Antananarivo - Antsirabe - Antananarivo"
                />
              </div>

              <div className="form-group">
                <label className="form-label">Personnes transportÃ©es</label>
                <input
                  type="text"
                  value={formData.personnes_transportees}
                  onChange={(e) => setFormData({...formData, personnes_transportees: e.target.value})}
                  className="form-input"
                  placeholder="Ex: Jean Rakoto, Marie Rabe"
                />
              </div>

              <div className="form-group">
                <label className="form-label">Heure probable de retour</label>
                <input
                  type="time"
                  value={formData.heure_retour_probable}
                  onChange={(e) => setFormData({...formData, heure_retour_probable: e.target.value})}
                  className="form-input"
                />
              </div>

              <div className="flex gap-3 pt-4 border-t">
                <button onClick={handleSubmit} className="btn btn-primary flex-1">
                  Soumettre
                </button>
                <button onClick={() => setShowModal(false)} className="btn btn-secondary">
                  Annuler
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Modal Affectation */}
      {showAffectationModal && selectedDemande && (
        <div className="modal-overlay" onClick={() => setShowAffectationModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">Affecter VÃ©hicule et Chauffeur</h2>
              <button onClick={() => setShowAffectationModal(false)}>
                <XCircle size={24} />
              </button>
            </div>

            <div className="space-y-4">
              <div className="form-group">
                <label className="form-label">VÃ©hicule *</label>
                <select
                  value={affectationData.vehicule_id}
                  onChange={(e) => setAffectationData({...affectationData, vehicule_id: e.target.value})}
                  className="form-select"
                  required
                >
                  <option value="">SÃ©lectionner...</option>
                  {vehiculesDisponibles.map(v => (
                    <option key={v.id} value={v.id}>
                      {v.immatriculation} - {v.marque} {v.modele}
                    </option>
                  ))}
                </select>
              </div>

              <div className="form-group">
                <label className="form-label">Chauffeur *</label>
                <select
                  value={affectationData.chauffeur_id}
                  onChange={(e) => setAffectationData({...affectationData, chauffeur_id: e.target.value})}
                  className="form-select"
                  required
                >
                  <option value="">SÃ©lectionner...</option>
                  {chauffeursDisponibles.map(c => (
                    <option key={c.id} value={c.id}>
                      {c.nom} {c.prenom} - Permis {c.type_permis}
                    </option>
                  ))}
                </select>
              </div>

              <div className="form-group">
                <label className="form-label">Commentaire</label>
                <textarea
                  value={affectationData.commentaire}
                  onChange={(e) => setAffectationData({...affectationData, commentaire: e.target.value})}
                  className="form-textarea"
                  rows="2"
                />
              </div>

              <div className="flex gap-3 pt-4 border-t">
                <button onClick={() => handleAffecter(true)} className="btn btn-success flex-1">
                  Approuver et Envoyer au RAF
                </button>
                <button onClick={() => handleAffecter(false)} className="btn btn-secondary">
                  Rejeter
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default DemandesVoiture;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/public/vite.svg â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/components/DemandesCarburant.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/components/DemandesCarburant.jsx
import React, { useState, useEffect } from 'react';
import { 
  Plus, Eye, CheckCircle, XCircle, Clock, Send, 
  Download, Filter, Search, AlertCircle 
} from 'lucide-react';
import { demandesCarburantAPI, handleAPIError } from '../services/api';

const DemandesCarburant = ({ userRole, userId }) => {
  const [demandes, setDemandes] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showModal, setShowModal] = useState(false);
  const [showDetailModal, setShowDetailModal] = useState(false);
  const [selectedDemande, setSelectedDemande] = useState(null);
  const [filtres, setFiltres] = useState({
    statut: '',
    date_debut: '',
    date_fin: ''
  });

  // Ã‰tat du formulaire
  const [formData, setFormData] = useState({
    type_demande: 'service',
    objet: '',
    montant_previsionnel: '',
    montant_en_lettre: ''
  });

  useEffect(() => {
    chargerDemandes();
  }, [filtres]);

  const chargerDemandes = async () => {
    setLoading(true);
    try {
      const response = await demandesCarburantAPI.getAll(filtres);
      if (response.data.success) {
        setDemandes(response.data.data);
      }
    } catch (error) {
      console.error('Erreur chargement demandes:', error);
      const errorInfo = handleAPIError(error);
      alert(errorInfo.message);
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async () => {
    if (!formData.objet || !formData.montant_previsionnel) {
      alert('Veuillez remplir tous les champs obligatoires');
      return;
    }

    try {
      const response = await demandesCarburantAPI.create(formData);
      if (response.data.success) {
        alert('Demande crÃ©Ã©e avec succÃ¨s !');
        setShowModal(false);
        setFormData({
          type_demande: 'service',
          objet: '',
          montant_previsionnel: '',
          montant_en_lettre: ''
        });
        chargerDemandes();
      }
    } catch (error) {
      const errorInfo = handleAPIError(error);
      alert('Erreur: ' + errorInfo.message);
    }
  };

  const handleVerifier = async (id, approuve) => {
    const commentaire = prompt('Commentaire (optionnel):');
    
    try {
      const response = await demandesCarburantAPI.verifier(id, {
        approuve,
        commentaire
      });
      
      if (response.data.success) {
        alert(response.data.message);
        chargerDemandes();
      }
    } catch (error) {
      const errorInfo = handleAPIError(error);
      alert('Erreur: ' + errorInfo.message);
    }
  };

  const handleViser = async (id, approuve) => {
    const commentaire = prompt('Commentaire (optionnel):');
    
    try {
      const response = await demandesCarburantAPI.viser(id, {
        approuve,
        commentaire
      });
      
      if (response.data.success) {
        alert(response.data.message);
        chargerDemandes();
      }
    } catch (error) {
      const errorInfo = handleAPIError(error);
      alert('Erreur: ' + errorInfo.message);
    }
  };

  const getStatutBadge = (statut) => {
    const styles = {
      'en_attente_logistique': 'badge-warning',
      'approuve_logistique': 'badge-info',
      'en_attente_raf': 'badge-warning',
      'approuve_raf': 'badge-info',
      'valide': 'badge-success',
      'rejete_logistique': 'badge-error',
      'rejete_raf': 'badge-error'
    };
    
    const labels = {
      'en_attente_logistique': 'En attente Logistique',
      'approuve_logistique': 'ApprouvÃ© Logistique',
      'en_attente_raf': 'En attente RAF',
      'approuve_raf': 'ApprouvÃ© RAF',
      'valide': 'ValidÃ©',
      'rejete_logistique': 'RejetÃ© Logistique',
      'rejete_raf': 'RejetÃ© RAF'
    };

    return (
      <span className={`badge ${styles[statut] || 'badge-info'}`}>
        {labels[statut] || statut}
      </span>
    );
  };

  const WorkflowVisuel = ({ demande }) => {
    const etapes = [
      { key: 'demandeur', label: 'Demandeur', statuts: ['all'] },
      { key: 'logistique', label: 'Logistique', statuts: ['en_attente_logistique', 'approuve_logistique', 'rejete_logistique', 'en_attente_raf', 'approuve_raf', 'valide'] },
      { key: 'raf', label: 'RAF', statuts: ['en_attente_raf', 'approuve_raf', 'rejete_raf', 'valide'] }
    ];

    const getEtapeStatut = (etapeKey, demandeStatut) => {
      if (etapeKey === 'demandeur') return 'valide';
      if (etapeKey === 'logistique') {
        if (demandeStatut === 'en_attente_logistique') return 'en_cours';
        if (demandeStatut === 'rejete_logistique') return 'rejete';
        if (['approuve_logistique', 'en_attente_raf', 'approuve_raf', 'valide'].includes(demandeStatut)) return 'valide';
      }
      if (etapeKey === 'raf') {
        if (demandeStatut === 'en_attente_raf') return 'en_cours';
        if (demandeStatut === 'rejete_raf') return 'rejete';
        if (demandeStatut === 'valide') return 'valide';
      }
      return 'attente';
    };

    return (
      <div className="flex items-center justify-center gap-2 py-2">
        {etapes.map((etape, index) => {
          const statutEtape = getEtapeStatut(etape.key, demande.statut);
          
          return (
            <React.Fragment key={etape.key}>
              <div className="flex flex-col items-center gap-1">
                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${
                  statutEtape === 'valide' ? 'bg-green-500' :
                  statutEtape === 'en_cours' ? 'bg-yellow-500' :
                  statutEtape === 'rejete' ? 'bg-red-500' :
                  'bg-gray-300'
                }`}>
                  {statutEtape === 'valide' && <CheckCircle size={18} className="text-white" />}
                  {statutEtape === 'en_cours' && <Clock size={18} className="text-white" />}
                  {statutEtape === 'rejete' && <XCircle size={18} className="text-white" />}
                </div>
                <span className="text-xs text-gray-600">{etape.label}</span>
              </div>
              
              {index < etapes.length - 1 && (
                <div className={`w-12 h-1 ${
                  statutEtape === 'valide' ? 'bg-green-500' : 'bg-gray-300'
                }`}></div>
              )}
            </React.Fragment>
          );
        })}
      </div>
    );
  };

  return (
    <div className="space-y-6">
      {/* En-tÃªte */}
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-3xl font-bold text-gray-900">Demandes de Carburant</h1>
          <p className="text-gray-600 mt-1">Gestion des demandes avec workflow d'approbation</p>
        </div>
        
        {userRole === 'demandeur' && (
          <button
            onClick={() => setShowModal(true)}
            className="btn btn-primary"
          >
            <Plus size={18} />
            Nouvelle Demande
          </button>
        )}
      </div>

      {/* Filtres */}
      <div className="card">
        <div className="flex items-center gap-2 mb-4">
          <Filter size={20} className="text-gray-600" />
          <h3 className="font-semibold">Filtres</h3>
        </div>
        
        <div className="grid grid-cols-3 gap-4">
          <div className="form-group mb-0">
            <label className="form-label">Statut</label>
            <select
              value={filtres.statut}
              onChange={(e) => setFiltres({...filtres, statut: e.target.value})}
              className="form-select"
            >
              <option value="">Tous</option>
              <option value="en_attente_logistique">En attente Logistique</option>
              <option value="en_attente_raf">En attente RAF</option>
              <option value="valide">ValidÃ©</option>
              <option value="rejete_logistique">RejetÃ© Logistique</option>
              <option value="rejete_raf">RejetÃ© RAF</option>
            </select>
          </div>
          
          <div className="form-group mb-0">
            <label className="form-label">Date dÃ©but</label>
            <input
              type="date"
              value={filtres.date_debut}
              onChange={(e) => setFiltres({...filtres, date_debut: e.target.value})}
              className="form-input"
            />
          </div>
          
          <div className="form-group mb-0">
            <label className="form-label">Date fin</label>
            <input
              type="date"
              value={filtres.date_fin}
              onChange={(e) => setFiltres({...filtres, date_fin: e.target.value})}
              className="form-input"
            />
          </div>
        </div>
        
        <div className="mt-3 text-sm text-gray-600">
          <strong>{demandes.length}</strong> demande(s) trouvÃ©e(s)
        </div>
      </div>

      {/* Tableau des demandes */}
      <div className="card">
        {loading ? (
          <div className="text-center py-12">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
            <p className="text-gray-600 mt-4">Chargement...</p>
          </div>
        ) : (
          <div className="table-container">
            <table>
              <thead>
                <tr>
                  <th>NÂ° Demande</th>
                  <th>Date</th>
                  <th>Demandeur</th>
                  <th>Type</th>
                  <th>Objet</th>
                  <th className="text-right">Montant</th>
                  <th>Workflow</th>
                  <th className="text-center">Actions</th>
                </tr>
              </thead>
              <tbody>
                {demandes.length === 0 ? (
                  <tr>
                    <td colSpan="8" className="text-center py-12 text-gray-500">
                      Aucune demande trouvÃ©e
                    </td>
                  </tr>
                ) : (
                  demandes.map((demande) => (
                    <tr key={demande.id}>
                      <td className="font-medium">{demande.numero_demande}</td>
                      <td>{new Date(demande.date_demande).toLocaleDateString('fr-FR')}</td>
                      <td>
                        <div>
                          <div className="font-medium">{demande.demandeur_nom} {demande.demandeur_prenom}</div>
                          <div className="text-xs text-gray-500">{demande.service}</div>
                        </div>
                      </td>
                      <td>
                        <span className={`badge ${demande.type_demande === 'mission' ? 'badge-info' : 'badge-success'}`}>
                          {demande.type_demande}
                        </span>
                      </td>
                      <td className="max-w-xs truncate">{demande.objet}</td>
                      <td className="text-right font-medium">
                        {parseFloat(demande.montant_previsionnel).toLocaleString('fr-FR')} Ar
                      </td>
                      <td>
                        <WorkflowVisuel demande={demande} />
                      </td>
                      <td>
                        <div className="flex items-center justify-center gap-2">
                          {(userRole === 'logistique' && demande.statut === 'en_attente_logistique') && (
                            <>
                              <button
                                onClick={() => handleVerifier(demande.id, true)}
                                className="btn btn-success btn-sm"
                                title="Approuver"
                              >
                                <CheckCircle size={16} />
                              </button>
                              <button
                                onClick={() => handleVerifier(demande.id, false)}
                                className="btn btn-secondary btn-sm"
                                title="Rejeter"
                              >
                                <XCircle size={16} />
                              </button>
                            </>
                          )}
                          
                          {(userRole === 'raf' && demande.statut === 'en_attente_raf') && (
                            <>
                              <button
                                onClick={() => handleViser(demande.id, true)}
                                className="btn btn-success btn-sm"
                                title="Viser"
                              >
                                <CheckCircle size={16} />
                              </button>
                              <button
                                onClick={() => handleViser(demande.id, false)}
                                className="btn btn-secondary btn-sm"
                                title="Rejeter"
                              >
                                <XCircle size={16} />
                              </button>
                            </>
                          )}
                          
                          <button
                            onClick={() => {
                              setSelectedDemande(demande);
                              setShowDetailModal(true);
                            }}
                            className="text-blue-600 hover:text-blue-800"
                            title="Voir dÃ©tails"
                          >
                            <Eye size={18} />
                          </button>
                          
                          {demande.statut === 'valide' && (
                            <button
                              onClick={() => demandesCarburantAPI.downloadPDF(demande.id)}
                              className="text-green-600 hover:text-green-800"
                              title="TÃ©lÃ©charger PDF"
                            >
                              <Download size={18} />
                            </button>
                          )}
                        </div>
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        )}
      </div>

      {/* Modal Nouvelle Demande */}
      {showModal && (
        <div className="modal-overlay" onClick={() => setShowModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">Nouvelle Demande de Carburant</h2>
              <button onClick={() => setShowModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <label className="flex items-center gap-2 p-3 border rounded cursor-pointer hover:bg-gray-50">
                  <input
                    type="radio"
                    value="service"
                    checked={formData.type_demande === 'service'}
                    onChange={(e) => setFormData({...formData, type_demande: e.target.value})}
                  />
                  <span className="font-medium">SERVICE</span>
                </label>
                
                <label className="flex items-center gap-2 p-3 border rounded cursor-pointer hover:bg-gray-50">
                  <input
                    type="radio"
                    value="mission"
                    checked={formData.type_demande === 'mission'}
                    onChange={(e) => setFormData({...formData, type_demande: e.target.value})}
                  />
                  <span className="font-medium">MISSION</span>
                </label>
              </div>

              <div className="form-group">
                <label className="form-label">Objet *</label>
                <textarea
                  value={formData.objet}
                  onChange={(e) => setFormData({...formData, objet: e.target.value})}
                  className="form-textarea"
                  rows="3"
                  required
                />
              </div>

              <div className="form-group">
                <label className="form-label">Montant prÃ©visionnel (en chiffre) *</label>
                <div className="flex gap-2 items-center">
                  <input
                    type="number"
                    value={formData.montant_previsionnel}
                    onChange={(e) => setFormData({...formData, montant_previsionnel: e.target.value})}
                    className="form-input flex-1"
                    required
                  />
                  <span className="text-gray-600">Ar</span>
                </div>
              </div>

              <div className="form-group">
                <label className="form-label">Montant (en lettre) *</label>
                <input
                  type="text"
                  value={formData.montant_en_lettre}
                  onChange={(e) => setFormData({...formData, montant_en_lettre: e.target.value})}
                  className="form-input"
                  placeholder="Ex: Deux cent cinquante mille ariary"
                  required
                />
              </div>

              <div className="border-t pt-4">
                <p className="text-sm text-gray-600 mb-4">
                  Cette demande sera envoyÃ©e pour vÃ©rification Ã  la Logistique, puis au RAF pour validation finale.
                </p>
                <div className="flex gap-3">
                  <button
                    onClick={handleSubmit}
                    className="btn btn-primary flex-1"
                  >
                    <Send size={18} />
                    Soumettre la Demande
                  </button>
                  <button
                    onClick={() => setShowModal(false)}
                    className="btn btn-secondary"
                  >
                    Annuler
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Modal DÃ©tails */}
      {showDetailModal && selectedDemande && (
        <div className="modal-overlay" onClick={() => setShowDetailModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">DÃ©tails de la Demande</h2>
              <button onClick={() => setShowDetailModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-4">
              <div>
                <label className="text-sm font-medium text-gray-600">NÂ° Demande</label>
                <p className="text-lg font-bold">{selectedDemande.numero_demande}</p>
              </div>
              
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium text-gray-600">Type</label>
                  <p className="font-medium">{selectedDemande.type_demande}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">Date</label>
                  <p className="font-medium">{new Date(selectedDemande.date_demande).toLocaleDateString('fr-FR')}</p>
                </div>
              </div>

              <div>
                <label className="text-sm font-medium text-gray-600">Objet</label>
                <p className="mt-1">{selectedDemande.objet}</p>
              </div>

              <div>
                <label className="text-sm font-medium text-gray-600">Montant</label>
                <p className="text-xl font-bold text-blue-600">
                  {parseFloat(selectedDemande.montant_previsionnel).toLocaleString('fr-FR')} Ar
                </p>
                {selectedDemande.montant_en_lettre && (
                  <p className="text-sm text-gray-600 italic">{selectedDemande.montant_en_lettre}</p>
                )}
              </div>

              <div>
                <label className="text-sm font-medium text-gray-600">Statut</label>
                <div className="mt-1">
                  {getStatutBadge(selectedDemande.statut)}
                </div>
              </div>

              {selectedDemande.commentaire_logistique && (
                <div className="border-t pt-3">
                  <label className="text-sm font-medium text-gray-600">Commentaire Logistique</label>
                  <p className="mt-1 text-sm">{selectedDemande.commentaire_logistique}</p>
                </div>
              )}

              {selectedDemande.commentaire_raf && (
                <div className="border-t pt-3">
                  <label className="text-sm font-medium text-gray-600">Commentaire RAF</label>
                  <p className="mt-1 text-sm">{selectedDemande.commentaire_raf}</p>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default DemandesCarburant;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/components/Dashboard.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/components/Dashboard.jsx
import React, { useState, useEffect, useRef } from 'react';
import { 
  Car, Clock, AlertCircle, Fuel, Plus, TrendingUp, 
  Users, FileText, Calendar, BarChart3 
} from 'lucide-react';
import { dashboardAPI, statsAPI, handleAPIError } from '../services/api';

const Dashboard = ({ userRole }) => {
  const [stats, setStats] = useState({
    vehicules_disponibles: 0,
    vehicules_en_mission: 0,
    vehicules_maintenance: 0,
    demandes_en_attente: 0,
    demandes_validees: 0,
    montant_total_mois: 0,
    litres_total_mois: 0,
    consommation_moyenne: 0
  });
  
  const [loading, setLoading] = useState(true);
  const [alertes, setAlertes] = useState([]);
  const [error, setError] = useState(null);
  const hasFetched = useRef(false); // ðŸ”´ EmpÃªche les appels multiples

  useEffect(() => {
    // ðŸ”´ Protection contre les appels multiples
    if (hasFetched.current) return;
    hasFetched.current = true;

    let isMounted = true;
    
    const chargerDonnees = async () => {
      setLoading(true);
      setError(null);
      
      try {
        const statsResponse = await statsAPI.getGlobal();
        
        if (isMounted && statsResponse.data.success && statsResponse.data.global) {
          setStats(statsResponse.data.global);
        }

        try {
          const alertesResponse = await dashboardAPI.alertes();
          if (isMounted && alertesResponse.data.success) {
            setAlertes(alertesResponse.data.data.slice(0, 5));
          }
        } catch (alertError) {
          console.log('Alertes non disponibles');
        }
        
      } catch (error) {
        console.error('Erreur chargement dashboard:', error);
        
        if (isMounted) {
          setError(handleAPIError(error).message);
          setStats({
            vehicules_disponibles: 12,
            vehicules_en_mission: 5,
            vehicules_maintenance: 2,
            demandes_en_attente: 8,
            demandes_validees: 45,
            montant_total_mois: 15000000,
            litres_total_mois: 2850,
            consommation_moyenne: 15.3
          });
        }
      } finally {
        if (isMounted) {
          setLoading(false);
        }
      }
    };

    chargerDonnees();
    
    return () => {
      isMounted = false;
    };
  }, []); // ðŸ”´ DÃ©pendances vides

  const StatCard = ({ title, value, icon: Icon, color, subtitle }) => (
    <div className="card">
      <div className="flex items-center justify-between">
        <div className="flex-1">
          <p className="text-sm text-gray-600 mb-1">{title}</p>
          <p className={`text-3xl font-bold text-${color}-600`}>{value}</p>
          {subtitle && (
            <p className="text-xs text-gray-500 mt-1">{subtitle}</p>
          )}
        </div>
        <div className={`bg-${color}-50 p-4 rounded-lg`}>
          <Icon className={`text-${color}-600`} size={32} />
        </div>
      </div>
    </div>
  );

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[400px]">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Chargement du tableau de bord...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {error && (
        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3">
          <AlertCircle className="text-yellow-600 flex-shrink-0" size={20} />
          <div>
            <p className="font-medium text-yellow-800">Connexion au serveur limitÃ©e</p>
            <p className="text-sm text-yellow-700 mt-1">{error}</p>
          </div>
        </div>
      )}

      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-3xl font-bold text-gray-900">Tableau de Bord</h1>
          <p className="text-gray-600 mt-1">Bienvenue sur votre systÃ¨me de gestion Fleet</p>
        </div>
        <div className="flex items-center gap-2 text-sm text-gray-600">
          <Calendar size={16} />
          <span>{new Date().toLocaleDateString('fr-FR', { 
            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
          })}</span>
        </div>
      </div>

      <div className="grid grid-cols-4 gap-6">
        <StatCard title="VÃ©hicules Disponibles" value={stats.vehicules_disponibles || 0} icon={Car} color="green" subtitle="PrÃªts Ã  partir" />
        <StatCard title="En Mission" value={stats.vehicules_en_mission || 0} icon={Clock} color="blue" subtitle="Actuellement utilisÃ©s" />
        <StatCard title="Demandes en Attente" value={stats.demandes_en_attente || 0} icon={AlertCircle} color="orange" subtitle="Ã€ traiter" />
        <StatCard title="Carburant du Mois" value={stats.montant_total_mois ? `${(stats.montant_total_mois / 1000000).toFixed(1)}M` : '0'} icon={Fuel} color="purple" subtitle={stats.litres_total_mois ? `${Math.round(stats.litres_total_mois)} litres` : '0 litres'} />
      </div>
    </div>
  );
};

export default React.memo(Dashboard); // ðŸ”´ MÃ©moisation du composant

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/src/components/Chauffeurs.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-frontend/src/components/Chauffeurs.jsx
import React, { useState, useEffect } from 'react';
import { Plus, Edit, Eye, UserX, Users, Clock, TrendingUp, AlertCircle, XCircle } from 'lucide-react';
import { chauffeursAPI, handleAPIError } from '../services/api';

const Chauffeurs = ({ userRole }) => {
  const [chauffeurs, setChauffeurs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showModal, setShowModal] = useState(false);
  const [showDetailModal, setShowDetailModal] = useState(false);
  const [selectedChauffeur, setSelectedChauffeur] = useState(null);
  const [mode, setMode] = useState('create');

  const [formData, setFormData] = useState({
    nom: '',
    prenom: '',
    email: '',
    telephone: '',
    numero_permis: '',
    type_permis: 'B',
    date_expiration_permis: ''
  });

  useEffect(() => {
    chargerChauffeurs();
  }, []);

  const chargerChauffeurs = async () => {
    setLoading(true);
    try {
      const response = await chauffeursAPI.getAll();
      if (response.data.success) {
        setChauffeurs(response.data.data);
      }
    } catch (error) {
      console.error('Erreur:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async () => {
    if (!formData.nom || !formData.prenom || !formData.email || !formData.numero_permis || !formData.date_expiration_permis) {
      alert('Veuillez remplir tous les champs obligatoires');
      return;
    }

    try {
      const response = mode === 'create' 
        ? await chauffeursAPI.create(formData)
        : await chauffeursAPI.update(selectedChauffeur.id, formData);

      if (response.data.success) {
        alert(response.data.message);
        if (mode === 'create' && response.data.motDePasseTemporaire) {
          alert(`Mot de passe temporaire: ${response.data.motDePasseTemporaire}\n\nLe chauffeur doit changer ce mot de passe Ã  la premiÃ¨re connexion.`);
        }
        setShowModal(false);
        resetForm();
        chargerChauffeurs();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  const handleEdit = (chauffeur) => {
    setSelectedChauffeur(chauffeur);
    setFormData({
      nom: chauffeur.nom,
      prenom: chauffeur.prenom,
      email: chauffeur.email,
      telephone: chauffeur.telephone,
      numero_permis: chauffeur.numero_permis,
      type_permis: chauffeur.type_permis,
      date_expiration_permis: chauffeur.date_expiration_permis ? 
        new Date(chauffeur.date_expiration_permis).toISOString().split('T')[0] : ''
    });
    setMode('edit');
    setShowModal(true);
  };

  const handleDesactiver = async (id) => {
    if (!confirm('ÃŠtes-vous sÃ»r de vouloir dÃ©sactiver ce chauffeur ?')) return;

    try {
      const response = await chauffeursAPI.desactiver(id);
      if (response.data.success) {
        alert('Chauffeur dÃ©sactivÃ© avec succÃ¨s');
        chargerChauffeurs();
      }
    } catch (error) {
      alert('Erreur: ' + handleAPIError(error).message);
    }
  };

  const resetForm = () => {
    setFormData({
      nom: '',
      prenom: '',
      email: '',
      telephone: '',
      numero_permis: '',
      type_permis: 'B',
      date_expiration_permis: ''
    });
    setMode('create');
    setSelectedChauffeur(null);
  };

  const getStatutBadge = (statut) => {
    const styles = {
      'disponible': 'badge-success',
      'en_mission': 'badge-info',
      'conge': 'badge-warning',
      'indisponible': 'badge-error'
    };

    const labels = {
      'disponible': 'Disponible',
      'en_mission': 'En Mission',
      'conge': 'En CongÃ©',
      'indisponible': 'Indisponible'
    };

    return (
      <span className={`badge ${styles[statut] || 'badge-info'}`}>
        {labels[statut] || statut}
      </span>
    );
  };

  const isPermisExpireSoon = (dateExpiration) => {
    if (!dateExpiration) return false;
    const date = new Date(dateExpiration);
    const today = new Date();
    const diffTime = date - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    return diffDays <= 30 && diffDays >= 0;
  };

  const isPermisExpire = (dateExpiration) => {
    if (!dateExpiration) return false;
    return new Date(dateExpiration) < new Date();
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-3xl font-bold">Gestion des Chauffeurs</h1>
          <p className="text-gray-600 mt-1">Ã‰quipe de {chauffeurs.length} chauffeur(s)</p>
        </div>

        {(userRole === 'logistique' || userRole === 'admin') && (
          <button
            onClick={() => {
              resetForm();
              setShowModal(true);
            }}
            className="btn btn-primary"
          >
            <Plus size={18} />
            Ajouter Chauffeur
          </button>
        )}
      </div>

      {/* Statistiques rapides */}
      <div className="grid grid-cols-4 gap-4">
        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-green-100 p-3 rounded-lg">
              <Users className="text-green-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">Disponibles</p>
              <p className="text-2xl font-bold text-green-600">
                {chauffeurs.filter(c => c.statut === 'disponible').length}
              </p>
            </div>
          </div>
        </div>

        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-blue-100 p-3 rounded-lg">
              <Clock className="text-blue-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">En Mission</p>
              <p className="text-2xl font-bold text-blue-600">
                {chauffeurs.filter(c => c.statut === 'en_mission').length}
              </p>
            </div>
          </div>
        </div>

        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-orange-100 p-3 rounded-lg">
              <AlertCircle className="text-orange-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">Permis Ã  renouveler</p>
              <p className="text-2xl font-bold text-orange-600">
                {chauffeurs.filter(c => isPermisExpireSoon(c.date_expiration_permis) || isPermisExpire(c.date_expiration_permis)).length}
              </p>
            </div>
          </div>
        </div>

        <div className="card">
          <div className="flex items-center gap-3">
            <div className="bg-purple-100 p-3 rounded-lg">
              <TrendingUp className="text-purple-600" size={24} />
            </div>
            <div>
              <p className="text-sm text-gray-600">Total Missions</p>
              <p className="text-2xl font-bold text-purple-600">
                {chauffeurs.reduce((sum, c) => sum + (parseInt(c.nombre_missions) || 0), 0)}
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* Tableau */}
      <div className="card">
        {loading ? (
          <div className="text-center py-12">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
            <p className="text-gray-600 mt-4">Chargement...</p>
          </div>
        ) : (
          <div className="table-container">
            <table>
              <thead>
                <tr>
                  <th>Nom / PrÃ©nom</th>
                  <th>Contact</th>
                  <th>Permis</th>
                  <th>Date Expiration</th>
                  <th>Statut</th>
                  <th className="text-right">Missions</th>
                  <th className="text-right">KM Total</th>
                  <th className="text-center">Actions</th>
                </tr>
              </thead>
              <tbody>
                {chauffeurs.length === 0 ? (
                  <tr>
                    <td colSpan="8" className="text-center py-12 text-gray-500">
                      Aucun chauffeur enregistrÃ©
                    </td>
                  </tr>
                ) : (
                  chauffeurs.map((chauffeur) => {
                    const permisExpire = isPermisExpire(chauffeur.date_expiration_permis);
                    const permisExpireSoon = isPermisExpireSoon(chauffeur.date_expiration_permis);

                    return (
                      <tr key={chauffeur.id} className={permisExpire ? 'bg-red-50' : permisExpireSoon ? 'bg-orange-50' : ''}>
                        <td>
                          <div className="font-medium">{chauffeur.nom} {chauffeur.prenom}</div>
                          {chauffeur.note_evaluation && (
                            <div className="text-xs text-gray-500">
                              â­ {chauffeur.note_evaluation}/5
                            </div>
                          )}
                        </td>
                        <td>
                          <div className="text-sm">{chauffeur.email}</div>
                          {chauffeur.telephone && (
                            <div className="text-xs text-gray-500">{chauffeur.telephone}</div>
                          )}
                        </td>
                        <td>
                          <span className="badge badge-info">
                            {chauffeur.numero_permis} (Type {chauffeur.type_permis})
                          </span>
                        </td>
                        <td>
                          <div className="flex items-center gap-2">
                            {new Date(chauffeur.date_expiration_permis).toLocaleDateString('fr-FR')}
                            {permisExpire && (
                              <AlertCircle size={16} className="text-red-600" title="Permis expirÃ©" />
                            )}
                            {permisExpireSoon && !permisExpire && (
                              <AlertCircle size={16} className="text-orange-600" title="Expire bientÃ´t" />
                            )}
                          </div>
                        </td>
                        <td>{getStatutBadge(chauffeur.statut)}</td>
                        <td className="text-right">{chauffeur.nombre_missions || 0}</td>
                        <td className="text-right">
                          {chauffeur.total_km_parcourus ? 
                            `${Math.round(chauffeur.total_km_parcourus).toLocaleString()} km` : 
                            '-'
                          }
                        </td>
                        <td>
                          <div className="flex items-center justify-center gap-2">
                            <button
                              onClick={() => {
                                setSelectedChauffeur(chauffeur);
                                setShowDetailModal(true);
                              }}
                              className="text-blue-600 hover:text-blue-800"
                              title="Voir dÃ©tails"
                            >
                              <Eye size={18} />
                            </button>

                            {(userRole === 'logistique' || userRole === 'admin') && (
                              <>
                                <button
                                  onClick={() => handleEdit(chauffeur)}
                                  className="text-orange-600 hover:text-orange-800"
                                  title="Modifier"
                                >
                                  <Edit size={18} />
                                </button>

                                {chauffeur.statut !== 'indisponible' && (
                                  <button
                                    onClick={() => handleDesactiver(chauffeur.id)}
                                    className="text-red-600 hover:text-red-800"
                                    title="DÃ©sactiver"
                                  >
                                    <UserX size={18} />
                                  </button>
                                )}
                              </>
                            )}
                          </div>
                        </td>
                      </tr>
                    );
                  })
                )}
              </tbody>
            </table>
          </div>
        )}
      </div>

      {/* Modal Formulaire */}
      {showModal && (
        <div className="modal-overlay" onClick={() => setShowModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">
                {mode === 'create' ? 'Nouveau Chauffeur' : 'Modifier Chauffeur'}
              </h2>
              <button onClick={() => setShowModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div className="form-group">
                  <label className="form-label">Nom *</label>
                  <input
                    type="text"
                    value={formData.nom}
                    onChange={(e) => setFormData({...formData, nom: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>

                <div className="form-group">
                  <label className="form-label">PrÃ©nom *</label>
                  <input
                    type="text"
                    value={formData.prenom}
                    onChange={(e) => setFormData({...formData, prenom: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="form-group">
                  <label className="form-label">Email *</label>
                  <input
                    type="email"
                    value={formData.email}
                    onChange={(e) => setFormData({...formData, email: e.target.value})}
                    className="form-input"
                    required
                    disabled={mode === 'edit'}
                  />
                </div>

                <div className="form-group">
                  <label className="form-label">TÃ©lÃ©phone</label>
                  <input
                    type="tel"
                    value={formData.telephone}
                    onChange={(e) => setFormData({...formData, telephone: e.target.value})}
                    className="form-input"
                    placeholder="+261 XX XX XXX XX"
                  />
                </div>
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div className="form-group">
                  <label className="form-label">NumÃ©ro Permis *</label>
                  <input
                    type="text"
                    value={formData.numero_permis}
                    onChange={(e) => setFormData({...formData, numero_permis: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>

                <div className="form-group">
                  <label className="form-label">Type Permis *</label>
                  <select
                    value={formData.type_permis}
                    onChange={(e) => setFormData({...formData, type_permis: e.target.value})}
                    className="form-select"
                    required
                  >
                    <option value="A">A (Moto)</option>
                    <option value="B">B (Voiture)</option>
                    <option value="C">C (Poids lourds)</option>
                    <option value="D">D (Transport public)</option>
                    <option value="E">E (Remorque)</option>
                  </select>
                </div>

                <div className="form-group">
                  <label className="form-label">Date Expiration *</label>
                  <input
                    type="date"
                    value={formData.date_expiration_permis}
                    onChange={(e) => setFormData({...formData, date_expiration_permis: e.target.value})}
                    className="form-input"
                    required
                  />
                </div>
              </div>

              {mode === 'create' && (
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                  <p className="text-sm text-blue-800">
                    â„¹ï¸ Un compte utilisateur sera crÃ©Ã© automatiquement avec un mot de passe temporaire. 
                    Le chauffeur devra le changer Ã  la premiÃ¨re connexion.
                  </p>
                </div>
              )}

              <div className="flex gap-3 pt-4 border-t">
                <button onClick={handleSubmit} className="btn btn-primary flex-1">
                  {mode === 'create' ? 'CrÃ©er' : 'Modifier'}
                </button>
                <button onClick={() => setShowModal(false)} className="btn btn-secondary">
                  Annuler
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Modal DÃ©tails */}
      {showDetailModal && selectedChauffeur && (
        <div className="modal-overlay" onClick={() => setShowDetailModal(false)}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2 className="modal-title">DÃ©tails du Chauffeur</h2>
              <button onClick={() => setShowDetailModal(false)}>
                <XCircle size={24} className="text-gray-500" />
              </button>
            </div>

            <div className="space-y-4">
              <div>
                <label className="text-sm font-medium text-gray-600">Nom Complet</label>
                <p className="text-xl font-bold">{selectedChauffeur.nom} {selectedChauffeur.prenom}</p>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium text-gray-600">Email</label>
                  <p>{selectedChauffeur.email}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">TÃ©lÃ©phone</label>
                  <p>{selectedChauffeur.telephone || '-'}</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium text-gray-600">NumÃ©ro Permis</label>
                  <p className="font-medium">{selectedChauffeur.numero_permis}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">Type Permis</label>
                  <p className="font-medium">{selectedChauffeur.type_permis}</p>
                </div>
              </div>

              <div>
                <label className="text-sm font-medium text-gray-600">Date Expiration Permis</label>
                <p className={`font-medium ${
                  isPermisExpire(selectedChauffeur.date_expiration_permis) ? 'text-red-600' :
                  isPermisExpireSoon(selectedChauffeur.date_expiration_permis) ? 'text-orange-600' :
                  'text-gray-900'
                }`}>
                  {new Date(selectedChauffeur.date_expiration_permis).toLocaleDateString('fr-FR')}
                  {isPermisExpire(selectedChauffeur.date_expiration_permis) && ' - ExpirÃ© âš ï¸'}
                  {isPermisExpireSoon(selectedChauffeur.date_expiration_permis) && !isPermisExpire(selectedChauffeur.date_expiration_permis) && ' - Expire bientÃ´t âš ï¸'}
                </p>
              </div>

              <div>
                <label className="text-sm font-medium text-gray-600">Statut</label>
                <div className="mt-1">{getStatutBadge(selectedChauffeur.statut)}</div>
              </div>

              <div className="grid grid-cols-2 gap-4 pt-4 border-t">
                <div>
                  <label className="text-sm font-medium text-gray-600">Nombre de Missions</label>
                  <p className="text-2xl font-bold text-blue-600">{selectedChauffeur.nombre_missions || 0}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-gray-600">KM Total Parcourus</label>
                  <p className="text-2xl font-bold text-purple-600">
                    {selectedChauffeur.total_km_parcourus ? 
                      `${Math.round(selectedChauffeur.total_km_parcourus).toLocaleString()} km` : 
                      '0 km'
                    }
                  </p>
                </div>
              </div>

              {selectedChauffeur.note_evaluation && (
                <div>
                  <label className="text-sm font-medium text-gray-600">Ã‰valuation</label>
                  <p className="text-xl font-bold text-yellow-600">
                    â­ {selectedChauffeur.note_evaluation}/5
                  </p>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default Chauffeurs;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/package.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "fleet-management-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.13.2",
    "lucide-react": "^0.556.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^7.10.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "vite": "^7.2.4"
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/package-lock.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "fleet-management-frontend",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "fleet-management-frontend",
      "version": "0.0.0",
      "dependencies": {
        "axios": "^1.13.2",
        "lucide-react": "^0.556.0",
        "react": "^19.2.0",
        "react-dom": "^19.2.0",
        "react-router-dom": "^7.10.1"
      },
      "devDependencies": {
        "@eslint/js": "^9.39.1",
        "@types/react": "^19.2.5",
        "@types/react-dom": "^19.2.3",
        "@vitejs/plugin-react": "^5.1.1",
        "eslint": "^9.39.1",
        "eslint-plugin-react-hooks": "^7.0.1",
        "eslint-plugin-react-refresh": "^0.4.24",
        "globals": "^16.5.0",
        "vite": "^7.2.4"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "dev": true,
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.12.tgz",
      "integrity": "sha512-Hhmwd6CInZ3dwpuGTF8fJG6yoWmsToE+vYgD4nytZVxcu1ulHpUQRAB1UJ8+N1Am3Mz4+xOByoQoSZf4D+CpkA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.12.tgz",
      "integrity": "sha512-VJ+sKvNA/GE7Ccacc9Cha7bpS8nyzVv0jdVgwNDaR4gDMC/2TTRc33Ip8qrNYUcpkOHUT5OZ0bUcNNVZQ9RLlg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.12.tgz",
      "integrity": "sha512-6AAmLG7zwD1Z159jCKPvAxZd4y/VTO0VkprYy+3N2FtJ8+BQWFXU+OxARIwA46c5tdD9SsKGZ/1ocqBS/gAKHg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.12.tgz",
      "integrity": "sha512-5jbb+2hhDHx5phYR2By8GTWEzn6I9UqR11Kwf22iKbNpYrsmRB18aX/9ivc5cabcUiAT/wM+YIZ6SG9QO6a8kg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.12.tgz",
      "integrity": "sha512-N3zl+lxHCifgIlcMUP5016ESkeQjLj/959RxxNYIthIg+CQHInujFuXeWbWMgnTo4cp5XVHqFPmpyu9J65C1Yg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.12.tgz",
      "integrity": "sha512-HQ9ka4Kx21qHXwtlTUVbKJOAnmG1ipXhdWTmNXiPzPfWKpXqASVcWdnf2bnL73wgjNrFXAa3yYvBSd9pzfEIpA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.12.tgz",
      "integrity": "sha512-gA0Bx759+7Jve03K1S0vkOu5Lg/85dou3EseOGUes8flVOGxbhDDh/iZaoek11Y8mtyKPGF3vP8XhnkDEAmzeg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.12.tgz",
      "integrity": "sha512-TGbO26Yw2xsHzxtbVFGEXBFH0FRAP7gtcPE7P5yP7wGy7cXK2oO7RyOhL5NLiqTlBh47XhmIUXuGciXEqYFfBQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.12.tgz",
      "integrity": "sha512-lPDGyC1JPDou8kGcywY0YILzWlhhnRjdof3UlcoqYmS9El818LLfJJc3PXXgZHrHCAKs/Z2SeZtDJr5MrkxtOw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.12.tgz",
      "integrity": "sha512-8bwX7a8FghIgrupcxb4aUmYDLp8pX06rGh5HqDT7bB+8Rdells6mHvrFHHW2JAOPZUbnjUpKTLg6ECyzvas2AQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.12.tgz",
      "integrity": "sha512-0y9KrdVnbMM2/vG8KfU0byhUN+EFCny9+8g202gYqSSVMonbsCfLjUO+rCci7pM0WBEtz+oK/PIwHkzxkyharA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.12.tgz",
      "integrity": "sha512-h///Lr5a9rib/v1GGqXVGzjL4TMvVTv+s1DPoxQdz7l/AYv6LDSxdIwzxkrPW438oUXiDtwM10o9PmwS/6Z0Ng==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.12.tgz",
      "integrity": "sha512-iyRrM1Pzy9GFMDLsXn1iHUm18nhKnNMWscjmp4+hpafcZjrr2WbT//d20xaGljXDBYHqRcl8HnxbX6uaA/eGVw==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.12.tgz",
      "integrity": "sha512-9meM/lRXxMi5PSUqEXRCtVjEZBGwB7P/D4yT8UG/mwIdze2aV4Vo6U5gD3+RsoHXKkHCfSxZKzmDssVlRj1QQA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.12.tgz",
      "integrity": "sha512-Zr7KR4hgKUpWAwb1f3o5ygT04MzqVrGEGXGLnj15YQDJErYu/BGg+wmFlIDOdJp0PmB0lLvxFIOXZgFRrdjR0w==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.12.tgz",
      "integrity": "sha512-MsKncOcgTNvdtiISc/jZs/Zf8d0cl/t3gYWX8J9ubBnVOwlk65UIEEvgBORTiljloIWnBzLs4qhzPkJcitIzIg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.12.tgz",
      "integrity": "sha512-uqZMTLr/zR/ed4jIGnwSLkaHmPjOjJvnm6TVVitAa08SLS9Z0VM8wIRx7gWbJB5/J54YuIMInDquWyYvQLZkgw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-xXwcTq4GhRM7J9A8Gv5boanHhRa/Q9KLVmcyXHCTaM4wKfIpWkdXiMog/KsnxzJ0A1+nD+zoecuzqPmCRyBGjg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.12.tgz",
      "integrity": "sha512-Ld5pTlzPy3YwGec4OuHh1aCVCRvOXdH8DgRjfDy/oumVovmuSzWfnSJg+VtakB9Cm0gxNO9BzWkj6mtO1FMXkQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-fF96T6KsBo/pkQI950FARU9apGNTSlZGsv1jZBAlcLL1MLjLNIWPBkj5NlSz8aAzYKg+eNqknrUJ24QBybeR5A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.12.tgz",
      "integrity": "sha512-MZyXUkZHjQxUvzK7rN8DJ3SRmrVrke8ZyRusHlP+kuwqTcfWLyqMOE3sScPPyeIXN/mDJIfGXvcMqCgYKekoQw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.12.tgz",
      "integrity": "sha512-rm0YWsqUSRrjncSXGA7Zv78Nbnw4XL6/dzr20cyrQf7ZmRcsovpcRBdhD43Nuk3y7XIoW2OxMVvwuRvk9XdASg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.12.tgz",
      "integrity": "sha512-3wGSCDyuTHQUzt0nV7bocDy72r2lI33QL3gkDNGkod22EsYl04sMf0qLb8luNKTOmgF/eDEDP5BFNwoBKH441w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.12.tgz",
      "integrity": "sha512-rMmLrur64A7+DKlnSuwqUdRKyd3UE7oPJZmnljqEptesKM8wx9J8gx5u0+9Pq0fQQW8vqeKebwNXdfOyP+8Bsg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.12.tgz",
      "integrity": "sha512-HkqnmmBoCbCwxUKKNPBixiWDGCpQGVsrQfJoVGYLPT41XWF8lHuE5N6WhVia2n4o5QK5M4tYr21827fNhi4byQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.12.tgz",
      "integrity": "sha512-alJC0uCZpTFrSL0CCDjcgleBXPnCrEAhTBILpeAp7M/OFgoqtAetfBzX0xM00MUsVVPpVjlPuMbREqnZCXaTnA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.3.tgz",
      "integrity": "sha512-Kr+LPIUVKz2qkx1HAMH8q1q6azbqBAsXJUxBl/ODDuVPX45Z9DfwB8tPjTi6nNZ8BuM3nbJxC5zCAg5elnBUTQ==",
      "dev": true,
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.1",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.1.tgz",
      "integrity": "sha512-S26Stp4zCy88tH94QbBv3XCuzRQiZ9yXofEILmglYTh/Ug/a9/umqvgFtYBAo3Lp0nsI/5/qH1CCrbdK3AP1Tw==",
      "dev": true,
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.47",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.47.tgz",
      "integrity": "sha512-8QagwMH3kNCuzD8EWL8R2YPW5e4OrHNSAHRFDdmFqEwEaD/KcNKjVoumo+gP2vW5eKB2UPbM6vTYiGZX0ixLnw==",
      "dev": true
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.53.3.tgz",
      "integrity": "sha512-mRSi+4cBjrRLoaal2PnqH82Wqyb+d3HsPUN/W+WslCXsZsyHa9ZeQQX/pQsZaVIWDkPcpV6jJ+3KLbTbgnwv8w==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.53.3.tgz",
      "integrity": "sha512-CbDGaMpdE9sh7sCmTrTUyllhrg65t6SwhjlMJsLr+J8YjFuPmCEjbBSx4Z/e4SmDyH3aB5hGaJUP2ltV/vcs4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.53.3.tgz",
      "integrity": "sha512-Nr7SlQeqIBpOV6BHHGZgYBuSdanCXuw09hon14MGOLGmXAFYjx1wNvquVPmpZnl0tLjg25dEdr4IQ6GgyToCUA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.53.3.tgz",
      "integrity": "sha512-DZ8N4CSNfl965CmPktJ8oBnfYr3F8dTTNBQkRlffnUarJ2ohudQD17sZBa097J8xhQ26AwhHJ5mvUyQW8ddTsQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.53.3.tgz",
      "integrity": "sha512-yMTrCrK92aGyi7GuDNtGn2sNW+Gdb4vErx4t3Gv/Tr+1zRb8ax4z8GWVRfr3Jw8zJWvpGHNpss3vVlbF58DZ4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.53.3.tgz",
      "integrity": "sha512-lMfF8X7QhdQzseM6XaX0vbno2m3hlyZFhwcndRMw8fbAGUGL3WFMBdK0hbUBIUYcEcMhVLr1SIamDeuLBnXS+Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.53.3.tgz",
      "integrity": "sha512-k9oD15soC/Ln6d2Wv/JOFPzZXIAIFLp6B+i14KhxAfnq76ajt0EhYc5YPeX6W1xJkAdItcVT+JhKl1QZh44/qw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.53.3.tgz",
      "integrity": "sha512-vTNlKq+N6CK/8UktsrFuc+/7NlEYVxgaEgRXVUVK258Z5ymho29skzW1sutgYjqNnquGwVUObAaxae8rZ6YMhg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.53.3.tgz",
      "integrity": "sha512-RGrFLWgMhSxRs/EWJMIFM1O5Mzuz3Xy3/mnxJp/5cVhZ2XoCAxJnmNsEyeMJtpK+wu0FJFWz+QF4mjCA7AUQ3w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.53.3.tgz",
      "integrity": "sha512-kASyvfBEWYPEwe0Qv4nfu6pNkITLTb32p4yTgzFCocHnJLAHs+9LjUu9ONIhvfT/5lv4YS5muBHyuV84epBo/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.53.3.tgz",
      "integrity": "sha512-JiuKcp2teLJwQ7vkJ95EwESWkNRFJD7TQgYmCnrPtlu50b4XvT5MOmurWNrCj3IFdyjBQ5p9vnrX4JM6I8OE7g==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.53.3.tgz",
      "integrity": "sha512-EoGSa8nd6d3T7zLuqdojxC20oBfNT8nexBbB/rkxgKj5T5vhpAQKKnD+h3UkoMuTyXkP5jTjK/ccNRmQrPNDuw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.53.3.tgz",
      "integrity": "sha512-4s+Wped2IHXHPnAEbIB0YWBv7SDohqxobiiPA1FIWZpX+w9o2i4LezzH/NkFUl8LRci/8udci6cLq+jJQlh+0g==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.53.3.tgz",
      "integrity": "sha512-68k2g7+0vs2u9CxDt5ktXTngsxOQkSEV/xBbwlqYcUrAVh6P9EgMZvFsnHy4SEiUl46Xf0IObWVbMvPrr2gw8A==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.53.3.tgz",
      "integrity": "sha512-VYsFMpULAz87ZW6BVYw3I6sWesGpsP9OPcyKe8ofdg9LHxSbRMd7zrVrr5xi/3kMZtpWL/wC+UIJWJYVX5uTKg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.53.3.tgz",
      "integrity": "sha512-3EhFi1FU6YL8HTUJZ51imGJWEX//ajQPfqWLI3BQq4TlvHy4X0MOr5q3D2Zof/ka0d5FNdPwZXm3Yyib/UEd+w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.53.3.tgz",
      "integrity": "sha512-eoROhjcc6HbZCJr+tvVT8X4fW3/5g/WkGvvmwz/88sDtSJzO7r/blvoBDgISDiCjDRZmHpwud7h+6Q9JxFwq1Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.53.3.tgz",
      "integrity": "sha512-OueLAWgrNSPGAdUdIjSWXw+u/02BRTcnfw9PN41D2vq/JSEPnJnVuBgw18VkN8wcd4fjUs+jFHVM4t9+kBSNLw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.53.3.tgz",
      "integrity": "sha512-GOFuKpsxR/whszbF/bzydebLiXIHSgsEUp6M0JI8dWvi+fFa1TD6YQa4aSZHtpmh2/uAlj/Dy+nmby3TJ3pkTw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.53.3.tgz",
      "integrity": "sha512-iah+THLcBJdpfZ1TstDFbKNznlzoxa8fmnFYK4V67HvmuNYkVdAywJSoteUszvBQ9/HqN2+9AZghbajMsFT+oA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.53.3.tgz",
      "integrity": "sha512-J9QDiOIZlZLdcot5NXEepDkstocktoVjkaKUtqzgzpt2yWjGlbYiKyp05rWwk4nypbYUNoFAztEgixoLaSETkg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.53.3.tgz",
      "integrity": "sha512-UhTd8u31dXadv0MopwGgNOBpUVROFKWVQgAg5N1ESyCz8AuBcMqm4AuTjrwgQKGDfoFuz02EuMRHQIw/frmYKQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true
    },
    "node_modules/@types/react": {
      "version": "19.2.7",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-19.2.7.tgz",
      "integrity": "sha512-MWtvHrGZLFttgeEj28VXHxpmwYbor/ATPYbBfSFZEIRK0ecCFLl2Qo55z52Hss+UV9CRN7trSeq1zbgx7YDWWg==",
      "dev": true,
      "dependencies": {
        "csstype": "^3.2.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "19.2.3",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.2.3.tgz",
      "integrity": "sha512-jp2L/eY6fn+KgVVQAOqYItbF0VY/YApe5Mz2F0aykSO8gx31bYCZyvSeYxCHKvzHG5eZjc+zyaS5BrBWya2+kQ==",
      "dev": true,
      "peerDependencies": {
        "@types/react": "^19.2.0"
      }
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-5.1.1.tgz",
      "integrity": "sha512-WQfkSw0QbQ5aJ2CHYw23ZGkqnRwqKHD/KYsMeTkZzPT4Jcf0DcBxBtwMJxnu6E7oxw5+JC6ZAiePgh28uJ1HBA==",
      "dev": true,
      "dependencies": {
        "@babel/core": "^7.28.5",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.47",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.18.0"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q=="
    },
    "node_modules/axios": {
      "version": "1.13.2",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.2.tgz",
      "integrity": "sha512-VPk9ebNqPcy5lRGuSlKx752IlDatOjT9paPlm8A7yOuW2Fbvp4X3JznJtT4f0GzGLLiWE9W8onz51SqLYwzGaA==",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.9.3",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.3.tgz",
      "integrity": "sha512-8QdH6czo+G7uBsNo0GiUfouPN1lRzKdJTGnKXwe12gkFbnnOUaUKGN55dMkfy+mnxmvjwl9zcI4VncczcVXDhA==",
      "dev": true,
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.1",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "dependencies": {
        "baseline-browser-mapping": "^2.9.0",
        "caniuse-lite": "^1.0.30001759",
        "electron-to-chromium": "^1.5.263",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.2.0"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001759",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001759.tgz",
      "integrity": "sha512-Pzfx9fOKoKvevQf8oCXoyNRQ5QyxJj+3O0Rqx2V5oxT61KGx8+n6hV/IUyJeifUci2clnmmKVpvtiqRzgiWjSw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ]
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true
    },
    "node_modules/cookie": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-1.1.1.tgz",
      "integrity": "sha512-ei8Aos7ja0weRpFzJnEA9UHJ/7XQmqglbRwnf2ATjcB9Wq874VKH9kfjjirM6UhU2/E5fFYadylyhFldcqSidQ==",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csstype": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
      "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
      "dev": true
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.266",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.266.tgz",
      "integrity": "sha512-kgWEglXvkEfMH7rxP5OSZZwnaDWT7J9EoZCujhnpLbfi0bbNtRkgdX2E3gt0Uer11c61qCYktB3hwkAS325sJg==",
      "dev": true
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.12.tgz",
      "integrity": "sha512-bbPBYYrtZbkt6Os6FiTLCTFxvq4tt3JKall1vRwshA3fdVztsLAatFaZobhkBC8/BrPetoa0oksYoKXoG4ryJg==",
      "dev": true,
      "hasInstallScript": true,
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.12",
        "@esbuild/android-arm": "0.25.12",
        "@esbuild/android-arm64": "0.25.12",
        "@esbuild/android-x64": "0.25.12",
        "@esbuild/darwin-arm64": "0.25.12",
        "@esbuild/darwin-x64": "0.25.12",
        "@esbuild/freebsd-arm64": "0.25.12",
        "@esbuild/freebsd-x64": "0.25.12",
        "@esbuild/linux-arm": "0.25.12",
        "@esbuild/linux-arm64": "0.25.12",
        "@esbuild/linux-ia32": "0.25.12",
        "@esbuild/linux-loong64": "0.25.12",
        "@esbuild/linux-mips64el": "0.25.12",
        "@esbuild/linux-ppc64": "0.25.12",
        "@esbuild/linux-riscv64": "0.25.12",
        "@esbuild/linux-s390x": "0.25.12",
        "@esbuild/linux-x64": "0.25.12",
        "@esbuild/netbsd-arm64": "0.25.12",
        "@esbuild/netbsd-x64": "0.25.12",
        "@esbuild/openbsd-arm64": "0.25.12",
        "@esbuild/openbsd-x64": "0.25.12",
        "@esbuild/openharmony-arm64": "0.25.12",
        "@esbuild/sunos-x64": "0.25.12",
        "@esbuild/win32-arm64": "0.25.12",
        "@esbuild/win32-ia32": "0.25.12",
        "@esbuild/win32-x64": "0.25.12"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.1.tgz",
      "integrity": "sha512-BhHmn2yNOFA9H9JmmIVKJmd288g9hrVRDkdoIgRCRuSySRUHH7r/DI6aAXW9T1WwUuY3DFgrcaqB+deURBLR5g==",
      "dev": true,
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.1",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-7.0.1.tgz",
      "integrity": "sha512-O0d0m04evaNzEPoSW+59Mezf8Qt0InfgGIBJnpC0h3NH/WjUAR7BIKUfysC6todmtiZ/A0oUVS8Gce0WhBrHsA==",
      "dev": true,
      "dependencies": {
        "@babel/core": "^7.24.4",
        "@babel/parser": "^7.24.4",
        "hermes-parser": "^0.25.1",
        "zod": "^3.25.0 || ^4.0.0",
        "zod-validation-error": "^3.5.0 || ^4.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.24.tgz",
      "integrity": "sha512-nLHIW7TEq3aLrEYWpVaJ1dRgFR+wLDPN8e8FpYAql/bMV2oBEfC37K0gLEGgv9fy66juNShSMV8OkTqzltcG/w==",
      "dev": true,
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true
    },
    "node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "16.5.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.5.0.tgz",
      "integrity": "sha512-c/c15i26VrJ4IRt5Z89DnIzCGDn9EcebibhAOjw5ibqEHsE1wLUgkPn9RDmNcUKyU87GeaL633nyJ+pplFR2ZQ==",
      "dev": true,
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hermes-estree": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-estree/-/hermes-estree-0.25.1.tgz",
      "integrity": "sha512-0wUoCcLp+5Ev5pDW2OriHC2MJCbwLwuRx+gAqMTOkGKJJiBCLjtrvy4PWUGn6MIVefecRpzoOZ/UV6iGdOr+Cw==",
      "dev": true
    },
    "node_modules/hermes-parser": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-parser/-/hermes-parser-0.25.1.tgz",
      "integrity": "sha512-6pEjquH3rqaI6cYAXYPcz9MS4rY6R4ngRgrgfDshRptUZIc3lw0MCIJIGDj9++mfySOuPTHB4nrSW99BCvOPIA==",
      "dev": true,
      "dependencies": {
        "hermes-estree": "0.25.1"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "dev": true
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "dev": true,
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lucide-react": {
      "version": "0.556.0",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.556.0.tgz",
      "integrity": "sha512-iOb8dRk7kLaYBZhR2VlV1CeJGxChBgUthpSP8wom9jfj79qovgG6qcSdiy6vkoREKPnbUYzJsCn4o4PtG3Iy+A==",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true
    },
    "node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg=="
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/react": {
      "version": "19.2.1",
      "resolved": "https://registry.npmjs.org/react/-/react-19.2.1.tgz",
      "integrity": "sha512-DGrYcCWK7tvYMnWh79yrPHt+vdx9tY+1gPZa7nJQtO/p8bLTDaHp4dzwEhQB7pZ4Xe3ok4XKuEPrVuc+wlpkmw==",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "19.2.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.2.1.tgz",
      "integrity": "sha512-ibrK8llX2a4eOskq1mXKu/TGZj9qzomO+sNfO98M6d9zIPOEhlBkMkBUBLd1vgS0gQsLDBzA+8jJBVXDnfHmJg==",
      "dependencies": {
        "scheduler": "^0.27.0"
      },
      "peerDependencies": {
        "react": "^19.2.1"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.18.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.18.0.tgz",
      "integrity": "sha512-QgT5//D3jfjJb6Gsjxv0Slpj23ip+HtOpnNgnb2S5zU3CB26G/IDPGoy4RJB42wzFE46DRsstbW6tKHoKbhAxw==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-router": {
      "version": "7.10.1",
      "resolved": "https://registry.npmjs.org/react-router/-/react-router-7.10.1.tgz",
      "integrity": "sha512-gHL89dRa3kwlUYtRQ+m8NmxGI6CgqN+k4XyGjwcFoQwwCWF6xXpOCUlDovkXClS0d0XJN/5q7kc5W3kiFEd0Yw==",
      "dependencies": {
        "cookie": "^1.0.1",
        "set-cookie-parser": "^2.6.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      },
      "peerDependenciesMeta": {
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/react-router-dom": {
      "version": "7.10.1",
      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-7.10.1.tgz",
      "integrity": "sha512-JNBANI6ChGVjA5bwsUIwJk7LHKmqB4JYnYfzFwyp2t12Izva11elds2jx7Yfoup2zssedntwU0oZ5DEmk5Sdaw==",
      "dependencies": {
        "react-router": "7.10.1"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/rollup": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.53.3.tgz",
      "integrity": "sha512-w8GmOxZfBmKknvdXU1sdM9NHcoQejwF/4mNgj2JuEEdRaHwwF12K7e9eXn1nLZ07ad+du76mkVsyeb2rKGllsA==",
      "dev": true,
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.53.3",
        "@rollup/rollup-android-arm64": "4.53.3",
        "@rollup/rollup-darwin-arm64": "4.53.3",
        "@rollup/rollup-darwin-x64": "4.53.3",
        "@rollup/rollup-freebsd-arm64": "4.53.3",
        "@rollup/rollup-freebsd-x64": "4.53.3",
        "@rollup/rollup-linux-arm-gnueabihf": "4.53.3",
        "@rollup/rollup-linux-arm-musleabihf": "4.53.3",
        "@rollup/rollup-linux-arm64-gnu": "4.53.3",
        "@rollup/rollup-linux-arm64-musl": "4.53.3",
        "@rollup/rollup-linux-loong64-gnu": "4.53.3",
        "@rollup/rollup-linux-ppc64-gnu": "4.53.3",
        "@rollup/rollup-linux-riscv64-gnu": "4.53.3",
        "@rollup/rollup-linux-riscv64-musl": "4.53.3",
        "@rollup/rollup-linux-s390x-gnu": "4.53.3",
        "@rollup/rollup-linux-x64-gnu": "4.53.3",
        "@rollup/rollup-linux-x64-musl": "4.53.3",
        "@rollup/rollup-openharmony-arm64": "4.53.3",
        "@rollup/rollup-win32-arm64-msvc": "4.53.3",
        "@rollup/rollup-win32-ia32-msvc": "4.53.3",
        "@rollup/rollup-win32-x64-gnu": "4.53.3",
        "@rollup/rollup-win32-x64-msvc": "4.53.3",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.27.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.27.0.tgz",
      "integrity": "sha512-eNv+WrVbKu1f3vbYJT/xtiF5syA5HPIMtf9IgY/nKg0sWqzAUEvqY/xm7OcZc/qafLx/iO9FgOmeSAp4v5ti/Q=="
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/set-cookie-parser": {
      "version": "2.7.2",
      "resolved": "https://registry.npmjs.org/set-cookie-parser/-/set-cookie-parser-2.7.2.tgz",
      "integrity": "sha512-oeM1lpU/UvhTxw+g3cIfxXHyJRc/uidd3yK1P242gzHds0udQBYzs3y8j4gCCW+ZJ7ad0yctld8RYO+bdurlvw=="
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.2.tgz",
      "integrity": "sha512-E85pfNzMQ9jpKkA7+TJAi4TJN+tBCuWh5rUcS/sv6cFi+1q9LYDwDI5dpUL0u/73EElyQ8d3TEaeW4sPedBqYA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/vite": {
      "version": "7.2.6",
      "resolved": "https://registry.npmjs.org/vite/-/vite-7.2.6.tgz",
      "integrity": "sha512-tI2l/nFHC5rLh7+5+o7QjKjSR04ivXDF4jcgV0f/bTQ+OJiITy5S6gaynVsEM+7RqzufMnVbIon6Sr5x1SDYaQ==",
      "dev": true,
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rollup": "^4.43.0",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "lightningcss": "^1.21.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.1.13",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.1.13.tgz",
      "integrity": "sha512-AvvthqfqrAhNH9dnfmrfKzX5upOdjUVJYFqNSlkmGf64gRaTzlPwz99IHYnVs28qYAybvAlBV+H7pn0saFY4Ig==",
      "dev": true,
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    },
    "node_modules/zod-validation-error": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/zod-validation-error/-/zod-validation-error-4.0.2.tgz",
      "integrity": "sha512-Q6/nZLe6jxuU80qb/4uJ4t5v2VEZ44lzQjPDhYJNztRQ4wyWc6VF3D3Kb/fAuPetZQnhS3hnajCf9CsWesghLQ==",
      "dev": true,
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "zod": "^3.25.0 || ^4.0.0"
      }
    }
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/index.html â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fleet-management-frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-frontend/eslint.config.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ database/views.sql â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- ============================================
-- VUES POUR REQUÃŠTES COMPLEXES
-- FLEET MANAGEMENT SYSTEM
-- ============================================

-- ============================================
-- VUE: Vue complÃ¨te des vÃ©hicules
-- ============================================
DROP VIEW IF EXISTS vue_vehicules_complet CASCADE;
CREATE VIEW vue_vehicules_complet AS
SELECT 
    v.id,
    v.immatriculation,
    v.marque,
    v.modele,
    v.annee,
    v.couleur,
    v.type_carburant,
    v.capacite_reservoir,
    v.kilometrage,
    v.statut,
    v.nombre_places,
    v.actif,
    
    -- Chauffeur actuel
    c.id AS chauffeur_id,
    CONCAT(u.prenom, ' ', u.nom) AS chauffeur_nom,
    c.numero_permis,
    c.telephone AS chauffeur_telephone,
    
    -- Statistiques carburant
    COUNT(DISTINCT sc.id) AS nombre_ravitaillements,
    COALESCE(SUM(sc.quantite), 0) AS total_carburant,
    COALESCE(AVG(sc.consommation_theorique), 0) AS consommation_moyenne,
    
    -- DerniÃ¨re rÃ©vision
    v.date_derniere_revision,
    v.prochaine_revision_km,
    v.prochaine_revision_date,
    
    -- Alertes
    CASE 
        WHEN v.prochaine_revision_date < CURRENT_DATE THEN 'REVISION_URGENTE'
        WHEN v.prochaine_revision_date < CURRENT_DATE + INTERVAL '30 days' THEN 'REVISION_BIENTOT'
        WHEN v.assurance_expiration < CURRENT_DATE THEN 'ASSURANCE_EXPIREE'
        WHEN v.assurance_expiration < CURRENT_DATE + INTERVAL '30 days' THEN 'ASSURANCE_EXPIRE_BIENTOT'
        ELSE 'OK'
    END AS alerte_maintenance

FROM vehicules v
LEFT JOIN affectations a ON v.id = a.vehicule_id AND a.actif = true
LEFT JOIN chauffeurs c ON a.chauffeur_id = c.id
LEFT JOIN utilisateurs u ON c.utilisateur_id = u.id
LEFT JOIN suivis_carburant sc ON v.id = sc.vehicule_id
GROUP BY v.id, c.id, u.id;

-- ============================================
-- VUE: Demandes carburant enrichies
-- ============================================
DROP VIEW IF EXISTS vue_demandes_carburant CASCADE;
CREATE VIEW vue_demandes_carburant AS
SELECT 
    dc.id,
    dc.numero_demande,
    dc.statut,
    dc.date_demande,
    dc.date_approbation,
    
    -- Informations demandeur
    dc.demandeur_id,
    CONCAT(u_dem.prenom, ' ', u_dem.nom) AS demandeur_nom,
    u_dem.email AS demandeur_email,
    
    -- Informations vÃ©hicule
    dc.vehicule_id,
    v.immatriculation,
    v.marque,
    v.modele,
    v.type_carburant,
    
    -- Informations chauffeur
    dc.chauffeur_id,
    CONCAT(u_ch.prenom, ' ', u_ch.nom) AS chauffeur_nom,
    ch.numero_permis,
    
    -- QuantitÃ©s
    dc.quantite_demandee,
    dc.quantite_approuvee,
    dc.kilometrage_actuel,
    
    -- Approbation
    dc.approuveur_id,
    CONCAT(u_app.prenom, ' ', u_app.nom) AS approuveur_nom,
    dc.commentaire_approbation,
    
    -- Motif
    dc.motif,
    dc.bon_commande,
    dc.date_livraison,
    
    -- Calculs
    EXTRACT(DAY FROM (COALESCE(dc.date_approbation, CURRENT_TIMESTAMP) - dc.date_demande)) AS jours_traitement

FROM demandes_carburant dc
JOIN utilisateurs u_dem ON dc.demandeur_id = u_dem.id
JOIN vehicules v ON dc.vehicule_id = v.id
LEFT JOIN chauffeurs ch ON dc.chauffeur_id = ch.id
LEFT JOIN utilisateurs u_ch ON ch.utilisateur_id = u_ch.id
LEFT JOIN utilisateurs u_app ON dc.approuveur_id = u_app.id;

-- ============================================
-- VUE: Demandes voiture enrichies
-- ============================================
DROP VIEW IF EXISTS vue_demandes_voiture CASCADE;
CREATE VIEW vue_demandes_voiture AS
SELECT 
    dv.id,
    dv.numero_demande,
    dv.statut,
    dv.date_demande,
    dv.date_approbation,
    
    -- Informations demandeur
    dv.demandeur_id,
    CONCAT(u_dem.prenom, ' ', u_dem.nom) AS demandeur_nom,
    u_dem.email AS demandeur_email,
    s.nom AS service_nom,
    
    -- Informations mission
    dv.destination,
    dv.motif,
    dv.date_debut,
    dv.date_fin,
    dv.nombre_passagers,
    dv.besoins_specifiques,
    
    -- Informations vÃ©hicule
    dv.vehicule_id,
    v.immatriculation,
    v.marque,
    v.modele,
    
    -- Informations chauffeur
    dv.chauffeur_id,
    CONCAT(u_ch.prenom, ' ', u_ch.nom) AS chauffeur_nom,
    ch.telephone AS chauffeur_telephone,
    
    -- KilomÃ©trage et carburant
    dv.kilometrage_depart,
    dv.kilometrage_retour,
    dv.carburant_utilise,
    CASE 
        WHEN dv.kilometrage_retour IS NOT NULL AND dv.kilometrage_depart IS NOT NULL 
        THEN dv.kilometrage_retour - dv.kilometrage_depart
        ELSE NULL
    END AS distance_parcourue,
    
    -- Dates rÃ©elles
    dv.date_depart_reel,
    dv.date_retour_reel,
    
    -- Approbation
    dv.approuveur_id,
    CONCAT(u_app.prenom, ' ', u_app.nom) AS approuveur_nom,
    dv.commentaire_approbation,
    
    -- DurÃ©e
    EXTRACT(DAY FROM (dv.date_fin - dv.date_debut)) AS duree_jours,
    EXTRACT(HOUR FROM (dv.date_fin - dv.date_debut)) AS duree_heures

FROM demandes_voiture dv
JOIN utilisateurs u_dem ON dv.demandeur_id = u_dem.id
LEFT JOIN services s ON dv.service_id = s.id
LEFT JOIN vehicules v ON dv.vehicule_id = v.id
LEFT JOIN chauffeurs ch ON dv.chauffeur_id = ch.id
LEFT JOIN utilisateurs u_ch ON ch.utilisateur_id = u_ch.id
LEFT JOIN utilisateurs u_app ON dv.approuveur_id = u_app.id;

-- ============================================
-- VUE: Statistiques vÃ©hicules
-- ============================================
DROP VIEW IF EXISTS vue_stats_vehicules CASCADE;
CREATE VIEW vue_stats_vehicules AS
SELECT 
    v.id AS vehicule_id,
    v.immatriculation,
    v.marque,
    v.modele,
    
    -- Missions
    COUNT(DISTINCT dv.id) AS nombre_missions,
    COUNT(DISTINCT CASE WHEN dv.statut = 'terminee' THEN dv.id END) AS missions_terminees,
    COALESCE(SUM(CASE WHEN dv.statut = 'terminee' 
        THEN dv.kilometrage_retour - dv.kilometrage_depart END), 0) AS total_km_parcourus,
    
    -- Carburant
    COUNT(DISTINCT sc.id) AS nombre_ravitaillements,
    COALESCE(SUM(sc.quantite), 0) AS total_carburant_litres,
    COALESCE(SUM(sc.montant_total), 0) AS total_cout_carburant,
    COALESCE(AVG(sc.consommation_theorique), 0) AS consommation_moyenne,
    
    -- Entretiens
    COUNT(DISTINCT e.id) AS nombre_entretiens,
    COALESCE(SUM(e.cout), 0) AS total_cout_entretiens,
    MAX(e.date_fin) AS dernier_entretien,
    
    -- DisponibilitÃ© (derniers 30 jours)
    COALESCE(SUM(EXTRACT(EPOCH FROM (
        LEAST(dv.date_fin, CURRENT_TIMESTAMP) - 
        GREATEST(dv.date_debut, CURRENT_TIMESTAMP - INTERVAL '30 days')
    )) / 3600), 0) AS heures_utilisation_30j,
    
    -- CoÃ»t total
    COALESCE(SUM(sc.montant_total), 0) + COALESCE(SUM(e.cout), 0) AS cout_total

FROM vehicules v
LEFT JOIN demandes_voiture dv ON v.id = dv.vehicule_id
LEFT JOIN suivis_carburant sc ON v.id = sc.vehicule_id
LEFT JOIN entretiens e ON v.id = e.vehicule_id
GROUP BY v.id, v.immatriculation, v.marque, v.modele;

-- ============================================
-- VUE: Statistiques chauffeurs
-- ============================================
DROP VIEW IF EXISTS vue_stats_chauffeurs CASCADE;
CREATE VIEW vue_stats_chauffeurs AS
SELECT 
    c.id AS chauffeur_id,
    CONCAT(u.prenom, ' ', u.nom) AS nom_complet,
    c.numero_permis,
    c.disponible,
    c.note_moyenne,
    
    -- Missions
    c.nombre_missions,
    COUNT(DISTINCT CASE WHEN dv.statut = 'en_cours' THEN dv.id END) AS missions_en_cours,
    COUNT(DISTINCT CASE WHEN dv.statut = 'terminee' THEN dv.id END) AS missions_terminees,
    
    -- KilomÃ©trage
    COALESCE(SUM(CASE WHEN dv.statut = 'terminee' 
        THEN dv.kilometrage_retour - dv.kilometrage_depart END), 0) AS km_parcourus,
    
    -- Carburant consommÃ©
    COALESCE(SUM(dv.carburant_utilise), 0) AS carburant_total_litres,
    
    -- Dates
    MAX(dv.date_retour_reel) AS derniere_mission,
    MIN(dv.date_depart_reel) AS premiere_mission,
    
    -- VÃ©hicule actuel
    v.immatriculation AS vehicule_actuel,
    v.marque AS vehicule_marque,
    v.modele AS vehicule_modele

FROM chauffeurs c
JOIN utilisateurs u ON c.utilisateur_id = u.id
LEFT JOIN demandes_voiture dv ON c.id = dv.chauffeur_id
LEFT JOIN affectations a ON c.id = a.chauffeur_id AND a.actif = true
LEFT JOIN vehicules v ON a.vehicule_id = v.id
GROUP BY c.id, u.id, v.id;

-- ============================================
-- VUE: Consommation carburant mensuelle
-- ============================================
DROP VIEW IF EXISTS vue_consommation_mensuelle CASCADE;
CREATE VIEW vue_consommation_mensuelle AS
SELECT 
    TO_CHAR(sc.date_ravitaillement, 'YYYY-MM') AS mois,
    EXTRACT(YEAR FROM sc.date_ravitaillement) AS annee,
    EXTRACT(MONTH FROM sc.date_ravitaillement) AS numero_mois,
    
    v.id AS vehicule_id,
    v.immatriculation,
    v.marque,
    v.modele,
    v.type_carburant,
    
    COUNT(*) AS nombre_ravitaillements,
    SUM(sc.quantite) AS quantite_totale,
    AVG(sc.prix_unitaire) AS prix_moyen,
    SUM(sc.montant_total) AS montant_total,
    AVG(sc.consommation_theorique) AS consommation_moyenne

FROM suivis_carburant sc
JOIN vehicules v ON sc.vehicule_id = v.id
WHERE sc.date_ravitaillement >= CURRENT_DATE - INTERVAL '12 months'
GROUP BY 
    TO_CHAR(sc.date_ravitaillement, 'YYYY-MM'),
    EXTRACT(YEAR FROM sc.date_ravitaillement),
    EXTRACT(MONTH FROM sc.date_ravitaillement),
    v.id, v.immatriculation, v.marque, v.modele, v.type_carburant
ORDER BY annee DESC, numero_mois DESC;

-- ============================================
-- VUE: Alertes et notifications
-- ============================================
DROP VIEW IF EXISTS vue_alertes CASCADE;
CREATE VIEW vue_alertes AS
SELECT 
    'REVISION_URGENTE' AS type_alerte,
    'RÃ©vision urgente requise' AS message,
    v.id AS vehicule_id,
    v.immatriculation,
    v.prochaine_revision_date AS date_limite,
    'critique' AS priorite
FROM vehicules v
WHERE v.prochaine_revision_date < CURRENT_DATE
  AND v.actif = true

UNION ALL

SELECT 
    'REVISION_PROCHE' AS type_alerte,
    'RÃ©vision Ã  planifier' AS message,
    v.id AS vehicule_id,
    v.immatriculation,
    v.prochaine_revision_date AS date_limite,
    'haute' AS priorite
FROM vehicules v
WHERE v.prochaine_revision_date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '30 days'
  AND v.actif = true

UNION ALL

SELECT 
    'ASSURANCE_EXPIREE' AS type_alerte,
    'Assurance expirÃ©e' AS message,
    v.id AS vehicule_id,
    v.immatriculation,
    v.assurance_expiration AS date_limite,
    'critique' AS priorite
FROM vehicules v
WHERE v.assurance_expiration < CURRENT_DATE
  AND v.actif = true

UNION ALL

SELECT 
    'ASSURANCE_EXPIRE_BIENTOT' AS type_alerte,
    'Assurance expire bientÃ´t' AS message,
    v.id AS vehicule_id,
    v.immatriculation,
    v.assurance_expiration AS date_limite,
    'haute' AS priorite
FROM vehicules v
WHERE v.assurance_expiration BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '30 days'
  AND v.actif = true

UNION ALL

SELECT 
    'PERMIS_EXPIRE' AS type_alerte,
    'Permis de conduire expirÃ©' AS message,
    c.id AS chauffeur_id,
    CONCAT(u.prenom, ' ', u.nom) AS nom,
    c.date_expiration_permis AS date_limite,
    'critique' AS priorite
FROM chauffeurs c
JOIN utilisateurs u ON c.utilisateur_id = u.id
WHERE c.date_expiration_permis < CURRENT_DATE

UNION ALL

SELECT 
    'PERMIS_EXPIRE_BIENTOT' AS type_alerte,
    'Permis expire bientÃ´t' AS message,
    c.id AS chauffeur_id,
    CONCAT(u.prenom, ' ', u.nom) AS nom,
    c.date_expiration_permis AS date_limite,
    'moyenne' AS priorite
FROM chauffeurs c
JOIN utilisateurs u ON c.utilisateur_id = u.id
WHERE c.date_expiration_permis BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '60 days';

-- ============================================
-- VUE: Dashboard statistiques globales
-- ============================================
DROP VIEW IF EXISTS vue_dashboard_stats CASCADE;
CREATE VIEW vue_dashboard_stats AS
SELECT 
    -- VÃ©hicules
    (SELECT COUNT(*) FROM vehicules WHERE actif = true) AS total_vehicules,
    (SELECT COUNT(*) FROM vehicules WHERE statut = 'disponible') AS vehicules_disponibles,
    (SELECT COUNT(*) FROM vehicules WHERE statut = 'en_mission') AS vehicules_en_mission,
    (SELECT COUNT(*) FROM vehicules WHERE statut = 'en_entretien') AS vehicules_en_entretien,
    
    -- Chauffeurs
    (SELECT COUNT(*) FROM chauffeurs WHERE disponible = true) AS chauffeurs_disponibles,
    (SELECT COUNT(*) FROM chauffeurs) AS total_chauffeurs,
    
    -- Demandes en attente
    (SELECT COUNT(*) FROM demandes_carburant WHERE statut = 'en_attente') AS demandes_carburant_attente,
    (SELECT COUNT(*) FROM demandes_voiture WHERE statut = 'en_attente') AS demandes_voiture_attente,
    
    -- Missions du mois
    (SELECT COUNT(*) FROM demandes_voiture 
     WHERE EXTRACT(MONTH FROM date_debut) = EXTRACT(MONTH FROM CURRENT_DATE)
     AND EXTRACT(YEAR FROM date_debut) = EXTRACT(YEAR FROM CURRENT_DATE)) AS missions_mois,
    
    -- Carburant du mois
    (SELECT COALESCE(SUM(quantite), 0) FROM suivis_carburant
     WHERE EXTRACT(MONTH FROM date_ravitaillement) = EXTRACT(MONTH FROM CURRENT_DATE)
     AND EXTRACT(YEAR FROM date_ravitaillement) = EXTRACT(YEAR FROM CURRENT_DATE)) AS carburant_mois_litres,
    
    (SELECT COALESCE(SUM(montant_total), 0) FROM suivis_carburant
     WHERE EXTRACT(MONTH FROM date_ravitaillement) = EXTRACT(MONTH FROM CURRENT_DATE)
     AND EXTRACT(YEAR FROM date_ravitaillement) = EXTRACT(YEAR FROM CURRENT_DATE)) AS carburant_mois_cout,
    
    -- Alertes
    (SELECT COUNT(*) FROM vue_alertes WHERE priorite = 'critique') AS alertes_critiques,
    (SELECT COUNT(*) FROM vue_alertes WHERE priorite = 'haute') AS alertes_importantes;

-- ============================================
-- FIN DES VUES
-- ============================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ database/triggers.sql â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- ============================================
-- TRIGGERS ET FONCTIONS AUTOMATIQUES
-- FLEET MANAGEMENT SYSTEM
-- ============================================

-- ============================================
-- FONCTION: GÃ©nÃ©rer numÃ©ro de demande unique
-- ============================================
CREATE OR REPLACE FUNCTION generer_numero_demande(prefix VARCHAR)
RETURNS VARCHAR AS $$
DECLARE
    nouveau_numero VARCHAR;
    compteur INTEGER;
    annee VARCHAR;
BEGIN
    annee := TO_CHAR(CURRENT_DATE, 'YYYY');
    
    SELECT COUNT(*) + 1 INTO compteur
    FROM (
        SELECT numero_demande FROM demandes_carburant WHERE numero_demande LIKE prefix || annee || '%'
        UNION ALL
        SELECT numero_demande FROM demandes_voiture WHERE numero_demande LIKE prefix || annee || '%'
    ) AS demandes;
    
    nouveau_numero := prefix || annee || LPAD(compteur::TEXT, 6, '0');
    RETURN nouveau_numero;
END;
$$ LANGUAGE plpgsql;

-- ============================================
-- TRIGGER: Auto-gÃ©nÃ©ration numÃ©ro demande carburant
-- ============================================
CREATE OR REPLACE FUNCTION trigger_numero_demande_carburant()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.numero_demande IS NULL OR NEW.numero_demande = '' THEN
        NEW.numero_demande := generer_numero_demande('CARB-');
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS auto_numero_demande_carburant ON demandes_carburant;
CREATE TRIGGER auto_numero_demande_carburant
    BEFORE INSERT ON demandes_carburant
    FOR EACH ROW
    EXECUTE FUNCTION trigger_numero_demande_carburant();

-- ============================================
-- TRIGGER: Auto-gÃ©nÃ©ration numÃ©ro demande voiture
-- ============================================
CREATE OR REPLACE FUNCTION trigger_numero_demande_voiture()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.numero_demande IS NULL OR NEW.numero_demande = '' THEN
        NEW.numero_demande := generer_numero_demande('VEH-');
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS auto_numero_demande_voiture ON demandes_voiture;
CREATE TRIGGER auto_numero_demande_voiture
    BEFORE INSERT ON demandes_voiture
    FOR EACH ROW
    EXECUTE FUNCTION trigger_numero_demande_voiture();

-- ============================================
-- TRIGGER: Mise Ã  jour statut vÃ©hicule lors d'affectation
-- ============================================
CREATE OR REPLACE FUNCTION trigger_statut_vehicule_affectation()
RETURNS TRIGGER AS $$
BEGIN
    IF TG_OP = 'INSERT' OR (TG_OP = 'UPDATE' AND NEW.actif = true) THEN
        UPDATE vehicules 
        SET statut = 'en_mission'
        WHERE id = NEW.vehicule_id AND statut = 'disponible';
    ELSIF TG_OP = 'DELETE' OR (TG_OP = 'UPDATE' AND NEW.actif = false) THEN
        UPDATE vehicules 
        SET statut = 'disponible'
        WHERE id = COALESCE(NEW.vehicule_id, OLD.vehicule_id);
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS update_statut_vehicule_affectation ON affectations;
CREATE TRIGGER update_statut_vehicule_affectation
    AFTER INSERT OR UPDATE OR DELETE ON affectations
    FOR EACH ROW
    EXECUTE FUNCTION trigger_statut_vehicule_affectation();

-- ============================================
-- TRIGGER: Calcul consommation carburant
-- ============================================
CREATE OR REPLACE FUNCTION trigger_calcul_consommation()
RETURNS TRIGGER AS $$
DECLARE
    km_precedent INTEGER;
    distance INTEGER;
BEGIN
    IF NEW.kilometrage IS NOT NULL THEN
        SELECT kilometrage INTO km_precedent
        FROM suivis_carburant
        WHERE vehicule_id = NEW.vehicule_id 
        AND id < NEW.id
        AND kilometrage IS NOT NULL
        ORDER BY date_ravitaillement DESC
        LIMIT 1;
        
        IF km_precedent IS NOT NULL AND km_precedent > 0 THEN
            distance := NEW.kilometrage - km_precedent;
            IF distance > 0 AND NEW.quantite > 0 THEN
                NEW.consommation_theorique := (NEW.quantite / distance) * 100;
            END IF;
        END IF;
    END IF;
    
    IF NEW.prix_unitaire IS NOT NULL AND NEW.quantite IS NOT NULL THEN
        NEW.montant_total := NEW.prix_unitaire * NEW.quantite;
    END IF;
    
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS calcul_consommation ON suivis_carburant;
CREATE TRIGGER calcul_consommation
    BEFORE INSERT OR UPDATE ON suivis_carburant
    FOR EACH ROW
    EXECUTE FUNCTION trigger_calcul_consommation();

-- ============================================
-- TRIGGER: Mise Ã  jour kilomÃ©trage vÃ©hicule
-- ============================================
CREATE OR REPLACE FUNCTION trigger_update_kilometrage_vehicule()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.kilometrage IS NOT NULL THEN
        UPDATE vehicules 
        SET kilometrage = GREATEST(kilometrage, NEW.kilometrage)
        WHERE id = NEW.vehicule_id;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS update_kilometrage_vehicule ON suivis_carburant;
CREATE TRIGGER update_kilometrage_vehicule
    AFTER INSERT OR UPDATE ON suivis_carburant
    FOR EACH ROW
    EXECUTE FUNCTION trigger_update_kilometrage_vehicule();

-- ============================================
-- TRIGGER: Validation permis chauffeur
-- ============================================
CREATE OR REPLACE FUNCTION trigger_validation_permis()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.date_expiration_permis < CURRENT_DATE THEN
        NEW.disponible := false;
        RAISE NOTICE 'Permis expirÃ© pour le chauffeur %', NEW.id;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS validation_permis_chauffeur ON chauffeurs;
CREATE TRIGGER validation_permis_chauffeur
    BEFORE INSERT OR UPDATE ON chauffeurs
    FOR EACH ROW
    EXECUTE FUNCTION trigger_validation_permis();

-- ============================================
-- TRIGGER: Historique changements entretien
-- ============================================
CREATE OR REPLACE FUNCTION trigger_log_entretien()
RETURNS TRIGGER AS $$
BEGIN
    IF TG_OP = 'INSERT' THEN
        INSERT INTO historique_entretiens (entretien_id, action, details)
        VALUES (NEW.id, 'CREATION', 'Entretien crÃ©Ã©: ' || NEW.type_entretien);
    ELSIF TG_OP = 'UPDATE' THEN
        IF OLD.statut != NEW.statut THEN
            INSERT INTO historique_entretiens (entretien_id, action, details)
            VALUES (NEW.id, 'CHANGEMENT_STATUT', 
                    'Statut modifiÃ©: ' || OLD.statut || ' â†’ ' || NEW.statut);
        END IF;
        
        IF OLD.date_fin IS NULL AND NEW.date_fin IS NOT NULL THEN
            INSERT INTO historique_entretiens (entretien_id, action, details)
            VALUES (NEW.id, 'CLOTURE', 'Entretien terminÃ© le ' || NEW.date_fin);
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS log_historique_entretien ON entretiens;
CREATE TRIGGER log_historique_entretien
    AFTER INSERT OR UPDATE ON entretiens
    FOR EACH ROW
    EXECUTE FUNCTION trigger_log_entretien();

-- ============================================
-- TRIGGER: Mise Ã  jour derniÃ¨re connexion
-- ============================================
CREATE OR REPLACE FUNCTION trigger_update_derniere_connexion()
RETURNS TRIGGER AS $$
BEGIN
    NEW.derniere_connexion := CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS update_derniere_connexion ON utilisateurs;
CREATE TRIGGER update_derniere_connexion
    BEFORE UPDATE ON utilisateurs
    FOR EACH ROW
    WHEN (OLD.derniere_connexion IS DISTINCT FROM NEW.derniere_connexion)
    EXECUTE FUNCTION trigger_update_derniere_connexion();

-- ============================================
-- TRIGGER: Validation dates demande voiture
-- ============================================
CREATE OR REPLACE FUNCTION trigger_validation_demande_voiture()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.date_debut < CURRENT_TIMESTAMP - INTERVAL '1 day' THEN
        RAISE EXCEPTION 'La date de dÃ©but ne peut pas Ãªtre dans le passÃ© (plus de 24h)';
    END IF;
    
    IF NEW.date_fin <= NEW.date_debut THEN
        RAISE EXCEPTION 'La date de fin doit Ãªtre postÃ©rieure Ã  la date de dÃ©but';
    END IF;
    
    IF NEW.vehicule_id IS NOT NULL THEN
        IF EXISTS (
            SELECT 1 FROM demandes_voiture
            WHERE vehicule_id = NEW.vehicule_id
            AND statut IN ('approuvee', 'en_cours')
            AND id != COALESCE(NEW.id, 0)
            AND (
                (NEW.date_debut BETWEEN date_debut AND date_fin)
                OR (NEW.date_fin BETWEEN date_debut AND date_fin)
                OR (date_debut BETWEEN NEW.date_debut AND NEW.date_fin)
            )
        ) THEN
            RAISE EXCEPTION 'Le vÃ©hicule est dÃ©jÃ  rÃ©servÃ© pour cette pÃ©riode';
        END IF;
    END IF;
    
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS validation_demande_voiture ON demandes_voiture;
CREATE TRIGGER validation_demande_voiture
    BEFORE INSERT OR UPDATE ON demandes_voiture
    FOR EACH ROW
    EXECUTE FUNCTION trigger_validation_demande_voiture();

-- ============================================
-- TRIGGER: Auto-crÃ©ation suivi carburant
-- ============================================
CREATE OR REPLACE FUNCTION trigger_auto_suivi_carburant()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.statut = 'approuvee' AND OLD.statut != 'approuvee' THEN
        INSERT INTO suivis_carburant (
            vehicule_id,
            demande_carburant_id,
            quantite,
            type_carburant,
            kilometrage,
            date_ravitaillement,
            bon_commande
        ) VALUES (
            NEW.vehicule_id,
            NEW.id,
            COALESCE(NEW.quantite_approuvee, NEW.quantite_demandee),
            NEW.type_carburant,
            NEW.kilometrage_actuel,
            CURRENT_TIMESTAMP,
            NEW.bon_commande
        );
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS auto_suivi_carburant ON demandes_carburant;
CREATE TRIGGER auto_suivi_carburant
    AFTER UPDATE ON demandes_carburant
    FOR EACH ROW
    EXECUTE FUNCTION trigger_auto_suivi_carburant();

-- ============================================
-- TRIGGER: Mise Ã  jour compteur missions chauffeur
-- ============================================
CREATE OR REPLACE FUNCTION trigger_update_missions_chauffeur()
RETURNS TRIGGER AS $$
BEGIN
    IF TG_OP = 'INSERT' OR (TG_OP = 'UPDATE' AND NEW.statut = 'terminee' AND OLD.statut != 'terminee') THEN
        UPDATE chauffeurs
        SET nombre_missions = nombre_missions + 1
        WHERE id = NEW.chauffeur_id;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS update_missions_chauffeur ON demandes_voiture;
CREATE TRIGGER update_missions_chauffeur
    AFTER INSERT OR UPDATE ON demandes_voiture
    FOR EACH ROW
    WHEN (NEW.chauffeur_id IS NOT NULL AND NEW.statut = 'terminee')
    EXECUTE FUNCTION trigger_update_missions_chauffeur();

-- ============================================
-- FONCTION: VÃ©rifier disponibilitÃ© vÃ©hicule
-- ============================================
CREATE OR REPLACE FUNCTION verifier_disponibilite_vehicule(
    p_vehicule_id INTEGER,
    p_date_debut TIMESTAMP,
    p_date_fin TIMESTAMP,
    p_demande_id INTEGER DEFAULT NULL
)
RETURNS BOOLEAN AS $$
BEGIN
    RETURN NOT EXISTS (
        SELECT 1 FROM demandes_voiture
        WHERE vehicule_id = p_vehicule_id
        AND statut IN ('approuvee', 'en_cours')
        AND id != COALESCE(p_demande_id, 0)
        AND (
            (p_date_debut BETWEEN date_debut AND date_fin)
            OR (p_date_fin BETWEEN date_debut AND date_fin)
            OR (date_debut BETWEEN p_date_debut AND p_date_fin)
        )
    );
END;
$$ LANGUAGE plpgsql;

-- ============================================
-- FONCTION: Calculer consommation moyenne
-- ============================================
CREATE OR REPLACE FUNCTION calculer_consommation_moyenne(p_vehicule_id INTEGER)
RETURNS DECIMAL AS $$
DECLARE
    consommation_moy DECIMAL;
BEGIN
    SELECT AVG(consommation_theorique) INTO consommation_moy
    FROM suivis_carburant
    WHERE vehicule_id = p_vehicule_id
    AND consommation_theorique IS NOT NULL
    AND consommation_theorique > 0
    AND consommation_theorique < 50;
    
    RETURN COALESCE(consommation_moy, 0);
END;
$$ LANGUAGE plpgsql;

-- ============================================
-- VÃ‰RIFICATION DES TRIGGERS
-- ============================================

-- Afficher tous les triggers crÃ©Ã©s
DO $$
BEGIN
    RAISE NOTICE '==========================================';
    RAISE NOTICE 'TRIGGERS CRÃ‰Ã‰S';
    RAISE NOTICE '==========================================';
END $$;

SELECT 
    trigger_name,
    event_object_table as table_name,
    action_timing || ' ' || string_agg(event_manipulation, ' OR ') as trigger_event
FROM information_schema.triggers
WHERE trigger_schema = 'public'
GROUP BY trigger_name, event_object_table, action_timing
ORDER BY event_object_table, trigger_name;

-- ============================================
-- FIN DES TRIGGERS
-- ============================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ database/shema.sql â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- ============================================
-- SCHÃ‰MA COMPLET BASE DE DONNÃ‰ES FLEET MANAGEMENT
-- ============================================

-- Suppression des tables existantes (ordre inversÃ© des dÃ©pendances)
DROP TABLE IF EXISTS historique_entretiens CASCADE;
DROP TABLE IF EXISTS entretiens CASCADE;
DROP TABLE IF EXISTS suivis_carburant CASCADE;
DROP TABLE IF EXISTS demandes_voiture CASCADE;
DROP TABLE IF EXISTS demandes_carburant CASCADE;
DROP TABLE IF EXISTS affectations CASCADE;
DROP TABLE IF EXISTS vehicules CASCADE;
DROP TABLE IF EXISTS chauffeurs CASCADE;
DROP TABLE IF EXISTS services CASCADE;
DROP TABLE IF EXISTS utilisateurs CASCADE;

-- Suppression des types ENUM existants
DROP TYPE IF EXISTS statut_demande CASCADE;
DROP TYPE IF EXISTS statut_vehicule CASCADE;
DROP TYPE IF EXISTS role_utilisateur CASCADE;
DROP TYPE IF EXISTS type_carburant CASCADE;
DROP TYPE IF EXISTS type_entretien CASCADE;

-- ============================================
-- CRÃ‰ATION DES TYPES ENUM
-- ============================================

CREATE TYPE role_utilisateur AS ENUM ('admin', 'gestionnaire', 'chauffeur', 'demandeur');
CREATE TYPE statut_demande AS ENUM ('en_attente', 'approuvee', 'rejetee', 'en_cours', 'terminee');
CREATE TYPE statut_vehicule AS ENUM ('disponible', 'en_mission', 'en_entretien', 'hors_service');
CREATE TYPE type_carburant AS ENUM ('essence', 'diesel', 'hybride', 'electrique');
CREATE TYPE type_entretien AS ENUM ('revision', 'reparation', 'vidange', 'pneus', 'autre');

-- ============================================
-- TABLE: utilisateurs
-- ============================================
CREATE TABLE utilisateurs (
    id SERIAL PRIMARY KEY,
    nom VARCHAR(100) NOT NULL,
    prenom VARCHAR(100) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    mot_de_passe VARCHAR(255) NOT NULL,
    role role_utilisateur DEFAULT 'demandeur',
    telephone VARCHAR(20),
    actif BOOLEAN DEFAULT true,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    derniere_connexion TIMESTAMP,
    
    CONSTRAINT email_format CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$')
);

-- Index pour optimiser les requÃªtes
CREATE INDEX idx_utilisateurs_email ON utilisateurs(email);
CREATE INDEX idx_utilisateurs_role ON utilisateurs(role);

-- ============================================
-- TABLE: services
-- ============================================
CREATE TABLE services (
    id SERIAL PRIMARY KEY,
    nom VARCHAR(100) NOT NULL UNIQUE,
    description TEXT,
    responsable_id INTEGER REFERENCES utilisateurs(id) ON DELETE SET NULL,
    actif BOOLEAN DEFAULT true,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_services_nom ON services(nom);

-- ============================================
-- TABLE: chauffeurs
-- ============================================
CREATE TABLE chauffeurs (
    id SERIAL PRIMARY KEY,
    utilisateur_id INTEGER UNIQUE REFERENCES utilisateurs(id) ON DELETE CASCADE,
    numero_permis VARCHAR(50) UNIQUE NOT NULL,
    date_obtention_permis DATE NOT NULL,
    date_expiration_permis DATE NOT NULL,
    categories_permis VARCHAR(20)[] DEFAULT ARRAY['B'],
    telephone VARCHAR(20),
    adresse TEXT,
    disponible BOOLEAN DEFAULT true,
    photo_url VARCHAR(500),
    note_moyenne DECIMAL(3,2) DEFAULT 5.00,
    nombre_missions INTEGER DEFAULT 0,
    date_embauche DATE,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT permis_valide CHECK (date_expiration_permis > date_obtention_permis),
    CONSTRAINT note_valide CHECK (note_moyenne >= 0 AND note_moyenne <= 5)
);

CREATE INDEX idx_chauffeurs_disponible ON chauffeurs(disponible);
CREATE INDEX idx_chauffeurs_permis ON chauffeurs(numero_permis);

-- ============================================
-- TABLE: vehicules
-- ============================================
CREATE TABLE vehicules (
    id SERIAL PRIMARY KEY,
    immatriculation VARCHAR(20) UNIQUE NOT NULL,
    marque VARCHAR(100) NOT NULL,
    modele VARCHAR(100) NOT NULL,
    annee INTEGER NOT NULL,
    couleur VARCHAR(50),
    numero_chassis VARCHAR(100) UNIQUE,
    type_carburant type_carburant NOT NULL,
    capacite_reservoir DECIMAL(6,2),
    kilometrage INTEGER DEFAULT 0,
    statut statut_vehicule DEFAULT 'disponible',
    date_acquisition DATE,
    date_derniere_revision DATE,
    prochaine_revision_km INTEGER,
    prochaine_revision_date DATE,
    assurance_numero VARCHAR(100),
    assurance_expiration DATE,
    photo_url VARCHAR(500),
    nombre_places INTEGER DEFAULT 5,
    actif BOOLEAN DEFAULT true,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT annee_valide CHECK (annee >= 1900 AND annee <= EXTRACT(YEAR FROM CURRENT_DATE) + 1),
    CONSTRAINT kilometrage_positif CHECK (kilometrage >= 0),
    CONSTRAINT capacite_positive CHECK (capacite_reservoir > 0),
    CONSTRAINT places_valide CHECK (nombre_places > 0 AND nombre_places <= 50)
);

CREATE INDEX idx_vehicules_immatriculation ON vehicules(immatriculation);
CREATE INDEX idx_vehicules_statut ON vehicules(statut);
CREATE INDEX idx_vehicules_type_carburant ON vehicules(type_carburant);

-- ============================================
-- TABLE: affectations
-- ============================================
CREATE TABLE affectations (
    id SERIAL PRIMARY KEY,
    vehicule_id INTEGER NOT NULL REFERENCES vehicules(id) ON DELETE CASCADE,
    chauffeur_id INTEGER NOT NULL REFERENCES chauffeurs(id) ON DELETE CASCADE,
    date_debut DATE NOT NULL DEFAULT CURRENT_DATE,
    date_fin DATE,
    actif BOOLEAN DEFAULT true,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT dates_coherentes CHECK (date_fin IS NULL OR date_fin >= date_debut),
    CONSTRAINT affectation_unique UNIQUE (vehicule_id, chauffeur_id, date_debut)
);

CREATE INDEX idx_affectations_vehicule ON affectations(vehicule_id);
CREATE INDEX idx_affectations_chauffeur ON affectations(chauffeur_id);
CREATE INDEX idx_affectations_actif ON affectations(actif);

-- ============================================
-- TABLE: demandes_carburant
-- ============================================
CREATE TABLE demandes_carburant (
    id SERIAL PRIMARY KEY,
    numero_demande VARCHAR(50) UNIQUE NOT NULL,
    vehicule_id INTEGER NOT NULL REFERENCES vehicules(id) ON DELETE CASCADE,
    chauffeur_id INTEGER REFERENCES chauffeurs(id) ON DELETE SET NULL,
    demandeur_id INTEGER NOT NULL REFERENCES utilisateurs(id) ON DELETE CASCADE,
    quantite_demandee DECIMAL(8,2) NOT NULL,
    quantite_approuvee DECIMAL(8,2),
    type_carburant type_carburant NOT NULL,
    motif TEXT NOT NULL,
    kilometrage_actuel INTEGER,
    statut statut_demande DEFAULT 'en_attente',
    date_demande TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_approbation TIMESTAMP,
    approuveur_id INTEGER REFERENCES utilisateurs(id) ON DELETE SET NULL,
    commentaire_approbation TEXT,
    date_livraison TIMESTAMP,
    bon_commande VARCHAR(100),
    
    CONSTRAINT quantite_positive CHECK (quantite_demandee > 0),
    CONSTRAINT quantite_approuvee_valide CHECK (quantite_approuvee IS NULL OR quantite_approuvee > 0)
);

CREATE INDEX idx_demandes_carburant_numero ON demandes_carburant(numero_demande);
CREATE INDEX idx_demandes_carburant_vehicule ON demandes_carburant(vehicule_id);
CREATE INDEX idx_demandes_carburant_statut ON demandes_carburant(statut);
CREATE INDEX idx_demandes_carburant_date ON demandes_carburant(date_demande);

-- ============================================
-- TABLE: demandes_voiture
-- ============================================
CREATE TABLE demandes_voiture (
    id SERIAL PRIMARY KEY,
    numero_demande VARCHAR(50) UNIQUE NOT NULL,
    demandeur_id INTEGER NOT NULL REFERENCES utilisateurs(id) ON DELETE CASCADE,
    service_id INTEGER REFERENCES services(id) ON DELETE SET NULL,
    vehicule_id INTEGER REFERENCES vehicules(id) ON DELETE SET NULL,
    chauffeur_id INTEGER REFERENCES chauffeurs(id) ON DELETE SET NULL,
    destination TEXT NOT NULL,
    motif TEXT NOT NULL,
    date_debut TIMESTAMP NOT NULL,
    date_fin TIMESTAMP NOT NULL,
    nombre_passagers INTEGER DEFAULT 1,
    besoins_specifiques TEXT,
    statut statut_demande DEFAULT 'en_attente',
    date_demande TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_approbation TIMESTAMP,
    approuveur_id INTEGER REFERENCES utilisateurs(id) ON DELETE SET NULL,
    commentaire_approbation TEXT,
    kilometrage_depart INTEGER,
    kilometrage_retour INTEGER,
    carburant_utilise DECIMAL(8,2),
    date_depart_reel TIMESTAMP,
    date_retour_reel TIMESTAMP,
    
    CONSTRAINT dates_mission_coherentes CHECK (date_fin >= date_debut),
    CONSTRAINT passagers_valide CHECK (nombre_passagers > 0),
    CONSTRAINT kilometrage_coherent CHECK (kilometrage_retour IS NULL OR kilometrage_retour >= kilometrage_depart)
);

CREATE INDEX idx_demandes_voiture_numero ON demandes_voiture(numero_demande);
CREATE INDEX idx_demandes_voiture_demandeur ON demandes_voiture(demandeur_id);
CREATE INDEX idx_demandes_voiture_statut ON demandes_voiture(statut);
CREATE INDEX idx_demandes_voiture_date ON demandes_voiture(date_demande);
CREATE INDEX idx_demandes_voiture_vehicule ON demandes_voiture(vehicule_id);

-- ============================================
-- TABLE: suivis_carburant
-- ============================================
CREATE TABLE suivis_carburant (
    id SERIAL PRIMARY KEY,
    vehicule_id INTEGER NOT NULL REFERENCES vehicules(id) ON DELETE CASCADE,
    demande_carburant_id INTEGER REFERENCES demandes_carburant(id) ON DELETE SET NULL,
    demande_voiture_id INTEGER REFERENCES demandes_voiture(id) ON DELETE SET NULL,
    quantite DECIMAL(8,2) NOT NULL,
    type_carburant type_carburant NOT NULL,
    prix_unitaire DECIMAL(10,2),
    montant_total DECIMAL(12,2),
    kilometrage INTEGER,
    consommation_theorique DECIMAL(6,2),
    date_ravitaillement TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    lieu VARCHAR(255),
    bon_commande VARCHAR(100),
    fournisseur VARCHAR(255),
    notes TEXT,
    
    CONSTRAINT quantite_positive CHECK (quantite > 0),
    CONSTRAINT prix_positif CHECK (prix_unitaire IS NULL OR prix_unitaire >= 0),
    CONSTRAINT montant_positif CHECK (montant_total IS NULL OR montant_total >= 0)
);

CREATE INDEX idx_suivis_carburant_vehicule ON suivis_carburant(vehicule_id);
CREATE INDEX idx_suivis_carburant_date ON suivis_carburant(date_ravitaillement);
CREATE INDEX idx_suivis_carburant_demande_carburant ON suivis_carburant(demande_carburant_id);

-- ============================================
-- TABLE: entretiens
-- ============================================
CREATE TABLE entretiens (
    id SERIAL PRIMARY KEY,
    vehicule_id INTEGER NOT NULL REFERENCES vehicules(id) ON DELETE CASCADE,
    type_entretien type_entretien NOT NULL,
    description TEXT NOT NULL,
    date_debut DATE NOT NULL,
    date_fin DATE,
    kilometrage INTEGER NOT NULL,
    cout DECIMAL(12,2),
    garage VARCHAR(255),
    responsable VARCHAR(255),
    pieces_changees TEXT[],
    prochain_entretien_km INTEGER,
    prochain_entretien_date DATE,
    statut VARCHAR(50) DEFAULT 'termine',
    notes TEXT,
    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT dates_entretien_coherentes CHECK (date_fin IS NULL OR date_fin >= date_debut),
    CONSTRAINT cout_positif CHECK (cout IS NULL OR cout >= 0),
    CONSTRAINT kilometrage_positif CHECK (kilometrage >= 0)
);

CREATE INDEX idx_entretiens_vehicule ON entretiens(vehicule_id);
CREATE INDEX idx_entretiens_type ON entretiens(type_entretien);
CREATE INDEX idx_entretiens_date ON entretiens(date_debut);

-- ============================================
-- TABLE: historique_entretiens
-- ============================================
CREATE TABLE historique_entretiens (
    id SERIAL PRIMARY KEY,
    entretien_id INTEGER NOT NULL REFERENCES entretiens(id) ON DELETE CASCADE,
    utilisateur_id INTEGER REFERENCES utilisateurs(id) ON DELETE SET NULL,
    action VARCHAR(100) NOT NULL,
    details TEXT,
    date_action TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_historique_entretiens_entretien ON historique_entretiens(entretien_id);
CREATE INDEX idx_historique_entretiens_date ON historique_entretiens(date_action);

-- ============================================
-- COMMENTAIRES SUR LES TABLES
-- ============================================

COMMENT ON TABLE utilisateurs IS 'Utilisateurs du systÃ¨me avec leurs rÃ´les et permissions';
COMMENT ON TABLE services IS 'Services/dÃ©partements de l''organisation';
COMMENT ON TABLE chauffeurs IS 'Informations dÃ©taillÃ©es sur les chauffeurs';
COMMENT ON TABLE vehicules IS 'Parc automobile avec caractÃ©ristiques techniques';
COMMENT ON TABLE affectations IS 'Affectations chauffeur-vÃ©hicule';
COMMENT ON TABLE demandes_carburant IS 'Demandes de ravitaillement en carburant';
COMMENT ON TABLE demandes_voiture IS 'Demandes d''utilisation de vÃ©hicules';
COMMENT ON TABLE suivis_carburant IS 'Historique des ravitaillements';
COMMENT ON TABLE entretiens IS 'OpÃ©rations de maintenance des vÃ©hicules';
COMMENT ON TABLE historique_entretiens IS 'Historique des modifications d''entretien';

-- ============================================
-- FIN DU SCHÃ‰MA
-- ============================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ database/seed.sql â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
-- ============================================
-- DONNÃ‰ES INITIALES (SEED)
-- FLEET MANAGEMENT SYSTEM
-- ============================================

-- Nettoyage des donnÃ©es existantes
TRUNCATE TABLE historique_entretiens CASCADE;
TRUNCATE TABLE entretiens CASCADE;
TRUNCATE TABLE suivis_carburant CASCADE;
TRUNCATE TABLE demandes_voiture CASCADE;
TRUNCATE TABLE demandes_carburant CASCADE;
TRUNCATE TABLE affectations CASCADE;
TRUNCATE TABLE vehicules CASCADE;
TRUNCATE TABLE chauffeurs CASCADE;
TRUNCATE TABLE services CASCADE;
TRUNCATE TABLE utilisateurs CASCADE;

-- RÃ©initialisation des sÃ©quences
ALTER SEQUENCE utilisateurs_id_seq RESTART WITH 1;
ALTER SEQUENCE services_id_seq RESTART WITH 1;
ALTER SEQUENCE chauffeurs_id_seq RESTART WITH 1;
ALTER SEQUENCE vehicules_id_seq RESTART WITH 1;
ALTER SEQUENCE affectations_id_seq RESTART WITH 1;
ALTER SEQUENCE demandes_carburant_id_seq RESTART WITH 1;
ALTER SEQUENCE demandes_voiture_id_seq RESTART WITH 1;
ALTER SEQUENCE suivis_carburant_id_seq RESTART WITH 1;
ALTER SEQUENCE entretiens_id_seq RESTART WITH 1;
ALTER SEQUENCE historique_entretiens_id_seq RESTART WITH 1;

-- ============================================
-- UTILISATEURS
-- ============================================
-- Mot de passe: "Password123!" pour tous (hachÃ© avec bcrypt)
INSERT INTO utilisateurs (nom, prenom, email, mot_de_passe, role, telephone, actif) VALUES
('RAKOTONIANA', 'Mamynavalon', 'admin@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'admin', '+261 34 12 345 67', true),
('RANDRIA', 'Jean', 'jean.randria@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'gestionnaire', '+261 34 12 345 68', true),
('RAKOTO', 'Marie', 'marie.rakoto@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'gestionnaire', '+261 34 12 345 69', true),
('ANDRIANINA', 'Paul', 'paul.andrianina@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'chauffeur', '+261 34 12 345 70', true),
('RASOLOFO', 'Pierre', 'pierre.rasolofo@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'chauffeur', '+261 34 12 345 71', true),
('RAKOTONIRINA', 'Hery', 'hery.rakotonirina@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'chauffeur', '+261 34 12 345 72', true),
('RAZAFY', 'Miora', 'miora.razafy@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'chauffeur', '+261 34 12 345 73', true),
('RABE', 'Tantely', 'tantely.rabe@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'demandeur', '+261 34 12 345 74', true),
('RAVELOSON', 'Fidy', 'fidy.raveloson@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'demandeur', '+261 34 12 345 75', true),
('ANDRIAMAHARO', 'Lova', 'lova.andriamaharo@prirtem.mg', '$2b$10$YourHashedPasswordHere', 'demandeur', '+261 34 12 345 76', true);

-- ============================================
-- SERVICES
-- ============================================
INSERT INTO services (nom, description, responsable_id, actif) VALUES
('Direction GÃ©nÃ©rale', 'Service de la direction gÃ©nÃ©rale', 1, true),
('Ressources Humaines', 'Gestion du personnel et recrutement', 2, true),
('Finance et ComptabilitÃ©', 'Gestion financiÃ¨re et comptable', 3, true),
('Logistique', 'Gestion du parc automobile et approvisionnements', 2, true),
('Informatique', 'Services informatiques et support technique', 1, true),
('Commercial', 'Relations clients et ventes', 3, true),
('Production', 'Gestion de la production', 2, true),
('Maintenance', 'Entretien des Ã©quipements', 1, true);

-- ============================================
-- CHAUFFEURS
-- ============================================
INSERT INTO chauffeurs (
    utilisateur_id, numero_permis, date_obtention_permis, date_expiration_permis,
    categories_permis, telephone, adresse, disponible, note_moyenne, date_embauche
) VALUES
(4, 'PM-2020-12345', '2020-01-15', '2030-01-15', ARRAY['B', 'C'], '+261 34 12 345 70', 
 'Lot II Y 45 Antananarivo', true, 4.8, '2020-02-01'),
 
(5, 'PM-2019-23456', '2019-03-20', '2029-03-20', ARRAY['B', 'C', 'D'], '+261 34 12 345 71',
 'Lot III K 23 Antananarivo', true, 4.5, '2019-04-01'),
 
(6, 'PM-2021-34567', '2021-06-10', '2031-06-10', ARRAY['B'], '+261 34 12 345 72',
 'Lot IV M 67 Antananarivo', true, 4.9, '2021-07-01'),
 
(7, 'PM-2018-45678', '2018-09-05', '2028-09-05', ARRAY['B', 'C'], '+261 34 12 345 73',
 'Lot V N 89 Antananarivo', true, 4.7, '2018-10-01');

-- ============================================
-- VÃ‰HICULES
-- ============================================
INSERT INTO vehicules (
    immatriculation, marque, modele, annee, couleur, numero_chassis,
    type_carburant, capacite_reservoir, kilometrage, statut,
    date_acquisition, date_derniere_revision, prochaine_revision_km,
    prochaine_revision_date, assurance_numero, assurance_expiration,
    nombre_places, actif
) VALUES
-- VÃ©hicules lÃ©gers
('1234 TAD', 'Toyota', 'Hilux', 2022, 'Blanc', 'TOY-HILUX-2022-001', 'diesel', 80.00, 45000, 'disponible',
 '2022-01-15', '2024-10-15', 50000, '2025-04-15', 'ASS-2022-001', '2025-12-31', 5, true),

('2345 TAE', 'Mitsubishi', 'L200', 2021, 'Gris', 'MIT-L200-2021-001', 'diesel', 75.00, 62000, 'disponible',
 '2021-03-20', '2024-09-20', 65000, '2025-03-20', 'ASS-2021-002', '2025-11-30', 5, true),

('3456 TAF', 'Nissan', 'Navara', 2023, 'Bleu', 'NIS-NAV-2023-001', 'diesel', 80.00, 28000, 'disponible',
 '2023-06-10', '2024-11-10', 30000, '2025-05-10', 'ASS-2023-003', '2026-06-30', 5, true),

('4567 TAG', 'Toyota', 'Land Cruiser', 2020, 'Noir', 'TOY-LC-2020-001', 'diesel', 90.00, 85000, 'en_mission',
 '2020-09-05', '2024-08-05', 90000, '2025-02-05', 'ASS-2020-004', '2025-10-31', 7, true),

('5678 TAH', 'Isuzu', 'D-Max', 2022, 'Rouge', 'ISU-DMAX-2022-001', 'diesel', 76.00, 38000, 'disponible',
 '2022-11-12', '2024-10-12', 40000, '2025-04-12', 'ASS-2022-005', '2025-11-30', 5, true),

-- VÃ©hicules utilitaires
('6789 TAI', 'Mercedes-Benz', 'Sprinter', 2021, 'Blanc', 'MB-SPR-2021-001', 'diesel', 100.00, 72000, 'disponible',
 '2021-02-18', '2024-09-18', 75000, '2025-03-18', 'ASS-2021-006', '2025-12-31', 12, true),

('7890 TAJ', 'Renault', 'Master', 2020, 'Gris', 'REN-MAS-2020-001', 'diesel', 105.00, 95000, 'en_entretien',
 '2020-04-22', '2024-07-22', 100000, '2025-01-22', 'ASS-2020-007', '2025-09-30', 9, true),

-- VÃ©hicules lÃ©gers urbains
('8901 TAK', 'Toyota', 'Corolla', 2023, 'Argent', 'TOY-COR-2023-001', 'essence', 50.00, 15000, 'disponible',
 '2023-08-15', '2024-11-15', 20000, '2025-08-15', 'ASS-2023-008', '2026-08-31', 5, true),

('9012 TAL', 'Honda', 'Civic', 2022, 'Bleu', 'HON-CIV-2022-001', 'essence', 47.00, 32000, 'disponible',
 '2022-05-10', '2024-10-10', 35000, '2025-05-10', 'ASS-2022-009', '2025-12-31', 5, true),

('0123 TAM', 'Hyundai', 'Tucson', 2021, 'Blanc', 'HYU-TUC-2021-001', 'essence', 62.00, 48000, 'disponible',
 '2021-07-25', '2024-09-25', 50000, '2025-01-25', 'ASS-2021-010', '2025-11-30', 5, true);

-- ============================================
-- AFFECTATIONS CHAUFFEUR-VÃ‰HICULE
-- ============================================
INSERT INTO affectations (vehicule_id, chauffeur_id, date_debut, date_fin, actif) VALUES
(1, 1, '2024-01-01', NULL, true),  -- Paul avec Toyota Hilux
(4, 2, '2024-01-01', NULL, true),  -- Pierre avec Land Cruiser (en mission)
(3, 3, '2024-02-01', NULL, true),  -- Hery avec Nissan Navara
(5, 4, '2024-03-01', NULL, true);  -- Miora avec Isuzu D-Max

-- ============================================
-- DEMANDES CARBURANT
-- ============================================
INSERT INTO demandes_carburant (
    numero_demande, vehicule_id, chauffeur_id, demandeur_id,
    quantite_demandee, quantite_approuvee, type_carburant,
    motif, kilometrage_actuel, statut,
    date_demande, date_approbation, approuveur_id, bon_commande
) VALUES
-- ApprouvÃ©es
('CARB-2024-000001', 1, 1, 8, 60.00, 60.00, 'diesel',
 'Mission vers Antsirabe', 45000, 'approuvee',
 '2024-12-01 08:00:00', '2024-12-01 09:30:00', 2, 'BC-2024-001'),

('CARB-2024-000002', 4, 2, 9, 80.00, 70.00, 'diesel',
 'TournÃ©e inspection sites', 85000, 'approuvee',
 '2024-12-02 10:00:00', '2024-12-02 14:00:00', 2, 'BC-2024-002'),

('CARB-2024-000003', 3, 3, 10, 50.00, 50.00, 'diesel',
 'DÃ©placement Mahajanga', 28000, 'approuvee',
 '2024-12-03 07:30:00', '2024-12-03 11:00:00', 3, 'BC-2024-003'),

-- En attente
('CARB-2024-000004', 5, 4, 8, 65.00, NULL, 'diesel',
 'Mission transport matÃ©riel', 38000, 'en_attente',
 '2024-12-05 14:00:00', NULL, NULL, NULL),

('CARB-2024-000005', 2, NULL, 9, 75.00, NULL, 'diesel',
 'PrÃ©paration mission hebdomadaire', 62000, 'en_attente',
 '2024-12-06 09:00:00', NULL, NULL, NULL);

-- ============================================
-- SUIVIS CARBURANT
-- ============================================
INSERT INTO suivis_carburant (
    vehicule_id, demande_carburant_id, quantite, type_carburant,
    prix_unitaire, montant_total, kilometrage,
    date_ravitaillement, lieu, bon_commande, fournisseur
) VALUES
-- Novembre 2024
(1, NULL, 65.00, 'diesel', 5200.00, 338000.00, 42000,
 '2024-11-05 08:30:00', 'Station Total Analakely', 'BC-2024-N001', 'Total Madagascar'),

(4, NULL, 85.00, 'diesel', 5200.00, 442000.00, 82000,
 '2024-11-08 10:15:00', 'Station Total Analakely', 'BC-2024-N002', 'Total Madagascar'),

(3, NULL, 55.00, 'diesel', 5150.00, 283250.00, 26000,
 '2024-11-12 14:20:00', 'Station Jovenna Ankorondrano', 'BC-2024-N003', 'Jovenna'),

(2, NULL, 70.00, 'diesel', 5200.00, 364000.00, 60000,
 '2024-11-15 09:45:00', 'Station Total Analakely', 'BC-2024-N004', 'Total Madagascar'),

(5, NULL, 60.00, 'diesel', 5150.00, 309000.00, 36000,
 '2024-11-20 11:30:00', 'Station Jovenna Ankorondrano', 'BC-2024-N005', 'Jovenna'),

-- DÃ©cembre 2024
(1, 1, 60.00, 'diesel', 5300.00, 318000.00, 45000,
 '2024-12-01 15:00:00', 'Station Total Analakely', 'BC-2024-001', 'Total Madagascar'),

(4, 2, 70.00, 'diesel', 5300.00, 371000.00, 85000,
 '2024-12-02 16:30:00', 'Station Total Analakely', 'BC-2024-002', 'Total Madagascar'),

(3, 3, 50.00, 'diesel', 5250.00, 262500.00, 28000,
 '2024-12-03 13:45:00', 'Station Jovenna Ankorondrano', 'BC-2024-003', 'Jovenna');

-- ============================================
-- DEMANDES VOITURE
-- ============================================
INSERT INTO demandes_voiture (
    numero_demande, demandeur_id, service_id, vehicule_id, chauffeur_id,
    destination, motif, date_debut, date_fin, nombre_passagers,
    statut, date_demande, date_approbation, approuveur_id,
    kilometrage_depart, kilometrage_retour, carburant_utilise,
    date_depart_reel, date_retour_reel
) VALUES
-- Missions terminÃ©es
('VEH-2024-000001', 8, 1, 1, 1,
 'Antsirabe', 'RÃ©union avec partenaires', 
 '2024-11-15 07:00:00', '2024-11-15 18:00:00', 3,
 'terminee', '2024-11-10 10:00:00', '2024-11-11 14:00:00', 2,
 42000, 42320, 28.50,
 '2024-11-15 07:15:00', '2024-11-15 17:45:00'),

('VEH-2024-000002', 9, 2, 4, 2,
 'Mahajanga', 'Inspection sites projet', 
 '2024-11-20 06:00:00', '2024-11-22 20:00:00', 4,
 'terminee', '2024-11-12 08:00:00', '2024-11-13 10:00:00', 2,
 82000, 82850, 75.00,
 '2024-11-20 06:30:00', '2024-11-22 19:30:00'),

('VEH-2024-000003', 10, 3, 3, 3,
 'Toamasina', 'Visite clients', 
 '2024-11-25 05:00:00', '2024-11-26 21:00:00', 2,
 'terminee', '2024-11-18 09:00:00', '2024-11-19 11:00:00', 3,
 26000, 26450, 42.00,
 '2024-11-25 05:20:00', '2024-11-26 20:45:00'),

-- Mission en cours
('VEH-2024-000004', 8, 1, 4, 2,
 'Fianarantsoa', 'Formation personnel', 
 '2024-12-06 07:00:00', '2024-12-08 18:00:00', 5,
 'en_cours', '2024-12-01 10:00:00', '2024-12-02 15:00:00', 2,
 85000, NULL, NULL,
 '2024-12-06 07:30:00', NULL),

-- Missions approuvÃ©es
('VEH-2024-000005', 9, 4, 5, 4,
 'Antsiranana', 'Livraison Ã©quipements', 
 '2024-12-10 06:00:00', '2024-12-12 20:00:00', 2,
 'approuvee', '2024-12-03 08:00:00', '2024-12-04 10:00:00', 3,
 NULL, NULL, NULL, NULL, NULL),

-- Demandes en attente
('VEH-2024-000006', 10, 5, NULL, NULL,
 'Toliara', 'Mission technique', 
 '2024-12-15 07:00:00', '2024-12-17 18:00:00', 3,
 'en_attente', '2024-12-05 14:00:00', NULL, NULL,
 NULL, NULL, NULL, NULL, NULL),

('VEH-2024-000007', 8, 2, NULL, NULL,
 'Morondava', 'Audit terrain', 
 '2024-12-20 06:00:00', '2024-12-22 19:00:00', 4,
 'en_attente', '2024-12-06 09:00:00', NULL, NULL,
 NULL, NULL, NULL, NULL, NULL);

-- ============================================
-- ENTRETIENS
-- ============================================
INSERT INTO entretiens (
    vehicule_id, type_entretien, description, date_debut, date_fin,
    kilometrage, cout, garage, responsable,
    pieces_changees, prochain_entretien_km, statut
) VALUES
(1, 'vidange', 'Vidange moteur + filtre Ã  huile', 
 '2024-10-15', '2024-10-15', 42000, 180000.00, 
 'Garage Toyota Antanimena', 'M. Rakoto', 
 ARRAY['Huile moteur', 'Filtre Ã  huile'], 47000, 'termine'),

(4, 'revision', 'RÃ©vision complÃ¨te 80000 km', 
 '2024-08-05', '2024-08-06', 82000, 850000.00, 
 'Garage Toyota Antanimena', 'M. Rakoto', 
 ARRAY['Huile moteur', 'Filtre Ã  huile', 'Filtre Ã  air', 'Bougies'], 
 92000, 'termine'),

(3, 'pneus', 'Changement des 4 pneus', 
 '2024-11-10', '2024-11-10', 26000, 520000.00, 
 'Ets Pneus Andraharo', 'M. Jean', 
 ARRAY['4 pneus Michelin'], NULL, 'termine'),

(7, 'reparation', 'RÃ©paration systÃ¨me de freinage', 
 '2024-12-01', NULL, 95000, NULL, 
 'Garage Renault Andrefan''Ambohijatovo', 'M. Pierre', 
 ARRAY['Plaquettes de frein'], NULL, 'en_cours'),

(2, 'vidange', 'Vidange + contrÃ´le gÃ©nÃ©ral', 
 '2024-09-20', '2024-09-20', 60000, 195000.00, 
 'Garage Mitsubishi Ankorondrano', 'M. Hery', 
 ARRAY['Huile moteur', 'Filtre Ã  huile', 'Filtre Ã  air'], 65000, 'termine');

-- ============================================
-- HISTORIQUE ENTRETIENS
-- ============================================
INSERT INTO historique_entretiens (entretien_id, utilisateur_id, action, details) VALUES
(1, 2, 'CREATION', 'Entretien crÃ©Ã©: vidange'),
(1, 2, 'CLOTURE', 'Entretien terminÃ© le 2024-10-15'),
(2, 2, 'CREATION', 'Entretien crÃ©Ã©: revision'),
(2, 2, 'CLOTURE', 'Entretien terminÃ© le 2024-08-06'),
(3, 3, 'CREATION', 'Entretien crÃ©Ã©: pneus'),
(3, 3, 'CLOTURE', 'Entretien terminÃ© le 2024-11-10'),
(4, 2, 'CREATION', 'Entretien crÃ©Ã©: reparation'),
(5, 2, 'CREATION', 'Entretien crÃ©Ã©: vidange'),
(5, 2, 'CLOTURE', 'Entretien terminÃ© le 2024-09-20');

-- ============================================
-- VÃ‰RIFICATIONS ET STATISTIQUES
-- ============================================

-- Afficher un rÃ©sumÃ© des donnÃ©es insÃ©rÃ©es
DO $$
BEGIN
    RAISE NOTICE '==========================================';
    RAISE NOTICE 'RÃ‰SUMÃ‰ DES DONNÃ‰ES INSÃ‰RÃ‰ES';
    RAISE NOTICE '==========================================';
    RAISE NOTICE 'Utilisateurs: % insÃ©rÃ©s', (SELECT COUNT(*) FROM utilisateurs);
    RAISE NOTICE 'Services: % insÃ©rÃ©s', (SELECT COUNT(*) FROM services);
    RAISE NOTICE 'Chauffeurs: % insÃ©rÃ©s', (SELECT COUNT(*) FROM chauffeurs);
    RAISE NOTICE 'VÃ©hicules: % insÃ©rÃ©s', (SELECT COUNT(*) FROM vehicules);
    RAISE NOTICE 'Affectations: % insÃ©rÃ©es', (SELECT COUNT(*) FROM affectations);
    RAISE NOTICE 'Demandes carburant: % insÃ©rÃ©es', (SELECT COUNT(*) FROM demandes_carburant);
    RAISE NOTICE 'Demandes voiture: % insÃ©rÃ©es', (SELECT COUNT(*) FROM demandes_voiture);
    RAISE NOTICE 'Suivis carburant: % insÃ©rÃ©s', (SELECT COUNT(*) FROM suivis_carburant);
    RAISE NOTICE 'Entretiens: % insÃ©rÃ©s', (SELECT COUNT(*) FROM entretiens);
    RAISE NOTICE '==========================================';
END $$;

-- ============================================
-- FIN DU SEED
-- ============================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/package.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "fleet-management-backend",
  "version": "1.0.0",
  "description": "Backend API pour le systÃ¨me de gestion Fleet PRIRTEM",
  "main": "src/server.js",
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "fleet-management",
    "prirtem",
    "express",
    "postgresql"
  ],
  "author": "PRIRTEM",
  "license": "ISC",
  "dependencies": {
    "bcrypt": "^5.1.1",
    "cors": "^2.8.5",
    "dotenv": "^16.6.1",
    "express": "^4.22.1",
    "jsonwebtoken": "^9.0.3",
    "multer": "^1.4.5-lts.1",
    "pdfkit": "^0.13.0",
    "pg": "^8.16.3",
    "uuid": "^9.0.1",
    "xlsx": "^0.18.5"
  },
  "devDependencies": {
    "nodemon": "^3.1.11"
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0"
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/package-lock.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "fleet-management-backend",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "fleet-management-backend",
      "version": "1.0.0",
      "license": "ISC",
      "dependencies": {
        "bcrypt": "^5.1.1",
        "cors": "^2.8.5",
        "dotenv": "^16.6.1",
        "express": "^4.22.1",
        "jsonwebtoken": "^9.0.3",
        "multer": "^1.4.5-lts.1",
        "pdfkit": "^0.13.0",
        "pg": "^8.16.3",
        "uuid": "^9.0.1",
        "xlsx": "^0.18.5"
      },
      "devDependencies": {
        "nodemon": "^3.1.11"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=9.0.0"
      }
    },
    "node_modules/@mapbox/node-pre-gyp": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@mapbox/node-pre-gyp/-/node-pre-gyp-1.0.11.tgz",
      "integrity": "sha512-Yhlar6v9WQgUp/He7BdgzOz8lqMQ8sU+jkCq7Wx8Myc5YFJLbEe7lgui/V7G1qB1DJykHSGwreceSaD60Y0PUQ==",
      "dependencies": {
        "detect-libc": "^2.0.0",
        "https-proxy-agent": "^5.0.0",
        "make-dir": "^3.1.0",
        "node-fetch": "^2.6.7",
        "nopt": "^5.0.0",
        "npmlog": "^5.0.1",
        "rimraf": "^3.0.2",
        "semver": "^7.3.5",
        "tar": "^6.1.11"
      },
      "bin": {
        "node-pre-gyp": "bin/node-pre-gyp"
      }
    },
    "node_modules/@swc/helpers": {
      "version": "0.3.17",
      "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.3.17.tgz",
      "integrity": "sha512-tb7Iu+oZ+zWJZ3HJqwx8oNwSDIU440hmVMDPhpACWQWnrZHK99Bxs70gT1L2dnr5Hg50ZRWEFkQCAnOVVV0z1Q==",
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/abbrev": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/abbrev/-/abbrev-1.1.1.tgz",
      "integrity": "sha512-nne9/IiQ/hzIhY6pdDnbBtz7DjPTKrY00P/zvPSm5pOFkl6xuGrGnXn/VtTNNfNtAfZ9/1RtehkszU9qcTii0Q=="
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-1.3.8.tgz",
      "integrity": "sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/adler-32": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/adler-32/-/adler-32-1.3.1.tgz",
      "integrity": "sha512-ynZ4w/nUUv5rrsR8UUGoe1VC9hZj6V5hU9Qw1HlMDJGEJw5S7TfTErWTjMys6M7vr0YWcPqs3qAr4ss0nDfP+A==",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/append-field": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/append-field/-/append-field-1.0.0.tgz",
      "integrity": "sha512-klpgFSWLW1ZEs8svjfb7g4qWY0YS5imI82dTg+QahUvJ8YqAY0P10Uk8tTyh9ZGuYEZEMaeJYCF5BFuX552hsw=="
    },
    "node_modules/aproba": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.1.0.tgz",
      "integrity": "sha512-tLIEcj5GuR2RSTnxNKdkK0dJ/GrC7P38sUkiDmDuHfsHmbagTFAxDVIBltoklXEVIQ/f14IL8IMJ5pn9Hez1Ew=="
    },
    "node_modules/are-we-there-yet": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/are-we-there-yet/-/are-we-there-yet-2.0.0.tgz",
      "integrity": "sha512-Ci/qENmwHnsYo9xKIcUJN5LeDKdJ6R1Z1j9V/J5wyq8nh/mYPEpIKJbBZXtZjG04HiK7zV/p6Vs9952MrMeUIw==",
      "deprecated": "This package is no longer supported.",
      "dependencies": {
        "delegates": "^1.0.0",
        "readable-stream": "^3.6.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/are-we-there-yet/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/array-buffer-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
      "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
      "dependencies": {
        "call-bound": "^1.0.3",
        "is-array-buffer": "^3.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/array-flatten/-/array-flatten-1.1.1.tgz",
      "integrity": "sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg=="
    },
    "node_modules/available-typed-arrays": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
      "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
      "dependencies": {
        "possible-typed-array-names": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw=="
    },
    "node_modules/base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ]
    },
    "node_modules/bcrypt": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/bcrypt/-/bcrypt-5.1.1.tgz",
      "integrity": "sha512-AGBHOG5hPYZ5Xl9KXzU5iKq9516yEmvCKDg3ecP5kX2aB6UqTeXZxk2ELnDgDm6BQSMlLt9rDB4LoSMx0rYwww==",
      "hasInstallScript": true,
      "dependencies": {
        "@mapbox/node-pre-gyp": "^1.0.11",
        "node-addon-api": "^5.0.0"
      },
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/body-parser": {
      "version": "1.20.4",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.20.4.tgz",
      "integrity": "sha512-ZTgYYLMOXY9qKU/57FAo8F+HA2dGX7bqGc71txDRC1rS4frdFI5R7NhluHxH6M0YItAP0sHB4uqAOcYKxO6uGA==",
      "dependencies": {
        "bytes": "~3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "~1.2.0",
        "http-errors": "~2.0.1",
        "iconv-lite": "~0.4.24",
        "on-finished": "~2.4.1",
        "qs": "~6.14.0",
        "raw-body": "~2.5.3",
        "type-is": "~1.6.18",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/body-parser/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/body-parser/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A=="
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/brotli": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/brotli/-/brotli-1.3.3.tgz",
      "integrity": "sha512-oTKjJdShmDuGW94SyyaoQvAjf30dZaHnjJ8uAF+u2/vGJkJbJPJAT1gDiOJP5v1Zb6f9KEyW/1HpuaWIXtGHPg==",
      "dependencies": {
        "base64-js": "^1.1.2"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA=="
    },
    "node_modules/buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ=="
    },
    "node_modules/busboy": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/busboy/-/busboy-1.6.0.tgz",
      "integrity": "sha512-8SFQbg/0hQ9xy3UNTB0YEnsNBbWfhf7RtnzpL7TkBiTBRfrQ9Fxcnz7VJsleJpyp6rVLvXiuORqjlHi5q+PYuA==",
      "dependencies": {
        "streamsearch": "^1.1.0"
      },
      "engines": {
        "node": ">=10.16.0"
      }
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
      "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.0",
        "es-define-property": "^1.0.0",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/cfb": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/cfb/-/cfb-1.2.2.tgz",
      "integrity": "sha512-KfdUZsSOw19/ObEWasvBP/Ac4reZvAGauZhs6S/gqNhXhI7cKwvlH7ulj+dOEYnca4bm4SGo8C1bTAQvnTjgQA==",
      "dependencies": {
        "adler-32": "~1.3.0",
        "crc-32": "~1.2.0"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chownr": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-2.0.0.tgz",
      "integrity": "sha512-bIomtDF5KGpdogkLd9VspvFzk9KfpyyGlS8YFVZl7TGPBHL5snIOnxeshwVgPteQ9b4Eydl+pVbIyE1DcvCWgQ==",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/clone": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/clone/-/clone-2.1.2.tgz",
      "integrity": "sha512-3Pe/CF1Nn94hyhIYpjtiLhdCoEoz0DqQ+988E9gmeEdQZlojxnOb74wctFyuwWQHzqyf9X7C7MG8juUpqBJT8w==",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/codepage": {
      "version": "1.15.0",
      "resolved": "https://registry.npmjs.org/codepage/-/codepage-1.15.0.tgz",
      "integrity": "sha512-3g6NUTPd/YtuuGrhMnOMRjFc+LJw/bnMp3+0r/Wcz3IXUuCosKRJvMphm5+Q+bvTVGcJJuRvVLuYba+WojaFaA==",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/color-support": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
      "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
      "bin": {
        "color-support": "bin.js"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg=="
    },
    "node_modules/concat-stream": {
      "version": "1.6.2",
      "resolved": "https://registry.npmjs.org/concat-stream/-/concat-stream-1.6.2.tgz",
      "integrity": "sha512-27HBghJxjiZtIk3Ycvn/4kbJk/1uZuJFfuPEns6LaEvpvG1f0hTea8lilrouyo9mVc2GWdcEZ8OLoGmSADlrCw==",
      "engines": [
        "node >= 0.8"
      ],
      "dependencies": {
        "buffer-from": "^1.0.0",
        "inherits": "^2.0.3",
        "readable-stream": "^2.2.2",
        "typedarray": "^0.0.6"
      }
    },
    "node_modules/console-control-strings": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
      "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ=="
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-0.5.4.tgz",
      "integrity": "sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie": {
      "version": "0.7.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.2.tgz",
      "integrity": "sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.7.tgz",
      "integrity": "sha512-NXdYc3dLr47pBkpUCHtKSwIOQXLVn8dZEuywboCOJY/osA0wFSLlSawr3KN8qXJEyX66FcONTH8EIlVuK0yyFA=="
    },
    "node_modules/core-util-is": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
      "integrity": "sha512-ZQBvi1DcpJ4GDqanjucZ2Hj3wEO5pZDS89BWbkcrvdxksJorwUDDZamX9ldFkp9aw2lmBDLgkObEA4DWNJ9FYQ=="
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/crc-32": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/crc-32/-/crc-32-1.2.2.tgz",
      "integrity": "sha512-ROmzCKrTnOwybPcJApAA6WBWij23HVfGVNKqqrZpuyZOHqK2CwHSvpGuyt/UNNvaIjEd8X5IFGp4Mh+Ie1IHJQ==",
      "bin": {
        "crc32": "bin/crc32.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/crypto-js": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/crypto-js/-/crypto-js-4.2.0.tgz",
      "integrity": "sha512-KALDyEYgpY+Rlob/iriUtjV6d5Eq+Y191A5g4UqLAi8CyGP9N1+FdVbkc1SxKc2r4YAYqG8JzO2KGL+AizD70Q=="
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-equal": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/deep-equal/-/deep-equal-2.2.3.tgz",
      "integrity": "sha512-ZIwpnevOurS8bpT4192sqAowWM76JDKSHYzMLty3BZGSswgq6pBaH3DhCSW5xVAZICZyKdOBPjwww5wfgT/6PA==",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.0",
        "call-bind": "^1.0.5",
        "es-get-iterator": "^1.1.3",
        "get-intrinsic": "^1.2.2",
        "is-arguments": "^1.1.1",
        "is-array-buffer": "^3.0.2",
        "is-date-object": "^1.0.5",
        "is-regex": "^1.1.4",
        "is-shared-array-buffer": "^1.0.2",
        "isarray": "^2.0.5",
        "object-is": "^1.1.5",
        "object-keys": "^1.1.1",
        "object.assign": "^4.1.4",
        "regexp.prototype.flags": "^1.5.1",
        "side-channel": "^1.0.4",
        "which-boxed-primitive": "^1.0.2",
        "which-collection": "^1.0.1",
        "which-typed-array": "^1.1.13"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-properties": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
      "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
      "dependencies": {
        "define-data-property": "^1.0.1",
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/delegates": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delegates/-/delegates-1.0.0.tgz",
      "integrity": "sha512-bd2L678uiWATM6m5Z1VzNCErI3jiGzt6HGY8OVICs40JQq/HALfbyNJmp0UDakEY4pMMaN0Ly5om/B1VI/+xfQ=="
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/destroy/-/destroy-1.2.0.tgz",
      "integrity": "sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/detect-libc": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/dfa": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/dfa/-/dfa-1.2.0.tgz",
      "integrity": "sha512-ED3jP8saaweFTjeGX8HQPjeC1YYyZs98jGNZx6IiBvxW7JG5v492kamAQB3m2wop07CvU/RQmzcKr6bgcC5D/Q=="
    },
    "node_modules/dotenv": {
      "version": "16.6.1",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.6.1.tgz",
      "integrity": "sha512-uBq4egWHTcTt33a72vpSG0z3HnPuIl6NqYcTrKEg2azoEyl2hpW0zqlxysq2pK9HlDIHyHyakeYaYnSAwd8bow==",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow=="
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A=="
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-get-iterator": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/es-get-iterator/-/es-get-iterator-1.1.3.tgz",
      "integrity": "sha512-sPZmqHBe6JIiTfN5q2pEi//TwxmAFHwj/XEuYjTuse78i8KxaqMTTzxPoFKuzRpDpTJ+0NAbpfenkmH2rePtuw==",
      "dependencies": {
        "call-bind": "^1.0.2",
        "get-intrinsic": "^1.1.3",
        "has-symbols": "^1.0.3",
        "is-arguments": "^1.1.1",
        "is-map": "^2.0.2",
        "is-set": "^2.0.2",
        "is-string": "^1.0.7",
        "isarray": "^2.0.5",
        "stop-iteration-iterator": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow=="
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/express": {
      "version": "4.22.1",
      "resolved": "https://registry.npmjs.org/express/-/express-4.22.1.tgz",
      "integrity": "sha512-F2X8g9P1X7uCPZMA3MVf9wcTqlyNp7IhH5qPCI0izhaOIYXaW9L535tGA3qmjRzpH+bZczqq7hVKxTR4NWnu+g==",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "~1.20.3",
        "content-disposition": "~0.5.4",
        "content-type": "~1.0.4",
        "cookie": "~0.7.1",
        "cookie-signature": "~1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "~1.3.1",
        "fresh": "~0.5.2",
        "http-errors": "~2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "~2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "~0.1.12",
        "proxy-addr": "~2.0.7",
        "qs": "~6.14.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "~0.19.0",
        "serve-static": "~1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "~2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/express/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A=="
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.3.2.tgz",
      "integrity": "sha512-aA4RyPcd3badbdABGDuTXCMTtOneUCAYH/gxoYRTZlIJdF0YPWuGqiAsIrhNnnqdXGswYk6dGujem4w80UJFhg==",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "~2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "~2.0.2",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/finalhandler/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/finalhandler/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A=="
    },
    "node_modules/fontkit": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/fontkit/-/fontkit-1.9.0.tgz",
      "integrity": "sha512-HkW/8Lrk8jl18kzQHvAw9aTHe1cqsyx5sDnxncx652+CIfhawokEPkeM3BoIC+z/Xv7a0yMr0f3pRRwhGH455g==",
      "dependencies": {
        "@swc/helpers": "^0.3.13",
        "brotli": "^1.3.2",
        "clone": "^2.1.2",
        "deep-equal": "^2.0.5",
        "dfa": "^1.2.0",
        "restructure": "^2.0.1",
        "tiny-inflate": "^1.0.3",
        "unicode-properties": "^1.3.1",
        "unicode-trie": "^2.0.0"
      }
    },
    "node_modules/for-each": {
      "version": "0.3.5",
      "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
      "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
      "dependencies": {
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/frac": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/frac/-/frac-1.1.2.tgz",
      "integrity": "sha512-w/XBfkibaTl3YDqASwfDUqkna4Z2p9cFSr1aHDt0WoMTECnRfBOv2WArlZILlqgWlmdIlALXGpM2AOhEk5W3IA==",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-0.5.2.tgz",
      "integrity": "sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fs-minipass": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fs-minipass/-/fs-minipass-2.1.0.tgz",
      "integrity": "sha512-V/JgOLFCS+R6Vcq0slCuaeWEdNC3ouDlJMNIsacH2VtALiu9mV4LPrHc5cDl8k5aw6J8jwgWWpiTo5RYhmIzvg==",
      "dependencies": {
        "minipass": "^3.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/fs-minipass/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw=="
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functions-have-names": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
      "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gauge": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/gauge/-/gauge-3.0.2.tgz",
      "integrity": "sha512-+5J6MS/5XksCuXq++uFRsnUd7Ovu1XenbeuIuNRJxYWjgQbPuFhT14lAvsWfqfAmnwluf1OwMjz39HjfLPci0Q==",
      "deprecated": "This package is no longer supported.",
      "dependencies": {
        "aproba": "^1.0.3 || ^2.0.0",
        "color-support": "^1.1.2",
        "console-control-strings": "^1.0.0",
        "has-unicode": "^2.0.1",
        "object-assign": "^4.1.1",
        "signal-exit": "^3.0.0",
        "string-width": "^4.2.3",
        "strip-ansi": "^6.0.1",
        "wide-align": "^1.1.2"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/glob": {
      "version": "7.2.3",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.3.tgz",
      "integrity": "sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==",
      "deprecated": "Glob versions prior to v9 are no longer supported",
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.1.1",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-bigints": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
      "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-3.0.0.tgz",
      "integrity": "sha512-sKJf1+ceQBr4SMkvQnBDNDtf4TXpVhVGateu0t918bl30FnbE2m4vNLX+VWe/dpjlb+HugGYzW7uQXH98HPEYw==",
      "dev": true,
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-unicode": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/has-unicode/-/has-unicode-2.0.1.tgz",
      "integrity": "sha512-8Rf9Y83NBReMnx0gFzA8JImQACstCYWUplepDa9xprwwtmgEZUF0h/i5xSA625zB/I37EtrswSST6OXxwaaIJQ=="
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/http-errors": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.1.tgz",
      "integrity": "sha512-4FbRdAX+bSdmo4AUFuS0WNiPz8NgFt+r8ThgNWmlrjQjt1Q7ZR9+zTlce2859x4KSXrwIsaeTqDoKQmtP8pLmQ==",
      "dependencies": {
        "depd": "~2.0.0",
        "inherits": "~2.0.4",
        "setprototypeof": "~1.2.0",
        "statuses": "~2.0.2",
        "toidentifier": "~1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "dependencies": {
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
      "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ignore-by-default": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/ignore-by-default/-/ignore-by-default-1.0.1.tgz",
      "integrity": "sha512-Ius2VYcGNk7T90CppJqcIkS5ooHUZyIQK+ClZfMfMNFEF9VSE73Fq+906u/CWu92x4gzZMWOwfFYckPObzdEbA==",
      "dev": true
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==",
      "deprecated": "This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.",
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ=="
    },
    "node_modules/internal-slot": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
      "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "hasown": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-arguments": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/is-arguments/-/is-arguments-1.2.0.tgz",
      "integrity": "sha512-7bVbi0huj/wrIAOzb8U1aszg9kdi3KN/CyU19CTI7tAoZYEZoL9yCDXpbXN+uPsuWnP02cyug1gleqq+TU+YCA==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-array-buffer": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
      "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bigint": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
      "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
      "dependencies": {
        "has-bigints": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-boolean-object": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
      "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-callable": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
      "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-date-object": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
      "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-map": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
      "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-number-object": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
      "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-regex": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
      "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-set": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
      "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-shared-array-buffer": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
      "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-string": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
      "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-symbol": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
      "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-symbols": "^1.1.0",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakmap": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
      "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakset": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
      "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw=="
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.3",
      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.3.tgz",
      "integrity": "sha512-MT/xP0CrubFRNLNKvxJ2BYfy53Zkm++5bX9dtuPbqAeQpTVe0MQTFhao8+Cp//EmJp244xt6Drw/GVEGCUj40g==",
      "dependencies": {
        "jws": "^4.0.1",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jwa": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-2.0.1.tgz",
      "integrity": "sha512-hRF04fqJIP8Abbkq5NKGN0Bbr3JxlQ+qhZufXVr0DvujKy93ZCbXZMHDL4EOtodSbCWxOqR8MS1tXA5hwqCXDg==",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jws": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/jws/-/jws-4.0.1.tgz",
      "integrity": "sha512-EKI/M/yqPncGUUh44xz0PxSidXFr/+r0pA70+gIYhjv+et7yxM+s29Y+VGDkovRofQem0fs7Uvf4+YmAdyRduA==",
      "dependencies": {
        "jwa": "^2.0.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/linebreak": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/linebreak/-/linebreak-1.1.0.tgz",
      "integrity": "sha512-MHp03UImeVhB7XZtjd0E4n6+3xr5Dq/9xI/5FptGk5FrbDR3zagPa2DS6U8ks/3HjbKWG9Q1M2ufOzxV2qLYSQ==",
      "dependencies": {
        "base64-js": "0.0.8",
        "unicode-trie": "^2.0.0"
      }
    },
    "node_modules/linebreak/node_modules/base64-js": {
      "version": "0.0.8",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-0.0.8.tgz",
      "integrity": "sha512-3XSA2cR/h/73EzlXXdU6YNycmYI7+kicTxks4eJg2g39biHR84slg2+des+p7iHYhbRg/udIS4TD53WabcOUkw==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w=="
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg=="
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA=="
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw=="
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA=="
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw=="
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg=="
    },
    "node_modules/make-dir": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/make-dir/-/make-dir-3.1.0.tgz",
      "integrity": "sha512-g3FeP20LNwhALb/6Cz6Dd4F2ngze0jz7tbzrD2wAV+o9FeNHe4rL+yK2md0J/fiSf1sa1ADhXqi5+oVwOM/eGw==",
      "dependencies": {
        "semver": "^6.0.0"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/make-dir/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-0.3.0.tgz",
      "integrity": "sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-1.0.3.tgz",
      "integrity": "sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/methods/-/methods-1.1.2.tgz",
      "integrity": "sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-1.6.0.tgz",
      "integrity": "sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/minipass": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-5.0.0.tgz",
      "integrity": "sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minizlib": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/minizlib/-/minizlib-2.1.2.tgz",
      "integrity": "sha512-bAxsR8BVfj60DWXHE3u30oHzfl4G7khkSuPW+qvpd7jFRHm7dLxOjUk1EHACJ/hxLY8phGJ0YhYHZo7jil7Qdg==",
      "dependencies": {
        "minipass": "^3.0.0",
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/minizlib/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/mkdirp": {
      "version": "0.5.6",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-0.5.6.tgz",
      "integrity": "sha512-FP+p8RB8OWpF3YZBCrP5gtADmtXApB5AMLn+vdyA+PyxCjrCs00mjyUozssO33cwDeT3wNGdLxJ5M//YqtHAJw==",
      "dependencies": {
        "minimist": "^1.2.6"
      },
      "bin": {
        "mkdirp": "bin/cmd.js"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA=="
    },
    "node_modules/multer": {
      "version": "1.4.5-lts.2",
      "resolved": "https://registry.npmjs.org/multer/-/multer-1.4.5-lts.2.tgz",
      "integrity": "sha512-VzGiVigcG9zUAoCNU+xShztrlr1auZOlurXynNvO9GiWD1/mTBbUljOKY+qMeazBqXgRnjzeEgJI/wyjJUHg9A==",
      "deprecated": "Multer 1.x is impacted by a number of vulnerabilities, which have been patched in 2.x. You should upgrade to the latest 2.x version.",
      "dependencies": {
        "append-field": "^1.0.0",
        "busboy": "^1.0.0",
        "concat-stream": "^1.5.2",
        "mkdirp": "^0.5.4",
        "object-assign": "^4.1.1",
        "type-is": "^1.6.4",
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/negotiator": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.3.tgz",
      "integrity": "sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/node-addon-api": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-5.1.0.tgz",
      "integrity": "sha512-eh0GgfEkpnoWDq+VY8OyvYhFEzBk6jIYbRKdIlyTiAXIVJ8PyBaKb0rp7oDtoddbdoHWhq8wwr+XZ81F1rpNdA=="
    },
    "node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/nodemon": {
      "version": "3.1.11",
      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-3.1.11.tgz",
      "integrity": "sha512-is96t8F/1//UHAjNPHpbsNY46ELPpftGUoSVNXwUfMk/qdjSylYrWSu1XavVTBOn526kFiOR733ATgNBCQyH0g==",
      "dev": true,
      "dependencies": {
        "chokidar": "^3.5.2",
        "debug": "^4",
        "ignore-by-default": "^1.0.1",
        "minimatch": "^3.1.2",
        "pstree.remy": "^1.1.8",
        "semver": "^7.5.3",
        "simple-update-notifier": "^2.0.0",
        "supports-color": "^5.5.0",
        "touch": "^3.1.0",
        "undefsafe": "^2.0.5"
      },
      "bin": {
        "nodemon": "bin/nodemon.js"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/nodemon"
      }
    },
    "node_modules/nopt": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/nopt/-/nopt-5.0.0.tgz",
      "integrity": "sha512-Tbj67rffqceeLpcRXrT7vKAN8CwfPeIBgM7E6iBkmKLV7bEMwpGgYLGv0jACUsECaa/vuxP0IjEont6umdMgtQ==",
      "dependencies": {
        "abbrev": "1"
      },
      "bin": {
        "nopt": "bin/nopt.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/npmlog": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/npmlog/-/npmlog-5.0.1.tgz",
      "integrity": "sha512-AqZtDUWOMKs1G/8lwylVjrdYgqA4d9nu8hc+0gzRxlDb1I10+FHBGMXs6aiQHFdCUUlqH99MUMuLfzWDNDtfxw==",
      "deprecated": "This package is no longer supported.",
      "dependencies": {
        "are-we-there-yet": "^2.0.0",
        "console-control-strings": "^1.1.0",
        "gauge": "^3.0.0",
        "set-blocking": "^2.0.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-is": {
      "version": "1.1.6",
      "resolved": "https://registry.npmjs.org/object-is/-/object-is-1.1.6.tgz",
      "integrity": "sha512-F8cZ+KfGlSGi09lJT7/Nd6KJZ9ygtvYC0/UYYLI9nmQKLMnydpB9yvbv9K1uSkEu7FU9vYPmVwLg328tX+ot3Q==",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.assign": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
      "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0",
        "has-symbols": "^1.1.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/pako": {
      "version": "0.2.9",
      "resolved": "https://registry.npmjs.org/pako/-/pako-0.2.9.tgz",
      "integrity": "sha512-NUcwaKxUxWrZLpDG+z/xZaCgQITkA/Dv4V/T6bw7VON6l1Xz/VnrBqrYjZQ12TamKHzITTfOEIYUj48y2KXImA=="
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.12",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-0.1.12.tgz",
      "integrity": "sha512-RA1GjUVMnvYFxuqovrEqZoxxW5NUZqbwKtYz/Tt7nXerk0LbLblQmrsgdeOxV5SFHf0UDggjS/bSeOZwt1pmEQ=="
    },
    "node_modules/pdfkit": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/pdfkit/-/pdfkit-0.13.0.tgz",
      "integrity": "sha512-AW79eHU5eLd2vgRDS9z3bSoi0FA+gYm+100LLosrQQMLUzOBGVOhG7ABcMFpJu7Bpg+MT74XYHi4k9EuU/9EZw==",
      "dependencies": {
        "crypto-js": "^4.0.0",
        "fontkit": "^1.8.1",
        "linebreak": "^1.0.2",
        "png-js": "^1.0.0"
      }
    },
    "node_modules/pg": {
      "version": "8.16.3",
      "resolved": "https://registry.npmjs.org/pg/-/pg-8.16.3.tgz",
      "integrity": "sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==",
      "dependencies": {
        "pg-connection-string": "^2.9.1",
        "pg-pool": "^3.10.1",
        "pg-protocol": "^1.10.3",
        "pg-types": "2.2.0",
        "pgpass": "1.0.5"
      },
      "engines": {
        "node": ">= 16.0.0"
      },
      "optionalDependencies": {
        "pg-cloudflare": "^1.2.7"
      },
      "peerDependencies": {
        "pg-native": ">=3.0.1"
      },
      "peerDependenciesMeta": {
        "pg-native": {
          "optional": true
        }
      }
    },
    "node_modules/pg-cloudflare": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/pg-cloudflare/-/pg-cloudflare-1.2.7.tgz",
      "integrity": "sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==",
      "optional": true
    },
    "node_modules/pg-connection-string": {
      "version": "2.9.1",
      "resolved": "https://registry.npmjs.org/pg-connection-string/-/pg-connection-string-2.9.1.tgz",
      "integrity": "sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w=="
    },
    "node_modules/pg-int8": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/pg-int8/-/pg-int8-1.0.1.tgz",
      "integrity": "sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/pg-pool": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/pg-pool/-/pg-pool-3.10.1.tgz",
      "integrity": "sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==",
      "peerDependencies": {
        "pg": ">=8.0"
      }
    },
    "node_modules/pg-protocol": {
      "version": "1.10.3",
      "resolved": "https://registry.npmjs.org/pg-protocol/-/pg-protocol-1.10.3.tgz",
      "integrity": "sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ=="
    },
    "node_modules/pg-types": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/pg-types/-/pg-types-2.2.0.tgz",
      "integrity": "sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==",
      "dependencies": {
        "pg-int8": "1.0.1",
        "postgres-array": "~2.0.0",
        "postgres-bytea": "~1.0.0",
        "postgres-date": "~1.0.4",
        "postgres-interval": "^1.1.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/pgpass": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/pgpass/-/pgpass-1.0.5.tgz",
      "integrity": "sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==",
      "dependencies": {
        "split2": "^4.1.0"
      }
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/png-js": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/png-js/-/png-js-1.0.0.tgz",
      "integrity": "sha512-k+YsbhpA9e+EFfKjTCH3VW6aoKlyNYI6NYdTfDL4CIvFnvsuO84ttonmZE7rc+v23SLTH8XX+5w/Ak9v0xGY4g=="
    },
    "node_modules/possible-typed-array-names": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
      "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/postgres-array": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/postgres-array/-/postgres-array-2.0.0.tgz",
      "integrity": "sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postgres-bytea": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/postgres-bytea/-/postgres-bytea-1.0.0.tgz",
      "integrity": "sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-date": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/postgres-date/-/postgres-date-1.0.7.tgz",
      "integrity": "sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-interval": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/postgres-interval/-/postgres-interval-1.2.0.tgz",
      "integrity": "sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==",
      "dependencies": {
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/process-nextick-args": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/process-nextick-args/-/process-nextick-args-2.0.1.tgz",
      "integrity": "sha512-3ouUOpQhtgrbOa17J7+uxOTpITYWaGP7/AhoR3+A+/1e9skrzelGi/dXzEYyvbxubEF6Wn2ypscTKiKJFFn1ag=="
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/pstree.remy": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/pstree.remy/-/pstree.remy-1.1.8.tgz",
      "integrity": "sha512-77DZwxQmxKnu3aR542U+X8FypNzbfJ+C5XQDk3uWjWxn6151aIMGthWYRXTqT1E5oJvg+ljaa2OJi+VfvCOQ8w==",
      "dev": true
    },
    "node_modules/qs": {
      "version": "6.14.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.14.0.tgz",
      "integrity": "sha512-YWWTjgABSKcvs/nWBi9PycY/JiPJqOD4JA6o9Sej2AtvSGarXxKC3OQSk4pAarbdQlKAh5D4FCQkJNkW+GAn3w==",
      "dependencies": {
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.3",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.5.3.tgz",
      "integrity": "sha512-s4VSOf6yN0rvbRZGxs8Om5CWj6seneMwK3oDb4lWDH0UPhWcxwOWw5+qk24bxq87szX1ydrwylIOp2uG1ojUpA==",
      "dependencies": {
        "bytes": "~3.1.2",
        "http-errors": "~2.0.1",
        "iconv-lite": "~0.4.24",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/readable-stream": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-2.3.8.tgz",
      "integrity": "sha512-8p0AUk4XODgIewSi0l8Epjs+EVnWiK7NoDIEGU0HhE7+ZyY8D1IMY7odu5lRrFXGg71L15KG8QrPmum45RTtdA==",
      "dependencies": {
        "core-util-is": "~1.0.0",
        "inherits": "~2.0.3",
        "isarray": "~1.0.0",
        "process-nextick-args": "~2.0.0",
        "safe-buffer": "~5.1.1",
        "string_decoder": "~1.1.1",
        "util-deprecate": "~1.0.1"
      }
    },
    "node_modules/readable-stream/node_modules/isarray": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
      "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ=="
    },
    "node_modules/readable-stream/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g=="
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/regexp.prototype.flags": {
      "version": "1.5.4",
      "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
      "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-errors": "^1.3.0",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/restructure": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/restructure/-/restructure-2.0.1.tgz",
      "integrity": "sha512-e0dOpjm5DseomnXx2M5lpdZ5zoHqF1+bqdMJUohoYVVQa7cBdnk7fdmeI6byNWP/kiME72EeTiSypTCVnpLiDg=="
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ]
    },
    "node_modules/safe-regex-test": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
      "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-regex": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg=="
    },
    "node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.1.tgz",
      "integrity": "sha512-p4rRk4f23ynFEfcD9LA0xRYngj+IyGiEYyqqOak8kaN0TvNmuxC2dcVeBn62GpCeR2CpWqyHCNScTP91QbAVFg==",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/send/node_modules/debug/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A=="
    },
    "node_modules/send/node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/send/node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-1.16.2.tgz",
      "integrity": "sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/serve-static/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/serve-static/node_modules/debug/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A=="
    },
    "node_modules/serve-static/node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/serve-static/node_modules/send": {
      "version": "0.19.0",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.0.tgz",
      "integrity": "sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/serve-static/node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/serve-static/node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/set-blocking": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/set-blocking/-/set-blocking-2.0.0.tgz",
      "integrity": "sha512-KiKBS8AnWGEyLzofFfmvKwpdPzqiy16LvQfK3yv/fVH7Bj13/wl3JSR1J+rfgRE9q7xUJK4qvgS8raSOeLUehw=="
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-function-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
      "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "functions-have-names": "^1.2.3",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw=="
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/signal-exit": {
      "version": "3.0.7",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.7.tgz",
      "integrity": "sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ=="
    },
    "node_modules/simple-update-notifier": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-2.0.0.tgz",
      "integrity": "sha512-a2B9Y0KlNXl9u/vsW6sTIu9vGEpfKu2wRV6l1H3XEas/0gUIzGzBoP/IouTcUQbm9JWZLH3COxyn03TYlFax6w==",
      "dev": true,
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/split2": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/split2/-/split2-4.2.0.tgz",
      "integrity": "sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==",
      "engines": {
        "node": ">= 10.x"
      }
    },
    "node_modules/ssf": {
      "version": "0.11.2",
      "resolved": "https://registry.npmjs.org/ssf/-/ssf-0.11.2.tgz",
      "integrity": "sha512-+idbmIXoYET47hH+d7dfm2epdOMUDjqcB4648sTZ+t2JwoyBFL/insLfB/racrDmsKB3diwsDA696pZMieAC5g==",
      "dependencies": {
        "frac": "~1.1.2"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.2.tgz",
      "integrity": "sha512-DvEy55V3DB7uknRo+4iOGT5fP1slR8wQohVdknigZPMpMstaKJQWhwiYBACJE3Ul2pTnATihhBYnRhZQHGBiRw==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/stop-iteration-iterator": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
      "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
      "dependencies": {
        "es-errors": "^1.3.0",
        "internal-slot": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/streamsearch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/streamsearch/-/streamsearch-1.1.0.tgz",
      "integrity": "sha512-Mcc5wHehp9aXz1ax6bZUyY5afg9u2rv5cqQI3mRrYkGC8rW2hM02jWuwjtL++LS5qinSyhj2QfLyNsuc+VsExg==",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/string_decoder": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.1.1.tgz",
      "integrity": "sha512-n/ShnvDi6FHbbVfviro+WojiFzv+s8MPMHBczVePfUpDJLwoLT0ht1l4YwBCbi8pJAveEEdnkHyPyTP/mzRfwg==",
      "dependencies": {
        "safe-buffer": "~5.1.0"
      }
    },
    "node_modules/string_decoder/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g=="
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-color": {
      "version": "5.5.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-5.5.0.tgz",
      "integrity": "sha512-QjVjwdXIt408MIiAqCX4oUKsgU2EqAGzs2Ppkm4aQYbjm+ZEWEcW4SfFNTr4uMNZma0ey4f5lgLrkB0aX0QMow==",
      "dev": true,
      "dependencies": {
        "has-flag": "^3.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/tar": {
      "version": "6.2.1",
      "resolved": "https://registry.npmjs.org/tar/-/tar-6.2.1.tgz",
      "integrity": "sha512-DZ4yORTwrbTj/7MZYq2w+/ZFdI6OZ/f9SFHR+71gIVUZhOQPHzVCLpvRnPgyaMpfWxxk/4ONva3GQSyNIKRv6A==",
      "dependencies": {
        "chownr": "^2.0.0",
        "fs-minipass": "^2.0.0",
        "minipass": "^5.0.0",
        "minizlib": "^2.1.1",
        "mkdirp": "^1.0.3",
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/tar/node_modules/mkdirp": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-1.0.4.tgz",
      "integrity": "sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==",
      "bin": {
        "mkdirp": "bin/cmd.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/tiny-inflate": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/tiny-inflate/-/tiny-inflate-1.0.3.tgz",
      "integrity": "sha512-pkY1fj1cKHb2seWDy0B16HeWyczlJA9/WW3u3c4z/NiWDsO3DOU5D7nhTLE9CF0yXv/QZFY7sEJmj24dK+Rrqw=="
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/touch": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/touch/-/touch-3.1.1.tgz",
      "integrity": "sha512-r0eojU4bI8MnHr8c5bNo7lJDdI2qXlWWJk6a9EAFG7vbhTjElYhBVS3/miuE0uOuoLdb8Mc/rVfsmm6eo5o9GA==",
      "dev": true,
      "bin": {
        "nodetouch": "bin/nodetouch.js"
      }
    },
    "node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw=="
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w=="
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-1.6.18.tgz",
      "integrity": "sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/typedarray": {
      "version": "0.0.6",
      "resolved": "https://registry.npmjs.org/typedarray/-/typedarray-0.0.6.tgz",
      "integrity": "sha512-/aCDEGatGvZ2BIk+HmLf4ifCJFwvKFNb9/JeZPMulfgFracn9QFcAf5GO8B/mweUjSoblS5In0cWhqpfs/5PQA=="
    },
    "node_modules/undefsafe": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.5.tgz",
      "integrity": "sha512-WxONCrssBM8TSPRqN5EmsjVrsv4A8X12J4ArBiiayv3DyyG3ZlIg6yysuuSYdZsVz3TKcTg2fd//Ujd4CHV1iA==",
      "dev": true
    },
    "node_modules/unicode-properties": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/unicode-properties/-/unicode-properties-1.4.1.tgz",
      "integrity": "sha512-CLjCCLQ6UuMxWnbIylkisbRj31qxHPAurvena/0iwSVbQ2G1VY5/HjV0IRabOEbDHlzZlRdCrD4NhB0JtU40Pg==",
      "dependencies": {
        "base64-js": "^1.3.0",
        "unicode-trie": "^2.0.0"
      }
    },
    "node_modules/unicode-trie": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/unicode-trie/-/unicode-trie-2.0.0.tgz",
      "integrity": "sha512-x7bc76x0bm4prf1VLg79uhAzKw8DVboClSN5VxJuQ+LKDOVEW9CdH+VY7SP+vX7xCYQqzzgQpFqz15zeLvAtZQ==",
      "dependencies": {
        "pako": "^0.2.5",
        "tiny-inflate": "^1.0.0"
      }
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw=="
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/utils-merge/-/utils-merge-1.0.1.tgz",
      "integrity": "sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ=="
    },
    "node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/which-boxed-primitive": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
      "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
      "dependencies": {
        "is-bigint": "^1.1.0",
        "is-boolean-object": "^1.2.1",
        "is-number-object": "^1.1.1",
        "is-string": "^1.1.1",
        "is-symbol": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-collection": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
      "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
      "dependencies": {
        "is-map": "^2.0.3",
        "is-set": "^2.0.3",
        "is-weakmap": "^2.0.2",
        "is-weakset": "^2.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-typed-array": {
      "version": "1.1.19",
      "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
      "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "for-each": "^0.3.5",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/wide-align": {
      "version": "1.1.5",
      "resolved": "https://registry.npmjs.org/wide-align/-/wide-align-1.1.5.tgz",
      "integrity": "sha512-eDMORYaPNZ4sQIuuYPDHdQvf4gyCF9rEEV/yPxGfwPkRodwEgiMUUXTx/dex+Me0wxx53S+NgUHaP7y3MGlDmg==",
      "dependencies": {
        "string-width": "^1.0.2 || 2 || 3 || 4"
      }
    },
    "node_modules/wmf": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wmf/-/wmf-1.0.2.tgz",
      "integrity": "sha512-/p9K7bEh0Dj6WbXg4JG0xvLQmIadrner1bi45VMJTfnbVHsc7yIajZyoSoK60/dtVBs12Fm6WkUI5/3WAVsNMw==",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/word": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/word/-/word-0.3.0.tgz",
      "integrity": "sha512-OELeY0Q61OXpdUfTp+oweA/vtLVg5VDOXh+3he3PNzLGG/y0oylSOC1xRVj0+l4vQ3tj/bB1HVHv1ocXkQceFA==",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ=="
    },
    "node_modules/xlsx": {
      "version": "0.18.5",
      "resolved": "https://registry.npmjs.org/xlsx/-/xlsx-0.18.5.tgz",
      "integrity": "sha512-dmg3LCjBPHZnQp5/F/+nnTa+miPJxUXB6vtk42YjBBKayDNagxGEeIdWApkYPOf3Z3pm3k62Knjzp7lMeTEtFQ==",
      "dependencies": {
        "adler-32": "~1.3.0",
        "cfb": "~1.2.1",
        "codepage": "~1.15.0",
        "crc-32": "~1.2.1",
        "ssf": "~0.11.2",
        "wmf": "~1.0.1",
        "word": "~0.3.0"
      },
      "bin": {
        "xlsx": "bin/xlsx.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/xtend": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/xtend/-/xtend-4.0.2.tgz",
      "integrity": "sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==",
      "engines": {
        "node": ">=0.4"
      }
    },
    "node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A=="
    }
  }
}


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/server.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/server.js
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();

const app = express();

// ============================================
// MIDDLEWARE
// ============================================

// CORS
app.use(cors({
  origin: process.env.FRONTEND_URL || 'http://localhost:5173',
  credentials: true
}));

// Body parser
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true, limit: '10mb' }));

// Logging middleware
app.use((req, res, next) => {
  console.log(`${new Date().toISOString()} - ${req.method} ${req.path}`);
  next();
});

// ============================================
// ROUTES
// ============================================

// Routes d'authentification (Ã  implÃ©menter)
app.post('/api/auth/login', async (req, res) => {
  try {
    const { email, password } = req.body;
    // TODO: ImplÃ©menter la logique d'authentification
    res.json({ 
      success: true, 
      message: 'Connexion simulÃ©e',
      token: 'mock_token',
      user: { id: 1, email, role: 'admin' }
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Import des routes
const demandesRoutes = require('./routes/demandes');
const vehiculesRoutes = require('./routes/vehicules');
const chauffeursRoutes = require('./routes/chauffeurs');
const importRoutes = require('./routes/import');
const pdfRoutes = require('./routes/pdf');

// Montage des routes SANS authentification pour le dÃ©veloppement
app.use('/api', demandesRoutes);
app.use('/api', vehiculesRoutes);
app.use('/api', chauffeursRoutes);
app.use('/api', importRoutes);
app.use('/api', pdfRoutes);

// Route de suivi carburant SANS authentification
app.get('/api/suivis', async (req, res) => {
  try {
    const pool = require('./config/database');
    const { type_suivi, statut, date_debut, date_fin, immatriculation } = req.query;
    
    let query = 'SELECT * FROM suivi_carburant WHERE 1=1';
    const params = [];
    let paramCount = 1;
    
    if (type_suivi) {
      query += ` AND type_suivi = $${paramCount++}`;
      params.push(type_suivi);
    }
    
    if (statut) {
      query += ` AND statut_validation = $${paramCount++}`;
      params.push(statut);
    }
    
    if (date_debut) {
      query += ` AND date_operation >= $${paramCount++}`;
      params.push(date_debut);
    }
    
    if (date_fin) {
      query += ` AND date_operation <= $${paramCount++}`;
      params.push(date_fin);
    }
    
    if (immatriculation) {
      query += ` AND immatriculation ILIKE $${paramCount++}`;
      params.push(`%${immatriculation}%`);
    }
    
    query += ' ORDER BY date_operation DESC, created_at DESC LIMIT 1000';
    
    const result = await pool.query(query, params);
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration suivis:', error);
    res.status(500).json({ error: error.message });
  }
});

// Route stats globales SANS authentification
app.get('/api/stats', async (req, res) => {
  try {
    const pool = require('./config/database');
    
    const statsVehicules = await pool.query('SELECT * FROM stats_vehicule');
    const dashboard = await pool.query('SELECT * FROM dashboard_carburant LIMIT 30');
    
    // Stats globales
    const globalStats = await pool.query(`
      SELECT 
        COUNT(DISTINCT CASE WHEN statut = 'disponible' THEN id END) as vehicules_disponibles,
        COUNT(DISTINCT CASE WHEN statut = 'en_mission' THEN id END) as vehicules_en_mission,
        COUNT(DISTINCT CASE WHEN statut = 'maintenance' THEN id END) as vehicules_maintenance
      FROM vehicules
    `);
    
    const demandesStats = await pool.query(`
      SELECT 
        COUNT(CASE WHEN statut LIKE '%attente%' THEN 1 END) as demandes_en_attente,
        COUNT(CASE WHEN statut = 'valide' THEN 1 END) as demandes_validees,
        COUNT(*) as total_demandes
      FROM (
        SELECT statut FROM demandes_carburant
        UNION ALL
        SELECT statut FROM demandes_voiture
      ) as all_demandes
    `);
    
    const carburantStats = await pool.query(`
      SELECT 
        SUM(montant) as montant_total_mois,
        SUM(quantite_litres) as litres_total_mois,
        AVG(consommation_aux_100) as consommation_moyenne
      FROM suivi_carburant
      WHERE date_operation >= DATE_TRUNC('month', CURRENT_DATE)
    `);
    
    res.json({
      success: true,
      parVehicule: statsVehicules.rows,
      dashboard: dashboard.rows,
      global: {
        ...globalStats.rows[0],
        ...demandesStats.rows[0],
        ...carburantStats.rows[0]
      }
    });
  } catch (error) {
    console.error('Erreur stats:', error);
    res.status(500).json({ error: error.message });
  }
});

// Route alertes SANS authentification
app.get('/api/alertes', async (req, res) => {
  try {
    const pool = require('./config/database');
    
    const result = await pool.query(`
      SELECT 
        a.*,
        s.immatriculation,
        s.date_operation,
        s.type_suivi
      FROM alertes_carburant a
      JOIN suivi_carburant s ON a.suivi_id = s.id
      WHERE a.est_resolue = false
      ORDER BY a.created_at DESC
      LIMIT 50
    `);
    
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur alertes:', error);
    res.status(500).json({ error: error.message });
  }
});

// ============================================
// ROUTES DE TEST
// ============================================

// Health check
app.get('/health', (req, res) => {
  res.json({ 
    status: 'OK', 
    timestamp: new Date().toISOString(),
    environment: process.env.NODE_ENV || 'development'
  });
});

// Test de connexion Ã  la base de donnÃ©es
app.get('/api/test-db', async (req, res) => {
  try {
    const pool = require('./config/database');
    const result = await pool.query('SELECT NOW() as current_time, version() as db_version');
    res.json({ 
      success: true, 
      message: 'Connexion Ã  la base de donnÃ©es rÃ©ussie',
      data: result.rows[0]
    });
  } catch (error) {
    res.status(500).json({ 
      success: false, 
      error: error.message 
    });
  }
});

// Liste des routes disponibles
app.get('/api/routes', (req, res) => {
  const routes = [];
  
  app._router.stack.forEach((middleware) => {
    if (middleware.route) {
      routes.push({
        path: middleware.route.path,
        methods: Object.keys(middleware.route.methods)
      });
    } else if (middleware.name === 'router') {
      middleware.handle.stack.forEach((handler) => {
        if (handler.route) {
          routes.push({
            path: handler.route.path,
            methods: Object.keys(handler.route.methods)
          });
        }
      });
    }
  });
  
  res.json({ success: true, routes });
});

// ============================================
// GESTION DES ERREURS
// ============================================

// 404 Handler
app.use((req, res) => {
  res.status(404).json({ 
    error: 'Route non trouvÃ©e',
    path: req.path,
    method: req.method
  });
});

// Error Handler global
app.use((err, req, res, next) => {
  console.error('Erreur globale:', err);
  
  res.status(err.status || 500).json({
    error: err.message || 'Erreur interne du serveur',
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
});

// ============================================
// DÃ‰MARRAGE DU SERVEUR
// ============================================

const PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
  console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ðŸš€ Serveur PRIRTEM Fleet Management    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘   Port: ${PORT}                              â•‘
â•‘   Env:  ${process.env.NODE_ENV || 'development'}                  â•‘
â•‘   URL:  http://localhost:${PORT}             â•‘
â•‘   Auth: âŒ DÃ‰SACTIVÃ‰E (DEV MODE)            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  `);
  
  console.log('ðŸ“‹ Routes disponibles:');
  console.log('   GET  /health              - Health check');
  console.log('   GET  /api/test-db         - Test base de donnÃ©es');
  console.log('   GET  /api/routes          - Liste des routes');
  console.log('   POST /api/auth/login      - Connexion');
  console.log('');
  console.log('   ðŸ“¦ Demandes:');
  console.log('   GET/POST /api/demandes-carburant');
  console.log('   GET/POST /api/demandes-voiture');
  console.log('');
  console.log('   ðŸš— VÃ©hicules:');
  console.log('   GET/POST /api/vehicules');
  console.log('');
  console.log('   ðŸ‘¨â€âœˆï¸ Chauffeurs:');
  console.log('   GET/POST /api/chauffeurs');
  console.log('');
  console.log('   ðŸ“Š Import & Stats:');
  console.log('   POST /api/import-excel');
  console.log('   GET  /api/stats');
  console.log('   GET  /api/suivis');
  console.log('   GET  /api/alertes');
  console.log('');
  console.log('âš ï¸  MODE DÃ‰VELOPPEMENT - Authentification dÃ©sactivÃ©e');
  console.log('âœ¨ Serveur prÃªt Ã  recevoir des requÃªtes!');
});

// Gestion propre de l'arrÃªt
process.on('SIGTERM', () => {
  console.log('SIGTERM reÃ§u, fermeture du serveur...');
  process.exit(0);
});

process.on('SIGINT', () => {
  console.log('\nSIGINT reÃ§u, fermeture du serveur...');
  process.exit(0);
});

module.exports = app;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/routes/import.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/routes/import.js - VERSION AMÃ‰LIORÃ‰E
const express = require('express');
const router = express.Router();
const multer = require('multer');
const XLSX = require('xlsx');
const { v4: uuidv4 } = require('uuid');
const pool = require('../config/database');

// Auth dÃ©sactivÃ©e pour DEV
const authentifier = (req, res, next) => { 
  req.user = { id: 1, role: 'admin', email: 'admin@prirtem.mg' }; 
  next(); 
};
const verifierRole = (...roles) => (req, res, next) => next();

// Configuration Multer
const storage = multer.memoryStorage();
const upload = multer({ 
  storage: storage,
  limits: { fileSize: 10 * 1024 * 1024 },
  fileFilter: (req, file, cb) => {
    if (file.mimetype === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||
        file.mimetype === 'application/vnd.ms-excel') {
      cb(null, true);
    } else {
      cb(new Error('Seuls les fichiers Excel (.xlsx, .xls) sont autorisÃ©s'));
    }
  }
});

// ============================================
// DÃ‰TECTION AUTOMATIQUE DU TYPE DE FEUILLE
// ============================================
function detecterTypeFeuille(data, nomFeuille) {
  const nomFeuilleNorm = nomFeuille.toLowerCase();
  const colonnes = Object.keys(data[0] || {}).map(c => c.toLowerCase());
  
  // DÃ©tection par nom de feuille
  if (nomFeuilleNorm.includes('groupe') && nomFeuilleNorm.includes('electro')) {
    return 'groupe_electrogene';
  }
  if (nomFeuilleNorm.includes('suivi') && nomFeuilleNorm.includes('carburant')) {
    return 'suivi_carburant';
  }
  if (nomFeuilleNorm.includes('autres') && nomFeuilleNorm.includes('carburant')) {
    return 'autres_carburants';
  }
  
  // DÃ©tection par colonnes spÃ©cifiques
  const hasImmatriculation = colonnes.some(c => c.includes('immat'));
  const hasKmDepart = colonnes.some(c => c.includes('km') && (c.includes('depart') || c.includes('dÃ©but')));
  const hasNumeroGroupe = colonnes.some(c => (c.includes('numero') || c.includes('numÃ©ro')) && c.includes('groupe'));
  const hasHeuresFonctionnement = colonnes.some(c => c.includes('heure') && c.includes('fonction'));
  
  if (hasNumeroGroupe || hasHeuresFonctionnement) {
    return 'groupe_electrogene';
  }
  if (hasImmatriculation && hasKmDepart) {
    return 'suivi_carburant';
  }
  
  return 'suivi_carburant'; // Par dÃ©faut
}

function normaliserColonne(nom) {
  const mapping = {
    'date': 'date_operation',
    'immat': 'immatriculation',
    'immatriculation': 'immatriculation',
    'montant': 'montant',
    'prix': 'prix_unitaire',
    'prix unitaire': 'prix_unitaire',
    'litre': 'quantite_litres',
    'litres': 'quantite_litres',
    'quantite': 'quantite_litres',
    'quantitÃ©': 'quantite_litres',
    'km dÃ©part': 'km_depart',
    'km_depart': 'km_depart',
    'km de dÃ©part': 'km_depart',
    'km dÃ©but': 'km_depart',
    'km arrivÃ©e': 'km_arrivee',
    'km_arrivee': 'km_arrivee',
    'km d\'arrivÃ©e': 'km_arrivee',
    'km fin': 'km_arrivee',
    'km journalier': 'km_journalier',
    'km_journalier': 'km_journalier',
    'km du jour': 'km_journalier',
    'compteur': 'compteur_actuel',
    'compteur actuel': 'compteur_actuel',
    'compteur prÃ©cÃ©dent': 'compteur_precedent',
    'compteur precedent': 'compteur_precedent',
    'consommation': 'consommation_aux_100',
    'carburant': 'type_carburant',
    'type carburant': 'type_carburant',
    'marque': 'marque',
    'modele': 'modele',
    'modÃ¨le': 'modele',
    'commentaire': 'commentaire',
    'observation': 'commentaire',
    'numero groupe': 'numero_equipement',
    'numÃ©ro groupe': 'numero_equipement',
    'numero equipement': 'numero_equipement',
    'heures fonctionnement': 'heures_fonctionnement'
  };
  
  const nomNormalise = nom.toLowerCase().trim();
  return mapping[nomNormalise] || nomNormalise.replace(/\s+/g, '_');
}

function normaliserDonnees(ligneExcel, typeFichier) {
  const donneeNormalisee = {
    type_suivi: typeFichier,
    donnees_brutes: JSON.stringify(ligneExcel)
  };
  
  for (const [cle, valeur] of Object.entries(ligneExcel)) {
    if (valeur === null || valeur === undefined || valeur === '') continue;
    
    const colonneNormalisee = normaliserColonne(cle);
    
    // Conversion des dates Excel
    if (colonneNormalisee === 'date_operation') {
      if (typeof valeur === 'number') {
        const date = XLSX.SSF.parse_date_code(valeur);
        donneeNormalisee.date_operation = new Date(date.y, date.m - 1, date.d);
      } else if (valeur instanceof Date) {
        donneeNormalisee.date_operation = valeur;
      } else {
        const parsed = new Date(valeur);
        if (!isNaN(parsed)) {
          donneeNormalisee.date_operation = parsed;
        }
      }
    }
    // Conversion des nombres
    else if (['montant', 'prix_unitaire', 'quantite_litres', 'km_depart', 
              'km_arrivee', 'km_journalier', 'compteur_actuel', 'compteur_precedent',
              'heures_fonctionnement'].includes(colonneNormalisee)) {
      const nombre = parseFloat(String(valeur).replace(/[^0-9.-]/g, ''));
      if (!isNaN(nombre)) {
        donneeNormalisee[colonneNormalisee] = nombre;
      }
    }
    else {
      donneeNormalisee[colonneNormalisee] = String(valeur).trim();
    }
  }
  
  return donneeNormalisee;
}

function validerEtCalculer(donnee) {
  const erreurs = [];
  
  // Calcul km_entre_repleins
  if (donnee.compteur_actuel && donnee.compteur_precedent) {
    donnee.km_entre_repleins = donnee.compteur_actuel - donnee.compteur_precedent;
    
    if (donnee.km_entre_repleins < 0) {
      erreurs.push('KM entre repleins nÃ©gatif');
    }
  }
  
  // Calcul km_arrivee si manquant
  if (!donnee.km_arrivee && donnee.km_depart && donnee.km_journalier) {
    donnee.km_arrivee = donnee.km_depart + donnee.km_journalier;
  }
  
  // Calcul de la consommation
  if (donnee.quantite_litres && donnee.km_entre_repleins && donnee.km_entre_repleins > 0) {
    donnee.consommation_aux_100 = (donnee.quantite_litres / donnee.km_entre_repleins) * 100;
  }
  
  // DÃ©termination replein
  if (donnee.montant) {
    donnee.est_replein = donnee.montant >= 200000;
  }
  
  // Validations
  if (donnee.km_journalier && donnee.km_journalier >= 120) {
    erreurs.push('KM journalier >= 120 (limite dÃ©passÃ©e)');
  }
  
  if (donnee.consommation_aux_100) {
    if (donnee.consommation_aux_100 < 15) {
      erreurs.push(`Consommation ${donnee.consommation_aux_100.toFixed(2)} L/100km < 15`);
    }
    if (donnee.consommation_aux_100 >= 16) {
      erreurs.push(`Consommation ${donnee.consommation_aux_100.toFixed(2)} L/100km >= 16`);
    }
  }
  
  if (!donnee.date_operation) {
    donnee.date_operation = new Date();
  }
  
  return { donnee, erreurs };
}

// ============================================
// ENDPOINT IMPORT EXCEL AMÃ‰LIORÃ‰
// ============================================

router.post('/import-excel', 
  authentifier, 
  verifierRole('logistique', 'admin'),
  upload.single('fichier'), 
  async (req, res) => {
    const client = await pool.connect();
    
    try {
      if (!req.file) {
        return res.status(400).json({ 
          error: 'Aucun fichier fourni',
          message: 'Veuillez sÃ©lectionner un fichier Excel' 
        });
      }
      
      const buffer = req.file.buffer;
      const nomFichier = req.file.originalname;
      const batchId = uuidv4();
      
      console.log(`\n${'='.repeat(60)}`);
      console.log(`DÃ©but import: ${nomFichier}`);
      console.log(`Batch ID: ${batchId}`);
      console.log(`${'='.repeat(60)}\n`);
      
      // Lecture du fichier Excel - TOUTES LES FEUILLES
      const workbook = XLSX.read(buffer, { 
        type: 'buffer', 
        cellDates: true,
        dateNF: 'dd/mm/yyyy'
      });
      
      console.log(`ðŸ“Š Feuilles trouvÃ©es: ${workbook.SheetNames.join(', ')}\n`);
      
      await client.query('BEGIN');
      
      const resultatGlobal = {
        succes: 0,
        erreurs: 0,
        avertissements: 0,
        details: [],
        parFeuille: {}
      };
      
      // PARCOURIR TOUTES LES FEUILLES
      for (const nomFeuille of workbook.SheetNames) {
        console.log(`\nðŸ“„ Traitement de la feuille: "${nomFeuille}"`);
        
        const feuille = workbook.Sheets[nomFeuille];
        const donnees = XLSX.utils.sheet_to_json(feuille);
        
        if (donnees.length === 0) {
          console.log(`âš ï¸  Feuille vide, ignorÃ©e\n`);
          continue;
        }
        
        // DÃ©tection du type pour cette feuille
        const typeFichier = detecterTypeFeuille(donnees, nomFeuille);
        console.log(`ðŸ” Type dÃ©tectÃ©: ${typeFichier}`);
        console.log(`ðŸ“Š Nombre de lignes: ${donnees.length}\n`);
        
        resultatGlobal.parFeuille[nomFeuille] = {
          type: typeFichier,
          lignes: donnees.length,
          succes: 0,
          erreurs: 0,
          avertissements: 0
        };
        
        // Traiter chaque ligne de cette feuille
        for (let i = 0; i < donnees.length; i++) {
          const ligneExcel = donnees[i];
          
          try {
            // Normalisation
            let donneeNormalisee = normaliserDonnees(ligneExcel, typeFichier);
            
            // Validation et calculs
            const { donnee, erreurs } = validerEtCalculer(donneeNormalisee);
            donneeNormalisee = donnee;
            donneeNormalisee.import_batch_id = batchId;
            donneeNormalisee.nom_feuille = nomFeuille;
            
            // Insertion en base
            const query = `
              INSERT INTO suivi_carburant (
                type_suivi, date_operation, immatriculation, numero_equipement,
                marque, modele, montant, prix_unitaire, quantite_litres,
                type_carburant, km_depart, km_arrivee, km_journalier,
                compteur_actuel, compteur_precedent, km_entre_repleins,
                consommation_aux_100, est_replein, commentaire,
                donnees_brutes, import_batch_id
              ) VALUES (
                $1, $2, $3, $4, $5, $6, $7, $8, $9, $10,
                $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21
              ) RETURNING id
            `;
            
            const values = [
              donneeNormalisee.type_suivi,
              donneeNormalisee.date_operation,
              donneeNormalisee.immatriculation || null,
              donneeNormalisee.numero_equipement || null,
              donneeNormalisee.marque || null,
              donneeNormalisee.modele || null,
              donneeNormalisee.montant || null,
              donneeNormalisee.prix_unitaire || null,
              donneeNormalisee.quantite_litres || null,
              donneeNormalisee.type_carburant || 'essence',
              donneeNormalisee.km_depart || null,
              donneeNormalisee.km_arrivee || null,
              donneeNormalisee.km_journalier || null,
              donneeNormalisee.compteur_actuel || null,
              donneeNormalisee.compteur_precedent || null,
              donneeNormalisee.km_entre_repleins || null,
              donneeNormalisee.consommation_aux_100 || null,
              donneeNormalisee.est_replein || false,
              donneeNormalisee.commentaire || null,
              donneeNormalisee.donnees_brutes,
              batchId
            ];
            
            const result = await client.query(query, values);
            
            // CrÃ©er des alertes si erreurs
            if (erreurs.length > 0) {
              for (const erreur of erreurs) {
                await client.query(`
                  INSERT INTO alertes_carburant (suivi_id, type_alerte, severite, message)
                  VALUES ($1, 'validation', 'warning', $2)
                `, [result.rows[0].id, erreur]);
              }
              resultatGlobal.avertissements++;
              resultatGlobal.parFeuille[nomFeuille].avertissements++;
              resultatGlobal.details.push({
                feuille: nomFeuille,
                ligne: i + 2,
                statut: 'warning',
                message: 'ImportÃ© avec avertissements',
                erreurs: erreurs
              });
            } else {
              resultatGlobal.succes++;
              resultatGlobal.parFeuille[nomFeuille].succes++;
            }
            
          } catch (error) {
            resultatGlobal.erreurs++;
            resultatGlobal.parFeuille[nomFeuille].erreurs++;
            resultatGlobal.details.push({
              feuille: nomFeuille,
              ligne: i + 2,
              statut: 'error',
              message: 'Erreur lors de l\'import',
              erreurs: [error.message]
            });
          }
        }
        
        console.log(`âœ… Feuille "${nomFeuille}" traitÃ©e:`);
        console.log(`   - SuccÃ¨s: ${resultatGlobal.parFeuille[nomFeuille].succes}`);
        console.log(`   - Avertissements: ${resultatGlobal.parFeuille[nomFeuille].avertissements}`);
        console.log(`   - Erreurs: ${resultatGlobal.parFeuille[nomFeuille].erreurs}`);
      }
      
      // Enregistrer l'import global
      await client.query(`
        INSERT INTO imports_excel (batch_id, nom_fichier, type_fichier, nombre_lignes, statut, details_erreurs)
        VALUES ($1, $2, 'multi-feuilles', $3, 'termine', $4)
      `, [
        batchId, 
        nomFichier, 
        resultatGlobal.succes + resultatGlobal.erreurs + resultatGlobal.avertissements,
        JSON.stringify(resultatGlobal.parFeuille)
      ]);
      
      await client.query('COMMIT');
      
      console.log(`\n${'='.repeat(60)}`);
      console.log(`Import terminÃ© avec succÃ¨s!`);
      console.log(`Total: ${resultatGlobal.succes} succÃ¨s, ${resultatGlobal.avertissements} avertissements, ${resultatGlobal.erreurs} erreurs`);
      console.log(`${'='.repeat(60)}\n`);
      
      res.json({
        success: true,
        message: 'Import terminÃ©',
        batchId,
        nomFichier,
        nombreFeuilles: workbook.SheetNames.length,
        feuilles: workbook.SheetNames,
        resultats: {
          total: resultatGlobal.succes + resultatGlobal.erreurs + resultatGlobal.avertissements,
          succes: resultatGlobal.succes,
          avertissements: resultatGlobal.avertissements,
          erreurs: resultatGlobal.erreurs
        },
        parFeuille: resultatGlobal.parFeuille,
        details: resultatGlobal.details.slice(0, 50) // Limiter les dÃ©tails pour la rÃ©ponse
      });
      
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('âŒ Erreur import:', error);
      res.status(500).json({
        success: false,
        message: 'Erreur lors de l\'import',
        error: error.message
      });
    } finally {
      client.release();
    }
});

// Autres endpoints...
router.get('/imports', authentifier, async (req, res) => {
  try {
    const result = await pool.query(`
      SELECT * FROM imports_excel
      ORDER BY created_at DESC
      LIMIT 50
    `);
    
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration imports:', error);
    res.status(500).json({ error: error.message });
  }
});

router.get('/imports/:batchId', authentifier, async (req, res) => {
  try {
    const { batchId } = req.params;
    
    const importResult = await pool.query(
      'SELECT * FROM imports_excel WHERE batch_id = $1',
      [batchId]
    );
    
    if (importResult.rows.length === 0) {
      return res.status(404).json({ error: 'Import non trouvÃ©' });
    }
    
    const donnees = await pool.query(
      'SELECT * FROM suivi_carburant WHERE import_batch_id = $1 ORDER BY created_at',
      [batchId]
    );
    
    res.json({ 
      success: true, 
      import: importResult.rows[0],
      donnees: donnees.rows,
      count: donnees.rows.length
    });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration dÃ©tails import:', error);
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/routes/pdf.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/routes/pdf.js
const express = require('express');
const router = express.Router();
const PDFDocument = require('pdfkit');
const fs = require('fs');
const path = require('path');
const pool = require('../config/database');
const { authentifier } = require('../middleware/auth');

// CrÃ©er le dossier pdfs s'il n'existe pas
const pdfsDir = path.join(__dirname, '../../pdfs');
if (!fs.existsSync(pdfsDir)) {
  fs.mkdirSync(pdfsDir, { recursive: true });
}

// ============================================
// GÃ‰NÃ‰RATION PDF DEMANDE CARBURANT
// ============================================

async function genererDemandeCarburantPDF(demande, outputPath) {
  return new Promise((resolve, reject) => {
    try {
      const doc = new PDFDocument({ size: 'A4', margin: 50 });
      const stream = fs.createWriteStream(outputPath);
      doc.pipe(stream);

      // En-tÃªte
      doc.fontSize(10)
         .text('CEP', 50, 50)
         .text('PRIRTEM', 50, 65);

      doc.fontSize(10)
         .text(`NÂ° ${demande.numero_demande}`, 500, 50, { align: 'right' });

      // Titre centrÃ©
      doc.fontSize(16)
         .font('Helvetica-Bold')
         .text('DEMANDE DE CARBURANT', 0, 150, { align: 'center' });

      // Cases SERVICE / MISSION
      const yPos = 200;
      const boxWidth = 15;
      const boxHeight = 15;

      doc.fontSize(12).font('Helvetica');
      
      // Case SERVICE
      doc.rect(150, yPos, boxWidth, boxHeight).stroke();
      if (demande.type_demande === 'service') {
        doc.fontSize(14).text('X', 153, yPos, { width: 10 });
      }
      doc.fontSize(12).text('SERVICE', 170, yPos + 2);

      // Case MISSION
      doc.rect(350, yPos, boxWidth, boxHeight).stroke();
      if (demande.type_demande === 'mission') {
        doc.fontSize(14).text('X', 353, yPos, { width: 10 });
      }
      doc.fontSize(12).text('MISSION', 370, yPos + 2);

      // Objet
      doc.fontSize(11)
         .text('OBJET :', 50, yPos + 50);
      doc.rect(50, yPos + 65, 500, 60).stroke();
      doc.fontSize(10)
         .text(demande.objet, 55, yPos + 75, { width: 490, align: 'left' });

      // Montant prÃ©visionnel
      doc.fontSize(11)
         .text('Montant prÃ©visionnel (en chiffre) :', 50, yPos + 140);
      doc.rect(300, yPos + 135, 200, 20).stroke();
      doc.fontSize(10)
         .text(`${parseFloat(demande.montant_previsionnel).toLocaleString('fr-FR')} Ar`, 305, yPos + 140);

      doc.fontSize(11)
         .text('(en lettre) :', 50, yPos + 170);
      doc.rect(120, yPos + 165, 430, 25).stroke();
      doc.fontSize(9)
         .text(demande.montant_en_lettre || '', 125, yPos + 172, { width: 420 });

      // Date
      const dateFormatee = new Date(demande.date_demande).toLocaleDateString('fr-FR');
      doc.fontSize(10)
         .text(`Date : ${dateFormatee}`, 400, yPos + 210);

      // Tableau des signatures
      const tableY = yPos + 250;
      const tableHeight = 100;
      const col1Width = 180;
      const col2Width = 180;
      const col3Width = 180;

      // En-tÃªtes du tableau
      doc.rect(50, tableY, col1Width, 30).stroke();
      doc.rect(50 + col1Width, tableY, col2Width, 30).stroke();
      doc.rect(50 + col1Width + col2Width, tableY, col3Width, 30).stroke();

      doc.fontSize(10).font('Helvetica-Bold');
      doc.text('Le Demandeur', 55, tableY + 10, { width: col1Width - 10, align: 'center' });
      doc.text('VÃ©rifiÃ© par : A/Logistique', 55 + col1Width, tableY + 10, { width: col2Width - 10, align: 'center' });
      doc.text('VisÃ© par : Le RAF', 55 + col1Width + col2Width, tableY + 10, { width: col3Width - 10, align: 'center' });

      // Corps du tableau
      doc.rect(50, tableY + 30, col1Width, tableHeight).stroke();
      doc.rect(50 + col1Width, tableY + 30, col2Width, tableHeight).stroke();
      doc.rect(50 + col1Width + col2Width, tableY + 30, col3Width, tableHeight).stroke();

      // Informations demandeur
      doc.fontSize(9).font('Helvetica');
      doc.text(`${demande.demandeur_nom} ${demande.demandeur_prenom}`, 55, tableY + 40, { width: col1Width - 10 });
      if (demande.service) {
        doc.fontSize(8).text(demande.service, 55, tableY + 55, { width: col1Width - 10 });
      }

      // Ajouter les informations de vÃ©rification si disponibles
      if (demande.verifie_par_logistique) {
        doc.fontSize(9).font('Helvetica');
        const dateVerif = new Date(demande.date_verification_logistique).toLocaleDateString('fr-FR');
        doc.text(`VÃ©rifiÃ© le ${dateVerif}`, 55 + col1Width, tableY + 40, { width: col2Width - 10 });
        
        const statutLogistique = demande.statut.includes('rejete_logistique') ? 'REJETÃ‰' : 'APPROUVÃ‰';
        doc.font('Helvetica-Bold').text(statutLogistique, 55 + col1Width, tableY + 55, { width: col2Width - 10 });
        
        if (demande.commentaire_logistique) {
          doc.fontSize(8).font('Helvetica').text(demande.commentaire_logistique, 55 + col1Width, tableY + 70, { width: col2Width - 10 });
        }
      }

      if (demande.vise_par_raf) {
        doc.fontSize(9).font('Helvetica');
        const dateVisa = new Date(demande.date_visa_raf).toLocaleDateString('fr-FR');
        doc.text(`VisÃ© le ${dateVisa}`, 55 + col1Width + col2Width, tableY + 40, { width: col3Width - 10 });
        
        const statutRAF = demande.statut === 'valide' ? 'VALIDÃ‰' : demande.statut.includes('rejete_raf') ? 'REJETÃ‰' : '';
        if (statutRAF) {
          doc.font('Helvetica-Bold').text(statutRAF, 55 + col1Width + col2Width, tableY + 55, { width: col3Width - 10 });
        }
        
        if (demande.commentaire_raf) {
          doc.fontSize(8).font('Helvetica').text(demande.commentaire_raf, 55 + col1Width + col2Width, tableY + 70, { width: col3Width - 10 });
        }
      }

      // Tampon "VALIDE" ou "REJETÃ‰"
      if (demande.statut === 'valide') {
        doc.fontSize(48)
           .font('Helvetica-Bold')
           .fillColor('green')
           .opacity(0.3)
           .rotate(-30, { origin: [300, 500] })
           .text('VALIDÃ‰', 200, 450);
      } else if (demande.statut.includes('rejete')) {
        doc.fontSize(48)
           .font('Helvetica-Bold')
           .fillColor('red')
           .opacity(0.3)
           .rotate(-30, { origin: [300, 500] })
           .text('REJETÃ‰', 200, 450);
      }

      doc.end();
      
      stream.on('finish', () => resolve(outputPath));
      stream.on('error', reject);
    } catch (error) {
      reject(error);
    }
  });
}

// ============================================
// GÃ‰NÃ‰RATION PDF AUTORISATION SORTIE
// ============================================

async function genererAutorisationSortiePDF(demande, outputPath) {
  return new Promise((resolve, reject) => {
    try {
      const doc = new PDFDocument({ 
        size: 'A4', 
        margin: 30,
        layout: 'landscape'
      });
      const stream = fs.createWriteStream(outputPath);
      doc.pipe(stream);

      const pageWidth = doc.page.width;
      const midX = pageWidth / 2;

      // ========== PARTIE GAUCHE - DEMANDE ==========
      doc.fontSize(10)
         .text('CEP', 40, 40)
         .text('PRIRTEM', 40, 55)
         .fontSize(12)
         .font('Helvetica-Bold')
         .text('DEMANDE DE VOITURE', 40, 90);

      let yPos = 120;
      doc.fontSize(9).font('Helvetica');
      
      doc.text('Date proposÃ©e :', 40, yPos);
      const dateProposee = new Date(demande.date_proposee).toLocaleDateString('fr-FR');
      doc.rect(130, yPos - 3, 120, 15).stroke();
      doc.text(dateProposee, 135, yPos);

      yPos += 25;
      doc.text('Objet :', 40, yPos);
      doc.rect(40, yPos + 12, 220, 40).stroke();
      doc.fontSize(8).text(demande.objet, 45, yPos + 17, { width: 210, align: 'left' });

      yPos += 60;
      doc.fontSize(9).text('ItinÃ©raire :', 40, yPos);
      doc.rect(40, yPos + 12, 220, 40).stroke();
      doc.fontSize(8).text(demande.itineraire || '-', 45, yPos + 17, { width: 210 });

      yPos += 60;
      doc.fontSize(9).text('Personnes transportÃ©es:', 40, yPos);
      doc.rect(40, yPos + 12, 220, 30).stroke();
      doc.fontSize(8).text(demande.personnes_transportees || '-', 45, yPos + 17, { width: 210 });

      yPos += 45;
      doc.fontSize(9).text('Heure de dÃ©part souhaitÃ©e :', 40, yPos);
      doc.rect(170, yPos - 3, 90, 15).stroke();
      doc.text(demande.heure_depart_souhaitee || '-', 175, yPos);

      yPos += 20;
      doc.text('Heure probable de retour :', 40, yPos);
      doc.rect(170, yPos - 3, 90, 15).stroke();
      doc.text(demande.heure_retour_probable || '-', 175, yPos);

      yPos += 20;
      doc.text('Immatriculation :', 40, yPos);
      doc.rect(130, yPos - 3, 130, 15).stroke();
      doc.text(demande.immatriculation || '-', 135, yPos);

      yPos += 20;
      doc.text('Chauffeur :', 40, yPos);
      doc.rect(110, yPos - 3, 150, 15).stroke();
      const chauffeur = demande.chauffeur_nom ? `${demande.chauffeur_nom} ${demande.chauffeur_prenom}` : '-';
      doc.fontSize(8).text(chauffeur, 115, yPos + 1);

      yPos += 30;
      doc.fontSize(9).text('Date :', 40, yPos);
      doc.fontSize(8).text('Le Demandeur,', 40, yPos + 15);

      // Ligne de sÃ©paration
      doc.moveTo(midX - 10, 30)
         .lineTo(midX - 10, doc.page.height - 30)
         .dash(5, { space: 5 })
         .stroke()
         .undash();

      // ========== PARTIE DROITE - AUTORISATION ==========
      const rightX = midX + 10;
      
      doc.fontSize(10)
         .text('CEP', rightX, 40)
         .text('PRIRTEM', rightX, 55)
         .text(`NÂ° ${demande.numero_demande}`, doc.page.width - 150, 40, { align: 'right' });

      doc.fontSize(12)
         .font('Helvetica-Bold')
         .text('AUTORISATION SORTIE', rightX, 90, { width: 380 })
         .text('DE VOITURE', rightX, 105, { width: 380 });

      yPos = 140;
      doc.fontSize(9).font('Helvetica');
      
      doc.text('Date:', rightX, yPos);
      doc.rect(rightX + 50, yPos - 3, 150, 15).stroke();
      doc.text(dateProposee, rightX + 55, yPos);

      yPos += 22;
      doc.text('Heure :', rightX, yPos);
      doc.rect(rightX + 50, yPos - 3, 150, 15).stroke();
      doc.text(demande.heure_depart_souhaitee || '-', rightX + 55, yPos);

      yPos += 22;
      doc.text('Immatriculation :', rightX, yPos);
      doc.rect(rightX + 90, yPos - 3, 110, 15).stroke();
      doc.fontSize(10).font('Helvetica-Bold').text(demande.immatriculation || '-', rightX + 95, yPos);

      yPos += 22;
      doc.fontSize(9).font('Helvetica').text('Chauffeur :', rightX, yPos);
      doc.rect(rightX + 60, yPos - 3, 140, 15).stroke();
      doc.fontSize(8).text(chauffeur, rightX + 65, yPos + 1);

      yPos += 22;
      doc.fontSize(9).text('ItinÃ©raire :', rightX, yPos);
      doc.rect(rightX + 60, yPos - 3, 140, 40).stroke();
      doc.fontSize(8).text(demande.itineraire || '-', rightX + 65, yPos + 2, { width: 130 });

      // Tableau visa/approbation
      yPos += 60;
      const tableWidth = 280;
      const colWidth = tableWidth / 2;
      const tableHeight = 120;

      // En-tÃªtes
      doc.rect(rightX, yPos, colWidth, 25).stroke();
      doc.rect(rightX + colWidth, yPos, colWidth, 25).stroke();

      doc.fontSize(9).font('Helvetica-Bold');
      doc.text('Visa A/Logistique', rightX + 20, yPos + 8);
      doc.text('ApprouvÃ©e par Le RAF', rightX + colWidth + 15, yPos + 8);

      // Corps
      doc.rect(rightX, yPos + 25, colWidth, tableHeight).stroke();
      doc.rect(rightX + colWidth, yPos + 25, colWidth, tableHeight).stroke();

      doc.fontSize(8).font('Helvetica');
      
      if (demande.verifie_par_logistique) {
        const dateVerif = new Date(demande.date_verification_logistique).toLocaleDateString('fr-FR');
        doc.text(`VÃ©rifiÃ© le ${dateVerif}`, rightX + 5, yPos + 35, { width: colWidth - 10 });
        doc.text(demande.verificateur_nom || '', rightX + 5, yPos + 50, { width: colWidth - 10 });
        
        if (demande.commentaire_logistique) {
          doc.text(demande.commentaire_logistique, rightX + 5, yPos + 65, { width: colWidth - 10 });
        }
      }

      if (demande.approuve_par_raf) {
        const dateApprob = new Date(demande.date_approbation_raf).toLocaleDateString('fr-FR');
        doc.text(`ApprouvÃ© le ${dateApprob}`, rightX + colWidth + 5, yPos + 35, { width: colWidth - 10 });
        doc.text(demande.approbateur_nom || '', rightX + colWidth + 5, yPos + 50, { width: colWidth - 10 });
        
        if (demande.commentaire_raf) {
          doc.text(demande.commentaire_raf, rightX + colWidth + 5, yPos + 65, { width: colWidth - 10 });
        }
      }

      // Tampon VALIDE
      if (demande.statut === 'valide') {
        doc.fontSize(42)
           .font('Helvetica-Bold')
           .fillColor('green')
           .opacity(0.25)
           .rotate(-25, { origin: [rightX + 140, yPos + 70] })
           .text('VALIDE', rightX + 60, yPos + 40);
      }

      doc.end();
      
      stream.on('finish', () => resolve(outputPath));
      stream.on('error', reject);
    } catch (error) {
      reject(error);
    }
  });
}

// ============================================
// ENDPOINTS
// ============================================

// GÃ©nÃ©rer PDF demande carburant
router.get('/demandes-carburant/:id/pdf', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT 
        dc.*,
        u.nom as demandeur_nom,
        u.prenom as demandeur_prenom,
        u.service,
        vl.nom as verificateur_nom,
        vl.prenom as verificateur_prenom,
        vr.nom as visa_nom,
        vr.prenom as visa_prenom
      FROM demandes_carburant dc
      JOIN utilisateurs u ON dc.demandeur_id = u.id
      LEFT JOIN utilisateurs vl ON dc.verifie_par_logistique = vl.id
      LEFT JOIN utilisateurs vr ON dc.vise_par_raf = vr.id
      WHERE dc.id = $1
    `, [id]);
    
    if (result.rows.length === 0) {
      return res.status(404).json({ error: 'Demande non trouvÃ©e' });
    }
    
    const demande = result.rows[0];
    const fileName = `demande_carburant_${demande.numero_demande}.pdf`;
    const outputPath = path.join(pdfsDir, fileName);
    
    await genererDemandeCarburantPDF(demande, outputPath);
    
    res.download(outputPath, fileName, (err) => {
      if (err) {
        console.error('Erreur tÃ©lÃ©chargement PDF:', err);
      }
      // Optionnel: supprimer le fichier aprÃ¨s tÃ©lÃ©chargement
      // fs.unlinkSync(outputPath);
    });
  } catch (error) {
    console.error('Erreur gÃ©nÃ©ration PDF carburant:', error);
    res.status(500).json({ error: error.message });
  }
});

// GÃ©nÃ©rer PDF autorisation sortie
router.get('/demandes-voiture/:id/pdf', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT 
        dv.*,
        u.nom as demandeur_nom,
        u.prenom as demandeur_prenom,
        u.service,
        v.immatriculation,
        v.marque,
        v.modele,
        uc.nom as chauffeur_nom,
        uc.prenom as chauffeur_prenom,
        vl.nom as verificateur_nom,
        vr.nom as approbateur_nom
      FROM demandes_voiture dv
      JOIN utilisateurs u ON dv.demandeur_id = u.id
      LEFT JOIN vehicules v ON dv.vehicule_id = v.id
      LEFT JOIN chauffeurs c ON dv.chauffeur_id = c.id
      LEFT JOIN utilisateurs uc ON c.utilisateur_id = uc.id
      LEFT JOIN utilisateurs vl ON dv.verifie_par_logistique = vl.id
      LEFT JOIN utilisateurs vr ON dv.approuve_par_raf = vr.id
      WHERE dv.id = $1
    `, [id]);
    
    if (result.rows.length === 0) {
      return res.status(404).json({ error: 'Demande non trouvÃ©e' });
    }
    
    const demande = result.rows[0];
    const fileName = `autorisation_sortie_${demande.numero_demande}.pdf`;
    const outputPath = path.join(pdfsDir, fileName);
    
    await genererAutorisationSortiePDF(demande, outputPath);
    
    res.download(outputPath, fileName, (err) => {
      if (err) {
        console.error('Erreur tÃ©lÃ©chargement PDF:', err);
      }
    });
  } catch (error) {
    console.error('Erreur gÃ©nÃ©ration PDF autorisation:', error);
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/routes/demandes.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/routes/demandes.js
const express = require('express');
const router = express.Router();
const pool = require('../config/database');
// Auth dÃ©sactivÃ©e pour DEV
const authentifier = (req, res, next) => { 
  req.user = { id: 1, role: 'admin', email: 'admin@prirtem.mg' }; 
  next(); 
};
const verifierRole = (...roles) => (req, res, next) => next();

// ============================================
// DEMANDES DE CARBURANT
// ============================================

// CrÃ©er une demande de carburant
router.post('/demandes-carburant', authentifier, async (req, res) => {
  const client = await pool.connect();
  try {
    const { type_demande, objet, montant_previsionnel, montant_en_lettre } = req.body;
    
    // Validation
    if (!type_demande || !objet || !montant_previsionnel) {
      return res.status(400).json({ 
        error: 'Champs requis manquants',
        required: ['type_demande', 'objet', 'montant_previsionnel']
      });
    }

    await client.query('BEGIN');
    
    const result = await client.query(`
      INSERT INTO demandes_carburant (
        demandeur_id, type_demande, objet, 
        montant_previsionnel, montant_en_lettre, statut
      ) VALUES ($1, $2, $3, $4, $5, 'en_attente_logistique')
      RETURNING *
    `, [req.user.id, type_demande, objet, montant_previsionnel, montant_en_lettre || '']);
    
    // GÃ©nÃ©rer le numÃ©ro de demande
    const demande = result.rows[0];
    await client.query(`
      UPDATE demandes_carburant 
      SET numero_demande = $1 
      WHERE id = $2
    `, [`DC-${new Date().toISOString().slice(0,10).replace(/-/g,'')}-${String(demande.id).padStart(4, '0')}`, demande.id]);
    
    await client.query('COMMIT');
    
    // RÃ©cupÃ©rer la demande mise Ã  jour
    const finalResult = await client.query('SELECT * FROM demandes_carburant WHERE id = $1', [demande.id]);
    
    res.status(201).json({ 
      success: true, 
      message: 'Demande crÃ©Ã©e avec succÃ¨s',
      demande: finalResult.rows[0] 
    });
  } catch (error) {
    await client.query('ROLLBACK');
    console.error('Erreur crÃ©ation demande carburant:', error);
    res.status(500).json({ error: error.message });
  } finally {
    client.release();
  }
});

// RÃ©cupÃ©rer les demandes de carburant
router.get('/demandes-carburant', authentifier, async (req, res) => {
  try {
    const { statut, date_debut, date_fin } = req.query;
    
    let query = `
      SELECT 
        dc.*,
        u.nom as demandeur_nom,
        u.prenom as demandeur_prenom,
        u.service,
        vl.nom as verificateur_nom,
        vl.prenom as verificateur_prenom,
        vr.nom as visa_nom,
        vr.prenom as visa_prenom
      FROM demandes_carburant dc
      JOIN utilisateurs u ON dc.demandeur_id = u.id
      LEFT JOIN utilisateurs vl ON dc.verifie_par_logistique = vl.id
      LEFT JOIN utilisateurs vr ON dc.vise_par_raf = vr.id
      WHERE 1=1
    `;
    
    const params = [];
    let paramCount = 1;
    
    // Filtrer selon le rÃ´le
    if (req.user.role === 'demandeur') {
      query += ` AND dc.demandeur_id = $${paramCount++}`;
      params.push(req.user.id);
    } else if (req.user.role === 'logistique') {
      query += ` AND dc.statut IN ('en_attente_logistique', 'approuve_logistique')`;
    } else if (req.user.role === 'raf') {
      query += ` AND dc.statut IN ('en_attente_raf', 'approuve_raf')`;
    }
    
    // Filtres additionnels
    if (statut) {
      query += ` AND dc.statut = $${paramCount++}`;
      params.push(statut);
    }
    
    if (date_debut) {
      query += ` AND dc.date_demande >= $${paramCount++}`;
      params.push(date_debut);
    }
    
    if (date_fin) {
      query += ` AND dc.date_demande <= $${paramCount++}`;
      params.push(date_fin);
    }
    
    query += ' ORDER BY dc.created_at DESC';
    
    const result = await pool.query(query, params);
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration demandes:', error);
    res.status(500).json({ error: error.message });
  }
});

// RÃ©cupÃ©rer une demande spÃ©cifique
router.get('/demandes-carburant/:id', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT 
        dc.*,
        u.nom as demandeur_nom,
        u.prenom as demandeur_prenom,
        u.service,
        u.email as demandeur_email,
        vl.nom as verificateur_nom,
        vl.prenom as verificateur_prenom,
        vr.nom as visa_nom,
        vr.prenom as visa_prenom
      FROM demandes_carburant dc
      JOIN utilisateurs u ON dc.demandeur_id = u.id
      LEFT JOIN utilisateurs vl ON dc.verifie_par_logistique = vl.id
      LEFT JOIN utilisateurs vr ON dc.vise_par_raf = vr.id
      WHERE dc.id = $1
    `, [id]);
    
    if (result.rows.length === 0) {
      return res.status(404).json({ error: 'Demande non trouvÃ©e' });
    }
    
    res.json({ success: true, data: result.rows[0] });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration demande:', error);
    res.status(500).json({ error: error.message });
  }
});

// VÃ©rification par logistique
router.put('/demandes-carburant/:id/verifier', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      const { approuve, commentaire } = req.body;
      
      if (typeof approuve !== 'boolean') {
        return res.status(400).json({ 
          error: 'Le champ "approuve" est requis et doit Ãªtre un boolean' 
        });
      }
      
      await client.query('BEGIN');
      
      const nouveauStatut = approuve ? 'en_attente_raf' : 'rejete_logistique';
      
      const result = await client.query(`
        UPDATE demandes_carburant
        SET 
          statut = $1,
          verifie_par_logistique = $2,
          date_verification_logistique = CURRENT_TIMESTAMP,
          commentaire_logistique = $3,
          updated_at = CURRENT_TIMESTAMP
        WHERE id = $4 AND statut = 'en_attente_logistique'
        RETURNING *
      `, [nouveauStatut, req.user.id, commentaire || null, id]);
      
      if (result.rows.length === 0) {
        await client.query('ROLLBACK');
        return res.status(404).json({ 
          error: 'Demande non trouvÃ©e ou dÃ©jÃ  traitÃ©e' 
        });
      }
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: approuve ? 'Demande approuvÃ©e et envoyÃ©e au RAF' : 'Demande rejetÃ©e',
        demande: result.rows[0] 
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur vÃ©rification demande:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// Visa par RAF
router.put('/demandes-carburant/:id/viser', 
  authentifier, 
  verifierRole('raf', 'admin'), 
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      const { approuve, commentaire } = req.body;
      
      if (typeof approuve !== 'boolean') {
        return res.status(400).json({ 
          error: 'Le champ "approuve" est requis et doit Ãªtre un boolean' 
        });
      }
      
      await client.query('BEGIN');
      
      const nouveauStatut = approuve ? 'valide' : 'rejete_raf';
      
      const result = await client.query(`
        UPDATE demandes_carburant
        SET 
          statut = $1,
          vise_par_raf = $2,
          date_visa_raf = CURRENT_TIMESTAMP,
          commentaire_raf = $3,
          updated_at = CURRENT_TIMESTAMP
        WHERE id = $4 AND statut = 'en_attente_raf'
        RETURNING *
      `, [nouveauStatut, req.user.id, commentaire || null, id]);
      
      if (result.rows.length === 0) {
        await client.query('ROLLBACK');
        return res.status(404).json({ 
          error: 'Demande non trouvÃ©e ou dÃ©jÃ  traitÃ©e' 
        });
      }
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: approuve ? 'Demande validÃ©e avec succÃ¨s' : 'Demande rejetÃ©e',
        demande: result.rows[0] 
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur visa demande:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// ============================================
// DEMANDES DE VOITURE
// ============================================

// CrÃ©er une demande de voiture
router.post('/demandes-voiture', authentifier, async (req, res) => {
  const client = await pool.connect();
  try {
    const {
      date_proposee, objet, itineraire, personnes_transportees,
      heure_depart_souhaitee, heure_retour_probable
    } = req.body;
    
    // Validation
    if (!date_proposee || !objet) {
      return res.status(400).json({ 
        error: 'Champs requis manquants',
        required: ['date_proposee', 'objet']
      });
    }

    await client.query('BEGIN');
    
    const result = await client.query(`
      INSERT INTO demandes_voiture (
        demandeur_id, date_proposee, objet, itineraire,
        personnes_transportees, heure_depart_souhaitee,
        heure_retour_probable, statut
      ) VALUES ($1, $2, $3, $4, $5, $6, $7, 'en_attente_logistique')
      RETURNING *
    `, [req.user.id, date_proposee, objet, itineraire || null, 
        personnes_transportees || null, heure_depart_souhaitee || null, 
        heure_retour_probable || null]);
    
    // GÃ©nÃ©rer le numÃ©ro de demande
    const demande = result.rows[0];
    await client.query(`
      UPDATE demandes_voiture 
      SET numero_demande = $1 
      WHERE id = $2
    `, [`DV-${new Date().toISOString().slice(0,10).replace(/-/g,'')}-${String(demande.id).padStart(4, '0')}`, demande.id]);
    
    await client.query('COMMIT');
    
    // RÃ©cupÃ©rer la demande mise Ã  jour
    const finalResult = await client.query('SELECT * FROM demandes_voiture WHERE id = $1', [demande.id]);
    
    res.status(201).json({ 
      success: true, 
      message: 'Demande crÃ©Ã©e avec succÃ¨s',
      demande: finalResult.rows[0] 
    });
  } catch (error) {
    await client.query('ROLLBACK');
    console.error('Erreur crÃ©ation demande voiture:', error);
    res.status(500).json({ error: error.message });
  } finally {
    client.release();
  }
});

// RÃ©cupÃ©rer les demandes de voiture
router.get('/demandes-voiture', authentifier, async (req, res) => {
  try {
    let query = `
      SELECT 
        dv.*,
        u.nom as demandeur_nom,
        u.prenom as demandeur_prenom,
        u.service,
        v.immatriculation,
        v.marque,
        v.modele,
        uc.nom as chauffeur_nom,
        uc.prenom as chauffeur_prenom,
        vl.nom as verificateur_nom,
        vr.nom as approbateur_nom
      FROM demandes_voiture dv
      JOIN utilisateurs u ON dv.demandeur_id = u.id
      LEFT JOIN vehicules v ON dv.vehicule_id = v.id
      LEFT JOIN chauffeurs c ON dv.chauffeur_id = c.id
      LEFT JOIN utilisateurs uc ON c.utilisateur_id = uc.id
      LEFT JOIN utilisateurs vl ON dv.verifie_par_logistique = vl.id
      LEFT JOIN utilisateurs vr ON dv.approuve_par_raf = vr.id
      WHERE 1=1
    `;
    
    const params = [];
    let paramCount = 1;
    
    if (req.user.role === 'demandeur') {
      query += ` AND dv.demandeur_id = $${paramCount++}`;
      params.push(req.user.id);
    } else if (req.user.role === 'logistique') {
      query += ` AND dv.statut IN ('en_attente_logistique', 'approuve_logistique')`;
    } else if (req.user.role === 'raf') {
      query += ` AND dv.statut IN ('en_attente_raf', 'approuve_raf')`;
    }
    
    query += ' ORDER BY dv.date_proposee ASC, dv.created_at DESC';
    
    const result = await pool.query(query, params);
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration demandes voiture:', error);
    res.status(500).json({ error: error.message });
  }
});

// Affecter vÃ©hicule et chauffeur (logistique)
router.put('/demandes-voiture/:id/affecter',
  authentifier,
  verifierRole('logistique', 'admin'),
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      const { vehicule_id, chauffeur_id, approuve, commentaire } = req.body;
      
      if (!vehicule_id || !chauffeur_id || typeof approuve !== 'boolean') {
        return res.status(400).json({ 
          error: 'Champs requis manquants',
          required: ['vehicule_id', 'chauffeur_id', 'approuve (boolean)']
        });
      }
      
      await client.query('BEGIN');
      
      const nouveauStatut = approuve ? 'en_attente_raf' : 'rejete_logistique';
      
      const result = await client.query(`
        UPDATE demandes_voiture
        SET 
          vehicule_id = $1,
          chauffeur_id = $2,
          statut = $3,
          verifie_par_logistique = $4,
          date_verification_logistique = CURRENT_TIMESTAMP,
          commentaire_logistique = $5,
          updated_at = CURRENT_TIMESTAMP
        WHERE id = $6 AND statut = 'en_attente_logistique'
        RETURNING *
      `, [vehicule_id, chauffeur_id, nouveauStatut, req.user.id, commentaire || null, id]);
      
      if (result.rows.length === 0) {
        await client.query('ROLLBACK');
        return res.status(404).json({ 
          error: 'Demande non trouvÃ©e ou dÃ©jÃ  traitÃ©e' 
        });
      }
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: approuve ? 'VÃ©hicule et chauffeur affectÃ©s, demande envoyÃ©e au RAF' : 'Demande rejetÃ©e',
        demande: result.rows[0] 
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur affectation:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// Approuver par RAF et gÃ©nÃ©rer autorisation
router.put('/demandes-voiture/:id/approuver',
  authentifier,
  verifierRole('raf', 'admin'),
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      const { approuve, commentaire } = req.body;
      
      if (typeof approuve !== 'boolean') {
        return res.status(400).json({ 
          error: 'Le champ "approuve" est requis et doit Ãªtre un boolean' 
        });
      }
      
      await client.query('BEGIN');
      
      const nouveauStatut = approuve ? 'valide' : 'rejete_raf';
      
      const result = await client.query(`
        UPDATE demandes_voiture
        SET 
          statut = $1,
          approuve_par_raf = $2,
          date_approbation_raf = CURRENT_TIMESTAMP,
          commentaire_raf = $3,
          date_autorisation = CASE WHEN $1 = 'valide' THEN CURRENT_TIMESTAMP ELSE NULL END,
          updated_at = CURRENT_TIMESTAMP
        WHERE id = $4 AND statut = 'en_attente_raf'
        RETURNING *
      `, [nouveauStatut, req.user.id, commentaire || null, id]);
      
      if (result.rows.length === 0) {
        await client.query('ROLLBACK');
        return res.status(404).json({ 
          error: 'Demande non trouvÃ©e ou dÃ©jÃ  traitÃ©e' 
        });
      }
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: approuve ? 'Autorisation de sortie gÃ©nÃ©rÃ©e avec succÃ¨s' : 'Demande rejetÃ©e',
        demande: result.rows[0],
        autorisationGeneree: approuve
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur approbation:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

module.exports = router;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/routes/chauffeurs.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/routes/chauffeurs.js
const express = require('express');
const router = express.Router();
const pool = require('../config/database');
const bcrypt = require('bcrypt');
// Auth dÃ©sactivÃ©e pour DEV
const authentifier = (req, res, next) => { 
  req.user = { id: 1, role: 'admin', email: 'admin@prirtem.mg' }; 
  next(); 
};
const verifierRole = (...roles) => (req, res, next) => next();

// ============================================
// GESTION DES CHAUFFEURS
// ============================================

// RÃ©cupÃ©rer tous les chauffeurs
router.get('/chauffeurs', authentifier, async (req, res) => {
  try {
    const { statut } = req.query;
    
    let query = `
      SELECT 
        c.*,
        u.nom,
        u.prenom,
        u.email,
        u.telephone,
        u.est_actif,
        COUNT(DISTINCT m.id) as nombre_missions,
        SUM(m.km_parcourus) as total_km_parcourus
      FROM chauffeurs c
      JOIN utilisateurs u ON c.utilisateur_id = u.id
      LEFT JOIN missions m ON c.id = m.chauffeur_id AND m.statut = 'terminee'
      WHERE 1=1
    `;
    
    const params = [];
    let paramCount = 1;
    
    if (statut) {
      query += ` AND c.statut = $${paramCount++}`;
      params.push(statut);
    }
    
    query += ` GROUP BY c.id, u.nom, u.prenom, u.email, u.telephone, u.est_actif
               ORDER BY u.nom, u.prenom`;
    
    const result = await pool.query(query, params);
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration chauffeurs:', error);
    res.status(500).json({ error: error.message });
  }
});

// RÃ©cupÃ©rer un chauffeur spÃ©cifique
router.get('/chauffeurs/:id', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT 
        c.*,
        u.nom,
        u.prenom,
        u.email,
        u.telephone,
        u.service,
        u.est_actif,
        COUNT(DISTINCT m.id) as nombre_missions,
        SUM(m.kilometrage_retour - m.kilometrage_depart) as total_km_parcourus,
        AVG(m.kilometrage_retour - m.kilometrage_depart) as moyenne_km_mission
      FROM chauffeurs c
      JOIN utilisateurs u ON c.utilisateur_id = u.id
      LEFT JOIN demandes_voiture m ON c.id = m.chauffeur_id AND m.statut = 'terminee'
      WHERE c.id = $1
      GROUP BY c.id, u.nom, u.prenom, u.email, u.telephone, u.service, u.est_actif
    `, [id]);
    
    if (result.rows.length === 0) {
      return res.status(404).json({ error: 'Chauffeur non trouvÃ©' });
    }
    
    res.json({ success: true, data: result.rows[0] });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration chauffeur:', error);
    res.status(500).json({ error: error.message });
  }
});

// CrÃ©er un nouveau chauffeur
router.post('/chauffeurs', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    const client = await pool.connect();
    try {
      const {
        nom, prenom, email, telephone,
        numero_permis, type_permis, date_expiration_permis,
        photo_url
      } = req.body;
      
      // Validation
      if (!nom || !prenom || !email || !numero_permis || !type_permis || !date_expiration_permis) {
        return res.status(400).json({ 
          error: 'Champs requis manquants',
          required: ['nom', 'prenom', 'email', 'numero_permis', 'type_permis', 'date_expiration_permis']
        });
      }
      
      // VÃ©rifier si l'email existe dÃ©jÃ 
      const emailExists = await client.query(
        'SELECT id FROM utilisateurs WHERE email = $1',
        [email]
      );
      
      if (emailExists.rows.length > 0) {
        return res.status(409).json({ 
          error: 'Cet email est dÃ©jÃ  utilisÃ©' 
        });
      }
      
      // VÃ©rifier si le numÃ©ro de permis existe dÃ©jÃ 
      const permisExists = await client.query(
        'SELECT id FROM chauffeurs WHERE numero_permis = $1',
        [numero_permis]
      );
      
      if (permisExists.rows.length > 0) {
        return res.status(409).json({ 
          error: 'Ce numÃ©ro de permis est dÃ©jÃ  enregistrÃ©' 
        });
      }
      
      await client.query('BEGIN');
      
      // GÃ©nÃ©rer un mot de passe temporaire
      const motDePasseTemp = `chauffeur${Math.random().toString(36).slice(-8)}`;
      const hashedPassword = await bcrypt.hash(motDePasseTemp, 10);
      
      // CrÃ©er l'utilisateur
      const userResult = await client.query(`
        INSERT INTO utilisateurs (nom, prenom, email, mot_de_passe, role, telephone, service)
        VALUES ($1, $2, $3, $4, 'chauffeur', $5, 'Logistique')
        RETURNING id
      `, [nom, prenom, email, hashedPassword, telephone || null]);
      
      // CrÃ©er le chauffeur
      const chauffeurResult = await client.query(`
        INSERT INTO chauffeurs (
          utilisateur_id, numero_permis, type_permis, 
          date_expiration_permis, photo_url, statut
        ) VALUES ($1, $2, $3, $4, $5, 'disponible')
        RETURNING *
      `, [userResult.rows[0].id, numero_permis, type_permis, 
          date_expiration_permis, photo_url || null]);
      
      await client.query('COMMIT');
      
      res.status(201).json({ 
        success: true, 
        message: 'Chauffeur crÃ©Ã© avec succÃ¨s',
        chauffeur: chauffeurResult.rows[0],
        motDePasseTemporaire: motDePasseTemp,
        info: 'Le chauffeur doit changer ce mot de passe Ã  la premiÃ¨re connexion'
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur crÃ©ation chauffeur:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// Modifier un chauffeur
router.put('/chauffeurs/:id', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      const updates = req.body;
      
      await client.query('BEGIN');
      
      // Champs du chauffeur
      const champsChauffeur = ['numero_permis', 'type_permis', 'date_expiration_permis', 
                               'photo_url', 'statut', 'note_evaluation'];
      const setChauffeur = [];
      const valuesChauffeur = [];
      let paramCount = 1;
      
      Object.keys(updates).forEach(key => {
        if (champsChauffeur.includes(key)) {
          setChauffeur.push(`${key} = $${paramCount++}`);
          valuesChauffeur.push(updates[key]);
        }
      });
      
      if (setChauffeur.length > 0) {
        valuesChauffeur.push(id);
        await client.query(`
          UPDATE chauffeurs 
          SET ${setChauffeur.join(', ')}
          WHERE id = $${paramCount}
        `, valuesChauffeur);
      }
      
      // Champs de l'utilisateur
      const champsUtilisateur = ['nom', 'prenom', 'email', 'telephone'];
      const setUtilisateur = [];
      const valuesUtilisateur = [];
      paramCount = 1;
      
      Object.keys(updates).forEach(key => {
        if (champsUtilisateur.includes(key)) {
          setUtilisateur.push(`${key} = $${paramCount++}`);
          valuesUtilisateur.push(updates[key]);
        }
      });
      
      if (setUtilisateur.length > 0) {
        valuesUtilisateur.push(id);
        await client.query(`
          UPDATE utilisateurs 
          SET ${setUtilisateur.join(', ')}
          WHERE id = (SELECT utilisateur_id FROM chauffeurs WHERE id = $${paramCount})
        `, valuesUtilisateur);
      }
      
      // RÃ©cupÃ©rer le chauffeur mis Ã  jour
      const result = await client.query(`
        SELECT 
          c.*,
          u.nom,
          u.prenom,
          u.email,
          u.telephone
        FROM chauffeurs c
        JOIN utilisateurs u ON c.utilisateur_id = u.id
        WHERE c.id = $1
      `, [id]);
      
      if (result.rows.length === 0) {
        await client.query('ROLLBACK');
        return res.status(404).json({ error: 'Chauffeur non trouvÃ©' });
      }
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: 'Chauffeur modifiÃ© avec succÃ¨s',
        chauffeur: result.rows[0] 
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur modification chauffeur:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// DÃ©sactiver un chauffeur
router.put('/chauffeurs/:id/desactiver', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      
      await client.query('BEGIN');
      
      // VÃ©rifier s'il y a des missions en cours
      const missionsEnCours = await client.query(
        'SELECT id FROM missions WHERE chauffeur_id = $1 AND statut = $2',
        [id, 'en_cours']
      );
      
      if (missionsEnCours.rows.length > 0) {
        await client.query('ROLLBACK');
        return res.status(400).json({ 
          error: 'Impossible de dÃ©sactiver un chauffeur avec des missions en cours' 
        });
      }
      
      // DÃ©sactiver le chauffeur
      await client.query(
        'UPDATE chauffeurs SET statut = $1 WHERE id = $2',
        ['indisponible', id]
      );
      
      // DÃ©sactiver l'utilisateur
      await client.query(
        'UPDATE utilisateurs SET est_actif = false WHERE id = (SELECT utilisateur_id FROM chauffeurs WHERE id = $1)',
        [id]
      );
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: 'Chauffeur dÃ©sactivÃ© avec succÃ¨s' 
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur dÃ©sactivation chauffeur:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// ============================================
// MISSIONS DU CHAUFFEUR
// ============================================

// RÃ©cupÃ©rer les missions d'un chauffeur
router.get('/chauffeurs/:id/missions', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    const { statut, date_debut, date_fin } = req.query;
    
    let query = `
      SELECT 
        m.*,
        v.immatriculation,
        v.marque,
        v.modele,
        dv.objet,
        dv.itineraire,
        u.nom as demandeur_nom,
        u.prenom as demandeur_prenom
      FROM missions m
      JOIN vehicules v ON m.vehicule_id = v.id
      LEFT JOIN demandes_voiture dv ON m.demande_voiture_id = dv.id
      LEFT JOIN utilisateurs u ON dv.demandeur_id = u.id
      WHERE m.chauffeur_id = $1
    `;
    
    const params = [id];
    let paramCount = 2;
    
    if (statut) {
      query += ` AND m.statut = $${paramCount++}`;
      params.push(statut);
    }
    
    if (date_debut) {
      query += ` AND m.date_debut >= $${paramCount++}`;
      params.push(date_debut);
    }
    
    if (date_fin) {
      query += ` AND m.date_debut <= $${paramCount++}`;
      params.push(date_fin);
    }
    
    query += ' ORDER BY m.date_debut DESC';
    
    const result = await pool.query(query, params);
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration missions:', error);
    res.status(500).json({ error: error.message });
  }
});

// ============================================
// DASHBOARDS
// ============================================

// Dashboard chauffeurs
router.get('/dashboard/chauffeurs', authentifier, async (req, res) => {
  try {
    const result = await pool.query('SELECT * FROM dashboard_chauffeurs');
    res.json({ success: true, data: result.rows });
  } catch (error) {
    console.error('Erreur dashboard chauffeurs:', error);
    res.status(500).json({ error: error.message });
  }
});

// Chauffeurs disponibles pour une date
router.get('/chauffeurs/disponibles/:date', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    try {
      const { date } = req.params;
      
      const result = await pool.query(`
        SELECT 
          c.id,
          u.nom,
          u.prenom,
          c.numero_permis,
          c.type_permis,
          c.note_evaluation
        FROM chauffeurs c
        JOIN utilisateurs u ON c.utilisateur_id = u.id
        WHERE c.statut = 'disponible'
        AND c.id NOT IN (
          SELECT DISTINCT chauffeur_id 
          FROM demandes_voiture 
          WHERE date_proposee = $1 
          AND statut IN ('valide', 'en_cours')
        )
        ORDER BY c.note_evaluation DESC NULLS LAST, u.nom
      `, [date]);
      
      res.json({ success: true, data: result.rows, count: result.rows.length });
    } catch (error) {
      console.error('Erreur chauffeurs disponibles:', error);
      res.status(500).json({ error: error.message });
    }
});

module.exports = router;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/routes/vehicules.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/routes/vehicules.js
const express = require('express');
const router = express.Router();
const pool = require('../config/database');
// Auth dÃ©sactivÃ©e pour DEV
const authentifier = (req, res, next) => { 
  req.user = { id: 1, role: 'admin', email: 'admin@prirtem.mg' }; 
  next(); 
};
const verifierRole = (...roles) => (req, res, next) => next();

// ============================================
// GESTION DES VÃ‰HICULES
// ============================================

// RÃ©cupÃ©rer tous les vÃ©hicules
router.get('/vehicules', authentifier, async (req, res) => {
  try {
    const { statut, type_vehicule } = req.query;
    
    let query = 'SELECT * FROM vehicules WHERE 1=1';
    const params = [];
    let paramCount = 1;
    
    if (statut) {
      query += ` AND statut = $${paramCount++}`;
      params.push(statut);
    }
    
    if (type_vehicule) {
      query += ` AND type_vehicule = $${paramCount++}`;
      params.push(type_vehicule);
    }
    
    query += ' ORDER BY immatriculation';
    
    const result = await pool.query(query, params);
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration vÃ©hicules:', error);
    res.status(500).json({ error: error.message });
  }
});

// RÃ©cupÃ©rer un vÃ©hicule spÃ©cifique
router.get('/vehicules/:id', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT 
        v.*,
        COUNT(DISTINCT m.id) as nombre_missions,
        SUM(m.km_parcourus) as total_km_missions,
        AVG(sc.consommation_aux_100) as consommation_moyenne
      FROM vehicules v
      LEFT JOIN missions m ON v.id = m.vehicule_id AND m.statut = 'terminee'
      LEFT JOIN suivi_carburant sc ON v.immatriculation = sc.immatriculation
      WHERE v.id = $1
      GROUP BY v.id
    `, [id]);
    
    if (result.rows.length === 0) {
      return res.status(404).json({ error: 'VÃ©hicule non trouvÃ©' });
    }
    
    res.json({ success: true, data: result.rows[0] });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration vÃ©hicule:', error);
    res.status(500).json({ error: error.message });
  }
});

// CrÃ©er un nouveau vÃ©hicule
router.post('/vehicules', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    try {
      const {
        immatriculation, marque, modele, annee, type_vehicule,
        type_carburant, capacite_reservoir, couleur, numero_chassis,
        date_acquisition
      } = req.body;
      
      // Validation
      if (!immatriculation || !marque || !modele) {
        return res.status(400).json({ 
          error: 'Champs requis manquants',
          required: ['immatriculation', 'marque', 'modele']
        });
      }
      
      const result = await pool.query(`
        INSERT INTO vehicules (
          immatriculation, marque, modele, annee, type_vehicule,
          type_carburant, capacite_reservoir, couleur, numero_chassis,
          date_acquisition, statut
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, 'disponible')
        RETURNING *
      `, [
        immatriculation.toUpperCase(), marque, modele, annee || null, 
        type_vehicule || 'voiture', type_carburant || 'essence',
        capacite_reservoir || null, couleur || null, numero_chassis || null,
        date_acquisition || null
      ]);
      
      res.status(201).json({ 
        success: true, 
        message: 'VÃ©hicule crÃ©Ã© avec succÃ¨s',
        vehicule: result.rows[0] 
      });
    } catch (error) {
      if (error.code === '23505') { // Duplicate key
        return res.status(409).json({ 
          error: 'Cette immatriculation existe dÃ©jÃ ' 
        });
      }
      console.error('Erreur crÃ©ation vÃ©hicule:', error);
      res.status(500).json({ error: error.message });
    }
});

// Modifier un vÃ©hicule
router.put('/vehicules/:id', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    try {
      const { id } = req.params;
      const updates = req.body;
      
      // Champs autorisÃ©s Ã  Ãªtre modifiÃ©s
      const champsAutorises = [
        'marque', 'modele', 'annee', 'type_vehicule', 'type_carburant',
        'capacite_reservoir', 'couleur', 'numero_chassis', 'statut',
        'km_actuel', 'photo_url'
      ];
      
      const setClauses = [];
      const values = [];
      let paramCount = 1;
      
      Object.keys(updates).forEach(key => {
        if (champsAutorises.includes(key)) {
          setClauses.push(`${key} = $${paramCount++}`);
          values.push(updates[key]);
        }
      });
      
      if (setClauses.length === 0) {
        return res.status(400).json({ 
          error: 'Aucun champ valide Ã  mettre Ã  jour',
          champsAutorises 
        });
      }
      
      values.push(id);
      
      const result = await pool.query(`
        UPDATE vehicules 
        SET ${setClauses.join(', ')}, updated_at = CURRENT_TIMESTAMP
        WHERE id = $${paramCount}
        RETURNING *
      `, values);
      
      if (result.rows.length === 0) {
        return res.status(404).json({ error: 'VÃ©hicule non trouvÃ©' });
      }
      
      res.json({ 
        success: true, 
        message: 'VÃ©hicule modifiÃ© avec succÃ¨s',
        vehicule: result.rows[0] 
      });
    } catch (error) {
      console.error('Erreur modification vÃ©hicule:', error);
      res.status(500).json({ error: error.message });
    }
});

// Supprimer un vÃ©hicule
router.delete('/vehicules/:id', 
  authentifier, 
  verifierRole('admin'), 
  async (req, res) => {
    const client = await pool.connect();
    try {
      const { id } = req.params;
      
      await client.query('BEGIN');
      
      // VÃ©rifier si le vÃ©hicule a des missions en cours
      const missionsEnCours = await client.query(
        'SELECT id FROM missions WHERE vehicule_id = $1 AND statut = $2',
        [id, 'en_cours']
      );
      
      if (missionsEnCours.rows.length > 0) {
        await client.query('ROLLBACK');
        return res.status(400).json({ 
          error: 'Impossible de supprimer un vÃ©hicule avec des missions en cours' 
        });
      }
      
      const result = await client.query(
        'DELETE FROM vehicules WHERE id = $1 RETURNING *',
        [id]
      );
      
      if (result.rows.length === 0) {
        await client.query('ROLLBACK');
        return res.status(404).json({ error: 'VÃ©hicule non trouvÃ©' });
      }
      
      await client.query('COMMIT');
      
      res.json({ 
        success: true, 
        message: 'VÃ©hicule supprimÃ© avec succÃ¨s' 
      });
    } catch (error) {
      await client.query('ROLLBACK');
      console.error('Erreur suppression vÃ©hicule:', error);
      res.status(500).json({ error: error.message });
    } finally {
      client.release();
    }
});

// ============================================
// MAINTENANCE VÃ‰HICULES
// ============================================

// RÃ©cupÃ©rer les maintenances d'un vÃ©hicule
router.get('/vehicules/:id/maintenances', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT * FROM entretiens 
      WHERE vehicule_id = $1
      ORDER BY date_debut DESC
    `, [id]);
    
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration maintenances:', error);
    res.status(500).json({ error: error.message });
  }
});

// Ajouter une maintenance
router.post('/vehicules/:id/maintenances', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    try {
      const { id } = req.params;
      const { type_entretien, description, date_debut, kilometrage, cout, garage } = req.body;
      
      if (!type_entretien || !date_debut) {
        return res.status(400).json({ 
          error: 'Champs requis manquants',
          required: ['type_entretien', 'date_debut']
        });
      }
      
      const result = await pool.query(`
        INSERT INTO entretiens (
          vehicule_id, type_entretien, description, date_debut,
          kilometrage, cout, garage, statut
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, 'planifie')
        RETURNING *
      `, [id, type_entretien, description || null, date_debut, 
          kilometrage || null, cout || null, garage || null]);
      
      res.status(201).json({ 
        success: true, 
        message: 'Maintenance ajoutÃ©e avec succÃ¨s',
        maintenance: result.rows[0] 
      });
    } catch (error) {
      console.error('Erreur ajout maintenance:', error);
      res.status(500).json({ error: error.message });
    }
});

// ============================================
// DOCUMENTS VÃ‰HICULES
// ============================================

// RÃ©cupÃ©rer les documents d'un vÃ©hicule
router.get('/vehicules/:id/documents', authentifier, async (req, res) => {
  try {
    const { id } = req.params;
    
    const result = await pool.query(`
      SELECT * FROM documents_vehicules
      WHERE vehicule_id = $1
      ORDER BY date_expiration ASC
    `, [id]);
    
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur rÃ©cupÃ©ration documents:', error);
    res.status(500).json({ error: error.message });
  }
});

// Ajouter un document
router.post('/vehicules/:id/documents', 
  authentifier, 
  verifierRole('logistique', 'admin'), 
  async (req, res) => {
    try {
      const { id } = req.params;
      const { type_document, numero_document, date_emission, date_expiration, fichier_url } = req.body;
      
      if (!type_document || !date_expiration) {
        return res.status(400).json({ 
          error: 'Champs requis manquants',
          required: ['type_document', 'date_expiration']
        });
      }
      
      const result = await pool.query(`
        INSERT INTO documents_vehicules (
          vehicule_id, type_document, numero_document, date_emission,
          date_expiration, fichier_url
        ) VALUES ($1, $2, $3, $4, $5, $6)
        RETURNING *
      `, [id, type_document, numero_document || null, date_emission || null,
          date_expiration, fichier_url || null]);
      
      res.status(201).json({ 
        success: true, 
        message: 'Document ajoutÃ© avec succÃ¨s',
        document: result.rows[0] 
      });
    } catch (error) {
      console.error('Erreur ajout document:', error);
      res.status(500).json({ error: error.message });
    }
});

// ============================================
// DASHBOARDS
// ============================================

// Dashboard vÃ©hicules
router.get('/dashboard/vehicules', authentifier, async (req, res) => {
  try {
    const result = await pool.query('SELECT * FROM dashboard_vehicules');
    res.json({ success: true, data: result.rows });
  } catch (error) {
    console.error('Erreur dashboard vÃ©hicules:', error);
    res.status(500).json({ error: error.message });
  }
});

// Alertes documents expirÃ©s
router.get('/dashboard/alertes-documents', authentifier, async (req, res) => {
  try {
    const result = await pool.query('SELECT * FROM alertes_documents_expires');
    res.json({ success: true, data: result.rows, count: result.rows.length });
  } catch (error) {
    console.error('Erreur alertes documents:', error);
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/middleware/auth.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/middleware/auth.js
const jwt = require('jsonwebtoken');

// Middleware d'authentification
const authentifier = (req, res, next) => {
  try {
    // RÃ©cupÃ©rer le token du header Authorization
    const authHeader = req.headers.authorization;
    
    if (!authHeader) {
      return res.status(401).json({ 
        error: 'Token non fourni',
        message: 'Veuillez vous connecter pour accÃ©der Ã  cette ressource'
      });
    }

    // Format attendu: "Bearer TOKEN"
    const token = authHeader.split(' ')[1];
    
    if (!token) {
      return res.status(401).json({ 
        error: 'Format de token invalide',
        message: 'Le token doit Ãªtre au format: Bearer TOKEN'
      });
    }

    // VÃ©rifier et dÃ©coder le token
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    
    // Ajouter les informations de l'utilisateur Ã  la requÃªte
    req.user = {
      id: decoded.id,
      role: decoded.role,
      email: decoded.email
    };
    
    next();
  } catch (error) {
    if (error.name === 'TokenExpiredError') {
      return res.status(401).json({ 
        error: 'Token expirÃ©',
        message: 'Votre session a expirÃ©, veuillez vous reconnecter'
      });
    }
    
    if (error.name === 'JsonWebTokenError') {
      return res.status(401).json({ 
        error: 'Token invalide',
        message: 'Le token fourni est invalide'
      });
    }
    
    return res.status(500).json({ 
      error: 'Erreur d\'authentification',
      message: error.message 
    });
  }
};

// Middleware de vÃ©rification de rÃ´le
const verifierRole = (...rolesAutorises) => {
  return (req, res, next) => {
    if (!req.user) {
      return res.status(401).json({ 
        error: 'Non authentifiÃ©',
        message: 'Veuillez vous connecter'
      });
    }

    if (!rolesAutorises.includes(req.user.role)) {
      return res.status(403).json({ 
        error: 'AccÃ¨s non autorisÃ©',
        message: `Cette action nÃ©cessite le rÃ´le: ${rolesAutorises.join(' ou ')}`,
        votreRole: req.user.role
      });
    }

    next();
  };
};

// Middleware optionnel - n'Ã©choue pas si pas de token
const authentifierOptional = (req, res, next) => {
  try {
    const authHeader = req.headers.authorization;
    
    if (authHeader) {
      const token = authHeader.split(' ')[1];
      if (token) {
        const decoded = jwt.verify(token, process.env.JWT_SECRET);
        req.user = {
          id: decoded.id,
          role: decoded.role,
          email: decoded.email
        };
      }
    }
  } catch (error) {
    // Ne pas bloquer si le token est invalide
    console.log('Token optionnel invalide:', error.message);
  }
  
  next();
};

// Fonction pour gÃ©nÃ©rer un token
const genererToken = (user) => {
  return jwt.sign(
    {
      id: user.id,
      role: user.role,
      email: user.email
    },
    process.env.JWT_SECRET,
    { expiresIn: '24h' }
  );
};

// Fonction pour vÃ©rifier un token
const verifierToken = (token) => {
  try {
    return jwt.verify(token, process.env.JWT_SECRET);
  } catch (error) {
    return null;
  }
};

module.exports = {
  authentifier,
  verifierRole,
  authentifierOptional,
  genererToken,
  verifierToken
};

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ fleet-management-backend/src/config/database.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// fleet-management-backend/src/config/database.js
const { Pool } = require('pg');
require('dotenv').config();

// Configuration de connexion PostgreSQL CORRIGÃ‰E
const pool = new Pool({
  host: process.env.DB_HOST || 'localhost',
  port: process.env.DB_PORT || 5432,
  user: process.env.DB_USER || 'postgres',
  password: process.env.DB_PASSWORD,
  database: process.env.DB_NAME || 'fleet_management', // CORRECTION ICI
  // Options supplÃ©mentaires pour Ã©viter les erreurs de connexion
  max: 20, // Nombre maximum de clients dans le pool
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 2000,
});

// GÃ©rer les erreurs de connexion
pool.on('error', (err, client) => {
  console.error('âŒ Erreur inattendue sur un client inactif:', err);
  process.exit(-1);
});

// Test de connexion au dÃ©marrage
pool.query('SELECT NOW()', (err, res) => {
  if (err) {
    console.error('âŒ Erreur de connexion Ã  PostgreSQL:', err.message);
    console.error('âš ï¸  VÃ©rifiez vos paramÃ¨tres de connexion dans .env');
  } else {
    console.log('âœ… Connexion PostgreSQL Ã©tablie avec succÃ¨s');
  }
});

module.exports = pool;